





<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://github.githubassets.com">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">



  <link crossorigin="anonymous" media="all" integrity="sha512-FG+rXqMOivrAjdEQE7tO4BwM1poGmg70hJFTlNSxjX87grtrZ6UnPR8NkzwUHlQEGviu9XuRYeO8zH9YwvZhdg==" rel="stylesheet" href="https://github.githubassets.com/assets/frameworks-146fab5ea30e8afac08dd11013bb4ee0.css" />
  
    <link crossorigin="anonymous" media="all" integrity="sha512-bqIvTjrYM8hmo8Y7y5fzsxn+OAFrHWG6byMAbBSM9qFe8NQymQqFeBaF2MGvAwy7x2s4bnzXE5bDGHnrQjtoQQ==" rel="stylesheet" href="https://github.githubassets.com/assets/github-6ea22f4e3ad833c866a3c63bcb97f3b3.css" />
    
    
    
    


  <meta name="viewport" content="width=device-width">
  
  <title>Oimo.js/oimo.min.js at gh-pages ¬∑ lo-th/Oimo.js</title>
    <meta name="description" content="Lightweight 3d physics engine for javascript. Contribute to lo-th/Oimo.js development by creating an account on GitHub.">
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    <meta name="twitter:image:src" content="https://avatars2.githubusercontent.com/u/1553208?s=400&amp;v=4" /><meta name="twitter:site" content="@github" /><meta name="twitter:card" content="summary" /><meta name="twitter:title" content="lo-th/Oimo.js" /><meta name="twitter:description" content="Lightweight 3d physics engine for javascript. Contribute to lo-th/Oimo.js development by creating an account on GitHub." />
    <meta property="og:image" content="https://avatars2.githubusercontent.com/u/1553208?s=400&amp;v=4" /><meta property="og:site_name" content="GitHub" /><meta property="og:type" content="object" /><meta property="og:title" content="lo-th/Oimo.js" /><meta property="og:url" content="https://github.com/lo-th/Oimo.js" /><meta property="og:description" content="Lightweight 3d physics engine for javascript. Contribute to lo-th/Oimo.js development by creating an account on GitHub." />

  <link rel="assets" href="https://github.githubassets.com/">
  <link rel="web-socket" href="wss://live.github.com/_sockets/VjI6NTE0OTY1Mjg2OjY2YzA2YjAwYmQzN2UwNjc0NmVkYjZjNDc1ZjIwNmJmZjIzNWY2NjJhZDEyNTIxZjFkNDE5N2Y1Yjg1NjEzZDc=--44d05740a3b7ad4d0d65c0417a19ded40e63efbe">
  <link rel="sudo-modal" href="/sessions/sudo_modal">

  <meta name="request-id" content="1A2C:2F0A0:13A53A0:1BAD988:5EA5BDEB" data-pjax-transient="true" /><meta name="html-safe-nonce" content="6094c85d86e1a62c98e3d3dc86d9c9fb91601b34" data-pjax-transient="true" /><meta name="visitor-payload" content="eyJyZWZlcnJlciI6Imh0dHBzOi8vZ2l0aHViLmNvbS9sby10aC9PaW1vLmpzL3RyZWUvZ2gtcGFnZXMvYnVpbGQiLCJyZXF1ZXN0X2lkIjoiMUEyQzoyRjBBMDoxM0E1M0EwOjFCQUQ5ODg6NUVBNUJERUIiLCJ2aXNpdG9yX2lkIjoiNDM4NDI4ODkyMDY0MDQ0MjI4MCIsInJlZ2lvbl9lZGdlIjoiYW1zIiwicmVnaW9uX3JlbmRlciI6ImlhZCJ9" data-pjax-transient="true" /><meta name="visitor-hmac" content="492b8aaf20eab6e09f4b89921ed7430c800246cb99cce8589677d6438a1dbc72" data-pjax-transient="true" />



  <meta name="github-keyboard-shortcuts" content="repository,source-code" data-pjax-transient="true" />

  

  <meta name="selected-link" value="repo_source" data-pjax-transient>

    <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
  <meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
  <meta name="google-site-verification" content="GXs5KoUUkNCoaAZn7wPN-t01Pywp9M3sEjnt_3_ZWPc">

<meta name="octolytics-host" content="collector.githubapp.com" /><meta name="octolytics-app-id" content="github" /><meta name="octolytics-event-url" content="https://collector.githubapp.com/github-external/browser_event" /><meta name="octolytics-dimension-ga_id" content="" class="js-octo-ga-id" /><meta name="octolytics-actor-id" content="1734931" /><meta name="octolytics-actor-login" content="Naaooj" /><meta name="octolytics-actor-hash" content="9e34c730ed3b482a0b28365fdb2a201f7e541ed4b0a74b7cb1b5559846f87927" />
<meta name="analytics-location" content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" />



    <meta name="google-analytics" content="UA-3769691-2">

  <meta class="js-ga-set" name="userId" content="1da8249d786b373ecd478da6853dc22f">

<meta class="js-ga-set" name="dimension1" content="Logged In">



  

      <meta name="hostname" content="github.com">
    <meta name="user-login" content="Naaooj">

      <meta name="expected-hostname" content="github.com">

      <meta name="js-proxy-site-detection-payload" content="NGJjZDQxOTJmODY4OGMwYjZiZDNlMDQwMzM1ZGJjMzJmMDBjNDhkODRhZWIzN2M5ODc5ODlhNGI0MmI2ZGRjZXx7InJlbW90ZV9hZGRyZXNzIjoiMTg1LjYuMjM1LjE2MSIsInJlcXVlc3RfaWQiOiIxQTJDOjJGMEEwOjEzQTUzQTA6MUJBRDk4ODo1RUE1QkRFQiIsInRpbWVzdGFtcCI6MTU4NzkyMDM3MywiaG9zdCI6ImdpdGh1Yi5jb20ifQ==">

    <meta name="enabled-features" content="MARKETPLACE_SOCIAL_PROOF_CUSTOMERS,MARKETPLACE_TRENDING_SOCIAL_PROOF,MARKETPLACE_RECOMMENDATIONS,MARKETPLACE_PENDING_INSTALLATIONS,GHE_CLOUD_TRIAL,PAGE_STALE_CHECK">

  <meta http-equiv="x-pjax-version" content="f64cab8b4a53a9c00d73f25fe157b3dd">
  

      <link href="https://github.com/lo-th/Oimo.js/commits/gh-pages.atom" rel="alternate" title="Recent Commits to Oimo.js:gh-pages" type="application/atom+xml">

  <meta name="go-import" content="github.com/lo-th/Oimo.js git https://github.com/lo-th/Oimo.js.git">

  <meta name="octolytics-dimension-user_id" content="1553208" /><meta name="octolytics-dimension-user_login" content="lo-th" /><meta name="octolytics-dimension-repository_id" content="13634772" /><meta name="octolytics-dimension-repository_nwo" content="lo-th/Oimo.js" /><meta name="octolytics-dimension-repository_public" content="true" /><meta name="octolytics-dimension-repository_is_fork" content="false" /><meta name="octolytics-dimension-repository_network_root_id" content="13634772" /><meta name="octolytics-dimension-repository_network_root_nwo" content="lo-th/Oimo.js" /><meta name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" content="false" />


    <link rel="canonical" href="https://github.com/lo-th/Oimo.js/blob/gh-pages/build/oimo.min.js" data-pjax-transient>


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://github.githubassets.com/pinned-octocat.svg" color="#000000">
  <link rel="alternate icon" class="js-site-favicon" type="image/png" href="https://github.githubassets.com/favicons/favicon.png">
  <link rel="icon" class="js-site-favicon" type="image/svg+xml" href="https://github.githubassets.com/favicons/favicon.svg">

<meta name="theme-color" content="#1e2327">


  <link rel="manifest" href="/manifest.json" crossOrigin="use-credentials">

  </head>

  <body class="logged-in env-production page-responsive page-blob">
    

    <div class="position-relative js-header-wrapper ">
      <a href="#start-of-content" class="p-3 bg-blue text-white show-on-focus js-skip-to-content">Skip to content</a>
      <span class="Progress progress-pjax-loader position-fixed width-full js-pjax-loader-bar">
        <span class="progress-pjax-loader-bar top-0 left-0" style="width: 0%;"></span>
      </span>

      
      



          <header class="Header py-lg-0 js-details-container Details flex-wrap flex-lg-nowrap p-responsive" role="banner">
  <div class="Header-item d-none d-lg-flex">
    <a class="Header-link" href="https://github.com/" data-hotkey="g d"
  aria-label="Homepage " data-ga-click="Header, go to dashboard, icon:logo">
  <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
</a>

  </div>

  <div class="Header-item d-lg-none">
    <button class="Header-link btn-link js-details-target" type="button" aria-label="Toggle navigation" aria-expanded="false">
      <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 12 16" version="1.1" width="18" aria-hidden="true"><path fill-rule="evenodd" d="M11.41 9H.59C0 9 0 8.59 0 8c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zm0-4H.59C0 5 0 4.59 0 4c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zM.59 11H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1H.59C0 13 0 12.59 0 12c0-.59 0-1 .59-1z"></path></svg>
    </button>
  </div>

  <div class="Header-item Header-item--full flex-column flex-lg-row width-full flex-order-2 flex-lg-order-none mr-0 mr-lg-3 mt-3 mt-lg-0 Details-content--hidden">
      <div class="header-search flex-self-stretch flex-lg-self-auto mr-0 mr-lg-3 mb-3 mb-lg-0 scoped-search site-scoped-search js-site-search position-relative js-jump-to"
  role="combobox"
  aria-owns="jump-to-results"
  aria-label="Search or jump to"
  aria-haspopup="listbox"
  aria-expanded="false"
>
  <div class="position-relative">
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-site-search-form" role="search" aria-label="Site" data-scope-type="Repository" data-scope-id="13634772" data-scoped-search-url="/lo-th/Oimo.js/search" data-unscoped-search-url="/search" action="/lo-th/Oimo.js/search" accept-charset="UTF-8" method="get">
      <label class="form-control input-sm header-search-wrapper p-0 header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center js-chromeless-input-container">
        <input type="text"
          class="form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
          data-hotkey="s,/"
          name="q"
          value=""
          placeholder="Search or jump to‚Ä¶"
          data-unscoped-placeholder="Search or jump to‚Ä¶"
          data-scoped-placeholder="Search or jump to‚Ä¶"
          autocapitalize="off"
          aria-autocomplete="list"
          aria-controls="jump-to-results"
          aria-label="Search or jump to‚Ä¶"
          data-jump-to-suggestions-path="/_graphql/GetSuggestedNavigationDestinations"
          spellcheck="false"
          autocomplete="off"
          >
          <input type="hidden" value="1YGmpwNNIzTCSD/swQhgB44UCtXfagBhbE2D9G2Vg76DcnADb25BVMKBgDz+tfB1W2WBmCAKjdjuQnx8zco8iA==" data-csrf="true" class="js-data-jump-to-suggestions-path-csrf" />
          <input type="hidden" class="js-site-search-type-field" name="type" >
            <img src="https://github.githubassets.com/images/search-key-slash.svg" alt="" class="mr-2 header-search-key-slash">

            <div class="Box position-absolute overflow-hidden d-none jump-to-suggestions js-jump-to-suggestions-container">
              
<ul class="d-none js-jump-to-suggestions-template-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-suggestion" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 00-1 1v14a1 1 0 001 1h13a1 1 0 001-1V1a1 1 0 00-1-1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0013 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 000-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">‚Üµ</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">‚Üµ</span>
    </div>
  </a>
</li>

</ul>

<ul class="d-none js-jump-to-no-results-template-container">
  <li class="d-flex flex-justify-center flex-items-center f5 d-none js-jump-to-suggestion p-2">
    <span class="text-gray">No suggested jump to results</span>
  </li>
</ul>

<ul id="jump-to-results" role="listbox" class="p-0 m-0 js-navigation-container jump-to-suggestions-results-container js-jump-to-suggestions-results-container">
  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-scoped-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 00-1 1v14a1 1 0 001 1h13a1 1 0 001-1V1a1 1 0 00-1-1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0013 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 000-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">‚Üµ</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">‚Üµ</span>
    </div>
  </a>
</li>

  

<li class="d-flex flex-justify-start flex-items-center p-0 f5 navigation-item js-navigation-item js-jump-to-global-search d-none" role="option">
  <a tabindex="-1" class="no-underline d-flex flex-auto flex-items-center jump-to-suggestions-path js-jump-to-suggestion-path js-navigation-open p-2" href="">
    <div class="jump-to-octicon js-jump-to-octicon flex-shrink-0 mr-2 text-center d-none">
      <svg height="16" width="16" class="octicon octicon-repo flex-shrink-0 js-jump-to-octicon-repo d-none" title="Repository" aria-label="Repository" viewBox="0 0 12 16" version="1.1" role="img"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-project flex-shrink-0 js-jump-to-octicon-project d-none" title="Project" aria-label="Project" viewBox="0 0 15 16" version="1.1" role="img"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 00-1 1v14a1 1 0 001 1h13a1 1 0 001-1V1a1 1 0 00-1-1z"></path></svg>
      <svg height="16" width="16" class="octicon octicon-search flex-shrink-0 js-jump-to-octicon-search d-none" title="Search" aria-label="Search" viewBox="0 0 16 16" version="1.1" role="img"><path fill-rule="evenodd" d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0013 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 000-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg>
    </div>

    <img class="avatar mr-2 flex-shrink-0 js-jump-to-suggestion-avatar d-none" alt="" aria-label="Team" src="" width="28" height="28">

    <div class="jump-to-suggestion-name js-jump-to-suggestion-name flex-auto overflow-hidden text-left no-wrap css-truncate css-truncate-target">
    </div>

    <div class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none js-jump-to-badge-search">
      <span class="js-jump-to-badge-search-text-default d-none" aria-label="in this repository">
        In this repository
      </span>
      <span class="js-jump-to-badge-search-text-global d-none" aria-label="in all of GitHub">
        All GitHub
      </span>
      <span aria-hidden="true" class="d-inline-block ml-1 v-align-middle">‚Üµ</span>
    </div>

    <div aria-hidden="true" class="border rounded-1 flex-shrink-0 bg-gray px-1 text-gray-light ml-1 f6 d-none d-on-nav-focus js-jump-to-badge-jump">
      Jump to
      <span class="d-inline-block ml-1 v-align-middle">‚Üµ</span>
    </div>
  </a>
</li>


    <li class="d-flex flex-justify-center flex-items-center p-0 f5 js-jump-to-suggestion">
      <img src="https://github.githubassets.com/images/spinners/octocat-spinner-128.gif" alt="Octocat Spinner Icon" class="m-2" width="28">
    </li>
</ul>

            </div>
      </label>
</form>  </div>
</div>


    <nav class="d-flex flex-column flex-lg-row flex-self-stretch flex-lg-self-auto" aria-label="Global">
    <a class="Header-link py-lg-3 d-block d-lg-none py-2 border-top border-lg-top-0 border-white-fade-15" data-ga-click="Header, click, Nav menu - item:dashboard:user" aria-label="Dashboard" href="/dashboard">
      Dashboard
</a>
  <a class="js-selected-navigation-item Header-link py-lg-3  mr-0 mr-lg-3 py-2 border-top border-lg-top-0 border-white-fade-15" data-hotkey="g p" data-ga-click="Header, click, Nav menu - item:pulls context:user" aria-label="Pull requests you created" data-selected-links="/pulls /pulls/assigned /pulls/mentioned /pulls" href="/pulls">
    Pull requests
</a>
  <a class="js-selected-navigation-item Header-link py-lg-3  mr-0 mr-lg-3 py-2 border-top border-lg-top-0 border-white-fade-15" data-hotkey="g i" data-ga-click="Header, click, Nav menu - item:issues context:user" aria-label="Issues you created" data-selected-links="/issues /issues/assigned /issues/mentioned /issues" href="/issues">
    Issues
</a>

    <div class="mr-0 mr-lg-3 py-2 py-lg-0 border-top border-lg-top-0 border-white-fade-15">
      <a class="js-selected-navigation-item Header-link py-lg-3 d-inline-block" data-ga-click="Header, click, Nav menu - item:marketplace context:user" data-octo-click="marketplace_click" data-octo-dimensions="location:nav_bar" data-selected-links=" /marketplace" href="/marketplace">
        Marketplace
</a>      

    </div>

  <a class="js-selected-navigation-item Header-link py-lg-3  mr-0 mr-lg-3 py-2 border-top border-lg-top-0 border-white-fade-15" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore" href="/explore">
    Explore
</a>


    <a class="Header-link d-block d-lg-none mr-0 mr-lg-3 py-2 py-lg-3 border-top border-lg-top-0 border-white-fade-15" href="https://github.com/Naaooj">
      <img class="avatar avatar-user" height="20" width="20" alt="@Naaooj" src="https://avatars3.githubusercontent.com/u/1734931?s=60&amp;v=4" />
      Naaooj
</a>
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form action="/logout" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="9LXYyMHofKb+7C2P/iFc0bQ4D1rgOCRovOV5ml2MKfFs/zj/xPyEZtGq2yOOLKFwhgqf9gw6ZOP1E/7vwF4Ouw==" />
      <button type="submit" class="Header-link mr-0 mr-lg-3 py-2 py-lg-3 border-top border-lg-top-0 border-white-fade-15 d-lg-none btn-link d-block width-full text-left" data-ga-click="Header, sign out, icon:logout" style="padding-left: 2px;">
        <svg class="octicon octicon-sign-out v-align-middle" viewBox="0 0 16 17" version="1.1" width="16" height="17" aria-hidden="true"><path fill-rule="evenodd" d="M12 9V7H8V5h4V3l4 3-4 3zm-2 3H6V3L2 1h8v3h1V1c0-.55-.45-1-1-1H1C.45 0 0 .45 0 1v11.38c0 .39.22.73.55.91L6 16.01V13h4c.55 0 1-.45 1-1V8h-1v4z"></path></svg>
        Sign out
      </button>
</form></nav>

  </div>

  <div class="Header-item Header-item--full flex-justify-center d-lg-none position-relative">
    <div class="css-truncate css-truncate-target width-fit position-absolute left-0 right-0 text-center">
                <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
    <a class="Header-link" href="/lo-th">lo-th</a>
    /
    <a class="Header-link" href="/lo-th/Oimo.js">Oimo.js</a>

</div>
  </div>

  <div class="Header-item mr-0 mr-lg-3 flex-order-1 flex-lg-order-none">
    

    <a aria-label="You have no unread notifications" class="Header-link notification-indicator position-relative tooltipped tooltipped-sw js-socket-channel js-notification-indicator" data-hotkey="g n" data-ga-click="Header, go to notifications, icon:read" data-channel="notification-changed:1734931" href="/notifications">
        <span class="js-indicator-modifier mail-status "></span>
        <svg class="octicon octicon-bell" viewBox="0 0 15 16" version="1.1" width="15" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 12v1H0v-1l.73-.58c.77-.77.81-2.55 1.19-4.42C2.69 3.23 6 2 6 2c0-.55.45-1 1-1s1 .45 1 1c0 0 3.39 1.23 4.16 5 .38 1.88.42 3.66 1.19 4.42l.66.58H14zm-7 4c1.11 0 2-.89 2-2H5c0 1.11.89 2 2 2z"></path></svg>
</a>
  </div>


  <div class="Header-item position-relative d-none d-lg-flex">
    <details class="details-overlay details-reset">
  <summary class="Header-link"
      aria-label="Create new‚Ä¶"
      data-ga-click="Header, create new, icon:add">
    <svg class="octicon octicon-plus" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 9H7v5H5V9H0V7h5V2h2v5h5v2z"></path></svg> <span class="dropdown-caret"></span>
  </summary>
  <details-menu class="dropdown-menu dropdown-menu-sw mt-n2">
    
<a role="menuitem" class="dropdown-item" href="/new" data-ga-click="Header, create new repository">
  New repository
</a>

  <a role="menuitem" class="dropdown-item" href="/new/import" data-ga-click="Header, import a repository">
    Import repository
  </a>

<a role="menuitem" class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, create new gist">
  New gist
</a>

  <a role="menuitem" class="dropdown-item" href="/organizations/new" data-ga-click="Header, create new organization">
    New organization
  </a>


  <div role="none" class="dropdown-divider"></div>
  <div class="dropdown-header">
    <span title="lo-th/Oimo.js">This repository</span>
  </div>
    <a role="menuitem" class="dropdown-item" href="/lo-th/Oimo.js/issues/new/choose" data-ga-click="Header, create new issue" data-skip-pjax>
      New issue
    </a>


  </details-menu>
</details>

  </div>

  <div class="Header-item position-relative mr-0 d-none d-lg-flex">
    
  <details class="details-overlay details-reset js-feature-preview-indicator-container" data-feature-preview-indicator-src="/users/Naaooj/feature_preview/indicator_check">

  <summary class="Header-link"
    aria-label="View profile and more"
    data-ga-click="Header, show menu, icon:avatar">
    <img
  alt="@Naaooj"
  width="20"
  height="20"
  src="https://avatars3.githubusercontent.com/u/1734931?s=60&amp;v=4"
  class="avatar avatar-user " />

      <span class="feature-preview-indicator js-feature-preview-indicator" hidden></span>
    <span class="dropdown-caret"></span>
  </summary>
  <details-menu class="dropdown-menu dropdown-menu-sw mt-n2" style="width: 180px">
    <div class="header-nav-current-user css-truncate"><a role="menuitem" class="no-underline user-profile-link px-3 pt-2 pb-2 mb-n2 mt-n1 d-block" href="/Naaooj" data-ga-click="Header, go to profile, text:Signed in as">Signed in as <strong class="css-truncate-target">Naaooj</strong></a></div>
    <div role="none" class="dropdown-divider"></div>

      <div class="pl-3 pr-3 f6 user-status-container js-user-status-context pb-1" data-url="/users/status?compact=1&amp;link_mentions=0&amp;truncate=1">
        
<div class="js-user-status-container
    user-status-compact rounded-1 px-2 py-1 mt-2
    border
  " data-team-hovercards-enabled>
  <details class="js-user-status-details details-reset details-overlay details-overlay-dark">
    <summary class="btn-link btn-block link-gray no-underline js-toggle-user-status-edit toggle-user-status-edit "
      role="menuitem" data-hydro-click="{&quot;event_type&quot;:&quot;user_profile.click&quot;,&quot;payload&quot;:{&quot;profile_user_id&quot;:1553208,&quot;target&quot;:&quot;EDIT_USER_STATUS&quot;,&quot;user_id&quot;:1734931,&quot;originating_url&quot;:&quot;https://github.com/lo-th/Oimo.js/blob/gh-pages/build/oimo.min.js&quot;}}" data-hydro-click-hmac="1498fc9f257f660eef55cacf9203acebd05c59515a7de1cf0c982090a6ebd6c7">
      <div class="d-flex">
        <div class="f6 lh-condensed user-status-header
          d-inline-block v-align-middle
            user-status-emoji-only-header circle
            pr-2
"
            style="max-width: 29px"
          >
          <div class="user-status-emoji-container flex-shrink-0 mr-1 mt-1 lh-condensed-ultra v-align-bottom" style="">
            <svg class="octicon octicon-smiley" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm4.81 12.81a6.72 6.72 0 01-2.17 1.45c-.83.36-1.72.53-2.64.53-.92 0-1.81-.17-2.64-.53-.81-.34-1.55-.83-2.17-1.45a6.773 6.773 0 01-1.45-2.17A6.59 6.59 0 011.21 8c0-.92.17-1.81.53-2.64.34-.81.83-1.55 1.45-2.17.62-.62 1.36-1.11 2.17-1.45A6.59 6.59 0 018 1.21c.92 0 1.81.17 2.64.53.81.34 1.55.83 2.17 1.45.62.62 1.11 1.36 1.45 2.17.36.83.53 1.72.53 2.64 0 .92-.17 1.81-.53 2.64-.34.81-.83 1.55-1.45 2.17zM4 6.8v-.59c0-.66.53-1.19 1.2-1.19h.59c.66 0 1.19.53 1.19 1.19v.59c0 .67-.53 1.2-1.19 1.2H5.2C4.53 8 4 7.47 4 6.8zm5 0v-.59c0-.66.53-1.19 1.2-1.19h.59c.66 0 1.19.53 1.19 1.19v.59c0 .67-.53 1.2-1.19 1.2h-.59C9.53 8 9 7.47 9 6.8zm4 3.2c-.72 1.88-2.91 3-5 3s-4.28-1.13-5-3c-.14-.39.23-1 .66-1h8.59c.41 0 .89.61.75 1z"></path></svg>
          </div>
        </div>
        <div class="
          d-inline-block v-align-middle
          
          
           css-truncate css-truncate-target 
           user-status-message-wrapper f6"
           style="line-height: 20px;" >
          <div class="d-inline-block text-gray-dark v-align-text-top text-left">
              <span class="text-gray ml-2">Set status</span>
          </div>
        </div>
      </div>
    </summary>
    <details-dialog class="details-dialog rounded-1 anim-fade-in fast Box Box--overlay" role="dialog" tabindex="-1">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="position-relative flex-auto js-user-status-form" action="/users/status?compact=1&amp;link_mentions=0&amp;truncate=1" accept-charset="UTF-8" method="post"><input type="hidden" name="_method" value="put" /><input type="hidden" name="authenticity_token" value="QpTjOX6obbStZogh4sgHBgmLWCiGcnMYWxlOb+QQG0TcbbiIPJKe1hetNfw0d+TK7YswDAoOYIAamQ/feMiEBQ==" />
        <div class="Box-header bg-gray border-bottom p-3">
          <button class="Box-btn-octicon js-toggle-user-status-edit btn-octicon float-right" type="reset" aria-label="Close dialog" data-close-dialog>
            <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
          </button>
          <h3 class="Box-title f5 text-bold text-gray-dark">Edit status</h3>
        </div>
        <input type="hidden" name="emoji" class="js-user-status-emoji-field" value="">
        <input type="hidden" name="organization_id" class="js-user-status-org-id-field" value="">
        <div class="px-3 py-2 text-gray-dark">
          <div class="js-characters-remaining-container position-relative mt-2">
            <div class="input-group d-table form-group my-0 js-user-status-form-group">
              <span class="input-group-button d-table-cell v-align-middle" style="width: 1%">
                <button type="button" aria-label="Choose an emoji" class="btn-outline btn js-toggle-user-status-emoji-picker btn-open-emoji-picker p-0">
                  <span class="js-user-status-original-emoji" hidden></span>
                  <span class="js-user-status-custom-emoji"></span>
                  <span class="js-user-status-no-emoji-icon" >
                    <svg class="octicon octicon-smiley" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm4.81 12.81a6.72 6.72 0 01-2.17 1.45c-.83.36-1.72.53-2.64.53-.92 0-1.81-.17-2.64-.53-.81-.34-1.55-.83-2.17-1.45a6.773 6.773 0 01-1.45-2.17A6.59 6.59 0 011.21 8c0-.92.17-1.81.53-2.64.34-.81.83-1.55 1.45-2.17.62-.62 1.36-1.11 2.17-1.45A6.59 6.59 0 018 1.21c.92 0 1.81.17 2.64.53.81.34 1.55.83 2.17 1.45.62.62 1.11 1.36 1.45 2.17.36.83.53 1.72.53 2.64 0 .92-.17 1.81-.53 2.64-.34.81-.83 1.55-1.45 2.17zM4 6.8v-.59c0-.66.53-1.19 1.2-1.19h.59c.66 0 1.19.53 1.19 1.19v.59c0 .67-.53 1.2-1.19 1.2H5.2C4.53 8 4 7.47 4 6.8zm5 0v-.59c0-.66.53-1.19 1.2-1.19h.59c.66 0 1.19.53 1.19 1.19v.59c0 .67-.53 1.2-1.19 1.2h-.59C9.53 8 9 7.47 9 6.8zm4 3.2c-.72 1.88-2.91 3-5 3s-4.28-1.13-5-3c-.14-.39.23-1 .66-1h8.59c.41 0 .89.61.75 1z"></path></svg>
                  </span>
                </button>
              </span>
              <text-expander keys=": @" data-mention-url="/autocomplete/user-suggestions" data-emoji-url="/autocomplete/emoji">
                <input
                  type="text"
                  autocomplete="off"
                  data-no-org-url="/autocomplete/user-suggestions"
                  data-org-url="/suggestions?mention_suggester=1"
                  data-maxlength="80"
                  class="d-table-cell width-full form-control js-user-status-message-field js-characters-remaining-field"
                  placeholder="What's happening?"
                  name="message"
                  value=""
                  aria-label="What is your current status?">
              </text-expander>
              <div class="error">Could not update your status, please try again.</div>
            </div>
            <div style="margin-left: 53px" class="my-1 text-small label-characters-remaining js-characters-remaining" data-suffix="remaining" hidden>
              80 remaining
            </div>
          </div>
          <include-fragment class="js-user-status-emoji-picker" data-url="/users/status/emoji"></include-fragment>
          <div class="overflow-auto ml-n3 mr-n3 px-3 border-bottom" style="max-height: 33vh">
            <div class="user-status-suggestions js-user-status-suggestions collapsed overflow-hidden">
              <h4 class="f6 text-normal my-3">Suggestions:</h4>
              <div class="mx-3 mt-2 clearfix">
                  <div class="float-left col-6">
                      <button type="button" value=":palm_tree:" class="d-flex flex-items-baseline flex-items-stretch lh-condensed f6 btn-link link-gray no-underline js-predefined-user-status mb-1">
                        <div class="emoji-status-width mr-2 v-align-middle js-predefined-user-status-emoji">
                          <g-emoji alias="palm_tree" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f334.png">üå¥</g-emoji>
                        </div>
                        <div class="d-flex flex-items-center no-underline js-predefined-user-status-message ws-normal text-left" style="border-left: 1px solid transparent">
                          On vacation
                        </div>
                      </button>
                      <button type="button" value=":face_with_thermometer:" class="d-flex flex-items-baseline flex-items-stretch lh-condensed f6 btn-link link-gray no-underline js-predefined-user-status mb-1">
                        <div class="emoji-status-width mr-2 v-align-middle js-predefined-user-status-emoji">
                          <g-emoji alias="face_with_thermometer" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f912.png">ü§í</g-emoji>
                        </div>
                        <div class="d-flex flex-items-center no-underline js-predefined-user-status-message ws-normal text-left" style="border-left: 1px solid transparent">
                          Out sick
                        </div>
                      </button>
                  </div>
                  <div class="float-left col-6">
                      <button type="button" value=":house:" class="d-flex flex-items-baseline flex-items-stretch lh-condensed f6 btn-link link-gray no-underline js-predefined-user-status mb-1">
                        <div class="emoji-status-width mr-2 v-align-middle js-predefined-user-status-emoji">
                          <g-emoji alias="house" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f3e0.png">üè†</g-emoji>
                        </div>
                        <div class="d-flex flex-items-center no-underline js-predefined-user-status-message ws-normal text-left" style="border-left: 1px solid transparent">
                          Working from home
                        </div>
                      </button>
                      <button type="button" value=":dart:" class="d-flex flex-items-baseline flex-items-stretch lh-condensed f6 btn-link link-gray no-underline js-predefined-user-status mb-1">
                        <div class="emoji-status-width mr-2 v-align-middle js-predefined-user-status-emoji">
                          <g-emoji alias="dart" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/1f3af.png">üéØ</g-emoji>
                        </div>
                        <div class="d-flex flex-items-center no-underline js-predefined-user-status-message ws-normal text-left" style="border-left: 1px solid transparent">
                          Focusing
                        </div>
                      </button>
                  </div>
              </div>
            </div>
            <div class="user-status-limited-availability-container">
              <div class="form-checkbox my-0">
                <input type="checkbox" name="limited_availability" value="1" class="js-user-status-limited-availability-checkbox" data-default-message="I may be slow to respond." aria-describedby="limited-availability-help-text-truncate-true-compact-true" id="limited-availability-truncate-true-compact-true">
                <label class="d-block f5 text-gray-dark mb-1" for="limited-availability-truncate-true-compact-true">
                  Busy
                </label>
                <p class="note" id="limited-availability-help-text-truncate-true-compact-true">
                  When others mention you, assign you, or request your review,
                  GitHub will let them know that you have limited availability.
                </p>
              </div>
            </div>
          </div>
          <div class="d-inline-block f5 mr-2 pt-3 pb-2" >
  <div class="d-inline-block mr-1">
    Clear status
  </div>

  <details class="js-user-status-expire-drop-down f6 dropdown details-reset details-overlay d-inline-block mr-2">
    <summary class="f5 btn-link link-gray-dark border px-2 py-1 rounded-1" aria-haspopup="true">
      <div class="js-user-status-expiration-interval-selected d-inline-block v-align-baseline">
        Never
      </div>
      <div class="dropdown-caret"></div>
    </summary>

    <ul class="dropdown-menu dropdown-menu-se pl-0 overflow-auto" style="width: 220px; max-height: 15.5em">
      <li>
        <button type="button" class="btn-link dropdown-item js-user-status-expire-button ws-normal" title="Never">
          <span class="d-inline-block text-bold mb-1">Never</span>
          <div class="f6 lh-condensed">Keep this status until you clear your status or edit your status.</div>
        </button>
      </li>
      <li class="dropdown-divider" role="none"></li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="in 30 minutes" value="2020-04-26T19:29:33+02:00">
            in 30 minutes
          </button>
        </li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="in 1 hour" value="2020-04-26T19:59:33+02:00">
            in 1 hour
          </button>
        </li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="in 4 hours" value="2020-04-26T22:59:33+02:00">
            in 4 hours
          </button>
        </li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="today" value="2020-04-26T23:59:59+02:00">
            today
          </button>
        </li>
        <li>
          <button type="button" class="btn-link dropdown-item ws-normal js-user-status-expire-button" title="this week" value="2020-04-26T23:59:59+02:00">
            this week
          </button>
        </li>
    </ul>
  </details>
  <input class="js-user-status-expiration-date-input" type="hidden" name="expires_at" value="">
</div>

          <include-fragment class="js-user-status-org-picker" data-url="/users/status/organizations"></include-fragment>
        </div>
        <div class="d-flex flex-items-center flex-justify-between p-3 border-top">
          <button type="submit" disabled class="width-full btn btn-primary mr-2 js-user-status-submit">
            Set status
          </button>
          <button type="button" disabled class="width-full js-clear-user-status-button btn ml-2 ">
            Clear status
          </button>
        </div>
</form>    </details-dialog>
  </details>
</div>

      </div>
      <div role="none" class="dropdown-divider"></div>

    <a role="menuitem" class="dropdown-item" href="/Naaooj" data-ga-click="Header, go to profile, text:your profile">Your profile</a>

    <a role="menuitem" class="dropdown-item" href="/Naaooj?tab=repositories" data-ga-click="Header, go to repositories, text:your repositories">Your repositories</a>

    <a role="menuitem" class="dropdown-item" href="/Naaooj?tab=projects" data-ga-click="Header, go to projects, text:your projects">Your projects</a>

    <a role="menuitem" class="dropdown-item" href="/Naaooj?tab=stars" data-ga-click="Header, go to starred repos, text:your stars">Your stars</a>
      <a role="menuitem" class="dropdown-item" href="https://gist.github.com/mine" data-ga-click="Header, your gists, text:your gists">Your gists</a>





    <div role="none" class="dropdown-divider"></div>
      
<div id="feature-enrollment-toggle" class="hide-sm hide-md feature-preview-details position-relative">
  <button
    type="button"
    class="dropdown-item btn-link"
    role="menuitem"
    data-feature-preview-trigger-url="/users/Naaooj/feature_previews"
    data-feature-preview-close-details="{&quot;event_type&quot;:&quot;feature_preview.clicks.close_modal&quot;,&quot;payload&quot;:{&quot;originating_url&quot;:&quot;https://github.com/lo-th/Oimo.js/blob/gh-pages/build/oimo.min.js&quot;,&quot;user_id&quot;:1734931}}"
    data-feature-preview-close-hmac="507e2fea195a43342aa587bd79b24e5696e4f4b45bcbf09df7497d8b6f15caca"
    data-hydro-click="{&quot;event_type&quot;:&quot;feature_preview.clicks.open_modal&quot;,&quot;payload&quot;:{&quot;link_location&quot;:&quot;user_dropdown&quot;,&quot;originating_url&quot;:&quot;https://github.com/lo-th/Oimo.js/blob/gh-pages/build/oimo.min.js&quot;,&quot;user_id&quot;:1734931}}"
    data-hydro-click-hmac="7d314db6d429ec924f96d64bf18a623e8ba0b587b48c47c411fd95be95b79313"
  >
    Feature preview
  </button>
    <span class="feature-preview-indicator js-feature-preview-indicator" hidden></span>
</div>

    <a role="menuitem" class="dropdown-item" href="https://help.github.com" data-ga-click="Header, go to help, text:help">Help</a>
    <a role="menuitem" class="dropdown-item" href="/settings/profile" data-ga-click="Header, go to settings, icon:settings">Settings</a>
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="logout-form" action="/logout" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="fu4oZAhUlbHvB2MCpwCbGftJ7H7xP41o3zBhhCqQwxbmpMhTDUBtccBBla7XDWa4yXt80h09zeOWxubxt0LkXA==" />
      
      <button type="submit" class="dropdown-item dropdown-signout" data-ga-click="Header, sign out, icon:logout" role="menuitem">
        Sign out
      </button>
      <input type="text" name="required_field_8091" hidden="hidden" class="form-control" /><input type="hidden" name="timestamp" value="1587920373227" class="form-control" /><input type="hidden" name="timestamp_secret" value="355fe5067d0d5908f3204a16ab1438a34c0f00e0288b9584083173ab435c39c5" class="form-control" />
</form>  </details-menu>
</details>

  </div>

</header>

        

    </div>

  <div id="start-of-content" class="show-on-focus"></div>




    <div id="js-flash-container">


  <template class="js-flash-template">
    <div class="flash flash-full  js-flash-template-container">
  <div class="container-lg px-2" >
    <button class="flash-close js-flash-close" type="button" aria-label="Dismiss this message">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
    </button>
    
      <div class="js-flash-template-message"></div>

  </div>
</div>
  </template>
</div>


      

  <include-fragment class="js-notification-shelf-include-fragment" data-base-src="https://github.com/notifications/beta/shelf"></include-fragment>




  <div class="application-main " data-commit-hovercards-enabled>
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode" class="">
    <main  >
      

  











  <div class="pagehead repohead hx_repohead readability-menu bg-gray-light pb-0 pt-0 pt-lg-3">

    <div class="d-flex container-lg mb-4 p-responsive d-none d-lg-flex">

      <div class="flex-auto min-width-0 width-fit mr-3">
        <h1 class="public  d-flex flex-wrap flex-items-center break-word float-none ">
  <span class="flex-self-stretch" style="margin-top: -2px;">
      <svg class="octicon octicon-repo" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"></path></svg>
  </span>
  <span class="author ml-2 flex-self-stretch" itemprop="author">
    <a class="url fn" rel="author" data-hovercard-type="user" data-hovercard-url="/users/lo-th/hovercard" data-octo-click="hovercard-link-click" data-octo-dimensions="link_type:self" href="/lo-th">lo-th</a>
  </span>
  <span class="path-divider flex-self-stretch">/</span>
  <strong itemprop="name" class="mr-2 flex-self-stretch">
    <a data-pjax="#js-repo-pjax-container" href="/lo-th/Oimo.js">Oimo.js</a>
  </strong>
  
</h1>


      </div>

      <ul class="pagehead-actions flex-shrink-0 " >



    <li >
      
    <details class="dropdown details-reset details-overlay d-inline-block float-left"
      data-deferred-details-content-url="/lo-th/Oimo.js/used_by_contents"
    >
      <summary class="btn btn-sm btn-with-count" data-menu-button>
        <svg class="octicon octicon-package v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M1 4.27v7.47c0 .45.3.84.75.97l6.5 1.73c.16.05.34.05.5 0l6.5-1.73c.45-.13.75-.52.75-.97V4.27c0-.45-.3-.84-.75-.97l-6.5-1.74a1.4 1.4 0 00-.5 0L1.75 3.3c-.45.13-.75.52-.75.97zm7 9.09l-6-1.59V5l6 1.61v6.75zM2 4l2.5-.67L11 5.06l-2.5.67L2 4zm13 7.77l-6 1.59V6.61l2-.55V8.5l2-.53V5.53L15 5v6.77zm-2-7.24L6.5 2.8l2-.53L15 4l-2 .53z"></path></svg>
        Used by
        <div class="dropdown-caret"></div>
      </summary>
      <include-fragment accept="text/fragment+html">
        <div class="dropdown-menu dropdown-menu-s p-3 text-center" style="width:360px;">
          <img width="32" height="32" alt="Loading..." class="my-0" src="https://github.githubassets.com/images/spinners/octocat-spinner-64.gif" />
          <p class="pt-1 m-0 f5 text-gray-light">
            Loading dependents...
          </p>
        </div>
      </include-fragment>
    </details>
    <a class="social-count"
      href="/lo-th/Oimo.js/network/dependents?package_id=UGFja2FnZS0xNDQ2ODIyNg%3D%3D"
      aria-label="310 repositories depend on this package"
    >
      310
    </a>

    </li>

  <li>
    
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form data-remote="true" class="clearfix js-social-form js-social-container" action="/notifications/subscribe" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="4jVrbXWBGNrWXn2NlYwin8NVMOY0IGgvX6uJmkV7bkTyqWwtqrG+q2d6P1Gt3x1NgQI6Ap1CrztwLG1Jf/hBhQ==" />      <input type="hidden" name="repository_id" value="13634772">

      <details class="details-reset details-overlay select-menu float-left">
        <summary class="select-menu-button float-left btn btn-sm btn-with-count" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;WATCH_BUTTON&quot;,&quot;repository_id&quot;:13634772,&quot;originating_url&quot;:&quot;https://github.com/lo-th/Oimo.js/blob/gh-pages/build/oimo.min.js&quot;,&quot;user_id&quot;:1734931}}" data-hydro-click-hmac="8aaa80659abc640260db8a8181cf432dc89fdd84b0c1c87f905b32bd5e8bbd40" data-ga-click="Repository, click Watch settings, action:blob#show">          <span data-menu-button>
              <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
              Watch
          </span>
</summary>        <details-menu
          class="select-menu-modal position-absolute mt-5"
          style="z-index: 99;">
          <div class="select-menu-header">
            <span class="select-menu-title">Notifications</span>
          </div>
          <div class="select-menu-list">
            <button type="submit" name="do" value="included" class="select-menu-item width-full" aria-checked="true" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Not watching</span>
                <span class="description">Be notified only when participating or @mentioned.</span>
                <span class="hidden-select-button-text" data-menu-button-contents>
                  <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                  Watch
                </span>
              </div>
            </button>

            <button type="submit" name="do" value="release_only" class="select-menu-item width-full" aria-checked="false" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Releases only</span>
                <span class="description">Be notified of new releases, and when participating or @mentioned.</span>
                <span class="hidden-select-button-text" data-menu-button-contents>
                  <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                  Unwatch releases
                </span>
              </div>
            </button>

            <button type="submit" name="do" value="subscribed" class="select-menu-item width-full" aria-checked="false" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Watching</span>
                <span class="description">Be notified of all conversations.</span>
                <span class="hidden-select-button-text" data-menu-button-contents>
                  <svg class="octicon octicon-eye v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"></path></svg>
                  Unwatch
                </span>
              </div>
            </button>

            <button type="submit" name="do" value="ignore" class="select-menu-item width-full" aria-checked="false" role="menuitemradio">
              <svg class="octicon octicon-check select-menu-item-icon" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z"></path></svg>
              <div class="select-menu-item-text">
                <span class="select-menu-item-heading">Ignoring</span>
                <span class="description">Never be notified.</span>
                <span class="hidden-select-button-text" data-menu-button-contents>
                  <svg class="octicon octicon-mute v-align-text-bottom" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 2.81v10.38c0 .67-.81 1-1.28.53L3 10H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h2l3.72-3.72C7.19 1.81 8 2.14 8 2.81zm7.53 3.22l-1.06-1.06-1.97 1.97-1.97-1.97-1.06 1.06L11.44 8 9.47 9.97l1.06 1.06 1.97-1.97 1.97 1.97 1.06-1.06L13.56 8l1.97-1.97z"></path></svg>
                  Stop ignoring
                </span>
              </div>
            </button>
          </div>
        </details-menu>
      </details>
        <a class="social-count js-social-count"
          href="/lo-th/Oimo.js/watchers"
          aria-label="101 users are watching this repository">
          101
        </a>
</form>
  </li>

  <li>
      <div class="js-toggler-container js-social-container starring-container ">
    <form class="starred js-social-form" action="/lo-th/Oimo.js/unstar" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="DZQzpS5Lp11WPlFTxIw4zo2oPRBghtTx9LIFdHONLHwTpDvm7Bj83u3ZDBwiCRo3B6LugFgcueBFpXySgB7iUA==" />
      <input type="hidden" name="context" value="repository"></input>
      <button type="submit" class="btn btn-sm btn-with-count js-toggler-target" aria-label="Unstar this repository" title="Unstar lo-th/Oimo.js" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;UNSTAR_BUTTON&quot;,&quot;repository_id&quot;:13634772,&quot;originating_url&quot;:&quot;https://github.com/lo-th/Oimo.js/blob/gh-pages/build/oimo.min.js&quot;,&quot;user_id&quot;:1734931}}" data-hydro-click-hmac="a2fd5f0edb085e222544a4c07c36bff0ae6bd318b74eed2683320a5a77de0cda" data-ga-click="Repository, click unstar button, action:blob#show; text:Unstar">        <svg height="16" class="octicon octicon-star v-align-text-bottom" vertical_align="text_bottom" viewBox="0 0 14 16" version="1.1" width="14" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"></path></svg>

        Unstar
</button>        <a class="social-count js-social-count" href="/lo-th/Oimo.js/stargazers"
           aria-label="2093 users starred this repository">
           2.1k
        </a>
</form>
    <form class="unstarred js-social-form" action="/lo-th/Oimo.js/star" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="YGFAU1o9PZhPujPH1i7KvnCpG3g/FwiDh7AtD/gFS/YUxJExFV+tlNYnll5iJGyk+uUh5LnvRnchYTXAQBJsLQ==" />
      <input type="hidden" name="context" value="repository"></input>
      <button type="submit" class="btn btn-sm btn-with-count js-toggler-target" aria-label="Unstar this repository" title="Star lo-th/Oimo.js" data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;STAR_BUTTON&quot;,&quot;repository_id&quot;:13634772,&quot;originating_url&quot;:&quot;https://github.com/lo-th/Oimo.js/blob/gh-pages/build/oimo.min.js&quot;,&quot;user_id&quot;:1734931}}" data-hydro-click-hmac="b65d7fad4e65794e67faf4607302af84c7c4e94d94a24019c90a50a3359b35e4" data-ga-click="Repository, click star button, action:blob#show; text:Star">        <svg height="16" class="octicon octicon-star v-align-text-bottom" vertical_align="text_bottom" viewBox="0 0 14 16" version="1.1" width="14" aria-hidden="true"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z"></path></svg>

        Star
</button>        <a class="social-count js-social-count" href="/lo-th/Oimo.js/stargazers"
           aria-label="2093 users starred this repository">
          2.1k
        </a>
</form>  </div>

  </li>

  <li>
          <div class="float-left">
            <details class="details-reset details-overlay details-overlay-dark" >
                    <summary
                  class="btn btn-sm btn-with-count"
                  title="Fork your own copy of lo-th/Oimo.js to your account"
                  data-hydro-click="{&quot;event_type&quot;:&quot;repository.click&quot;,&quot;payload&quot;:{&quot;target&quot;:&quot;FORK_BUTTON&quot;,&quot;repository_id&quot;:13634772,&quot;originating_url&quot;:&quot;https://github.com/lo-th/Oimo.js/blob/gh-pages/build/oimo.min.js&quot;,&quot;user_id&quot;:1734931}}" data-hydro-click-hmac="44159e66bd2a9f931914dc1e87ec064355081396ca111d394c83ab0bfe57a6c6" data-ga-click="Repository, show fork modal, action:blob#show; text:Fork">
                  <svg class="octicon octicon-repo-forked v-align-text-bottom" viewBox="0 0 10 16" version="1.1" width="10" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 00-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 002 1a1.993 1.993 0 00-1 3.72V6.5l3 3v1.78A1.993 1.993 0 005 15a1.993 1.993 0 001-3.72V9.5l3-3V4.72A1.993 1.993 0 008 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg>
                  Fork
                </summary>

  <details-dialog class="Box anim-fade-in fast Box--overlay d-flex flex-column" role="dialog" aria-modal="true" src="/lo-th/Oimo.js/fork?fragment=1" preload="true">
  <div class="Box-header">
    <button class="Box-btn-octicon btn-octicon float-right" type="button" aria-label="Close dialog" data-close-dialog="">
      <svg height="16" class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>

    </button>
    <h3 class="Box-title">Fork Oimo.js</h3>
  </div>
  <div class="Box-body overflow-auto">
    
              <div class="text-center ml-n3 mr-n3">
                <include-fragment>
                  <div class="octocat-spinner my-3" aria-label="Loading..."></div>
                  <p class="f5 text-gray">If this dialog fails to load, you can visit <a href="/lo-th/Oimo.js/fork">the fork page</a> directly.</p>
                </include-fragment>
              </div>

  </div>
</details-dialog>


</details>
          </div>

    <a href="/lo-th/Oimo.js/network/members" class="social-count"
       aria-label="219 users forked this repository">
      219
    </a>
  </li>
</ul>

    </div>
      
<nav class="hx_reponav reponav js-repo-nav js-sidenav-container-pjax clearfix container-lg p-responsive d-none d-lg-block"
     itemscope
     itemtype="http://schema.org/BreadcrumbList"
    aria-label="Repository"
     data-pjax="#js-repo-pjax-container">

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a class="js-selected-navigation-item selected reponav-item" itemprop="url" data-hotkey="g c" aria-current="page" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /lo-th/Oimo.js" href="/lo-th/Oimo.js">
      <div class="d-inline"><svg class="octicon octicon-code" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"></path></svg></div>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" data-hotkey="g i" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /lo-th/Oimo.js/issues" href="/lo-th/Oimo.js/issues">
        <div class="d-inline"><svg class="octicon octicon-issue-opened" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 011.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></div>
        <span itemprop="name">Issues</span>
        <span class="Counter">38</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a data-hotkey="g p" data-skip-pjax="true" itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /lo-th/Oimo.js/pulls" href="/lo-th/Oimo.js/pulls">
      <div class="d-inline"><svg class="octicon octicon-git-pull-request" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0010 15a1.993 1.993 0 001-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 00-1 3.72v6.56A1.993 1.993 0 002 15a1.993 1.993 0 001-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"></path></svg></div>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">1</span>
      <meta itemprop="position" content="4">
</a>  </span>


    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement" class="position-relative float-left">
      <a data-hotkey="g w" data-skip-pjax="true" class="js-selected-navigation-item reponav-item" data-selected-links="repo_actions /lo-th/Oimo.js/actions" href="/lo-th/Oimo.js/actions">
        <div class="d-inline"><svg class="octicon octicon-play" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14 8A7 7 0 110 8a7 7 0 0114 0zm-8.223 3.482l4.599-3.066a.5.5 0 000-.832L5.777 4.518A.5.5 0 005 4.934v6.132a.5.5 0 00.777.416z"></path></svg></div>
        Actions
</a>
    </span>

    <a data-hotkey="g b" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /lo-th/Oimo.js/projects" href="/lo-th/Oimo.js/projects">
      <div class="d-inline"><svg class="octicon octicon-project" viewBox="0 0 15 16" version="1.1" width="15" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 00-1 1v14a1 1 0 001 1h13a1 1 0 001-1V1a1 1 0 00-1-1z"></path></svg></div>
      Projects
      <span class="Counter">0</span>
</a>
    <a class="js-selected-navigation-item reponav-item" data-hotkey="g w" data-selected-links="repo_wiki /lo-th/Oimo.js/wiki" href="/lo-th/Oimo.js/wiki">
      <div class="d-inline"><svg class="octicon octicon-book" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z"></path></svg></div>
      Wiki
</a>
    <a data-skip-pjax="true" class="js-selected-navigation-item reponav-item" data-selected-links="security overview alerts policy token_scanning code_scanning /lo-th/Oimo.js/security" href="/lo-th/Oimo.js/security">
      <div class="d-inline"><svg class="octicon octicon-shield" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 2l7-2 7 2v6.02C14 12.69 8.69 16 7 16c-1.69 0-7-3.31-7-7.98V2zm1 .75L7 1l6 1.75v5.268C13 12.104 8.449 15 7 15c-1.449 0-6-2.896-6-6.982V2.75zm1 .75L7 2v12c-1.207 0-5-2.482-5-5.985V3.5z"></path></svg></div>
      Security
          <span class="Counter js-security-tab-count" data-url="/lo-th/Oimo.js/security/overall-count" hidden></span>
</a>
    <a class="js-selected-navigation-item reponav-item" data-selected-links="repo_graphs repo_contributors dependency_graph dependabot_updates pulse people /lo-th/Oimo.js/pulse" href="/lo-th/Oimo.js/pulse">
      <div class="d-inline"><svg class="octicon octicon-graph" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"></path></svg></div>
      Insights
</a>

</nav>

  <div class="reponav-wrapper reponav-small d-lg-none">
  <nav class="reponav js-reponav text-center no-wrap"
       itemscope
       itemtype="http://schema.org/BreadcrumbList">

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a class="js-selected-navigation-item selected reponav-item" itemprop="url" aria-current="page" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches repo_packages /lo-th/Oimo.js" href="/lo-th/Oimo.js">
        <span itemprop="name">Code</span>
        <meta itemprop="position" content="1">
</a>    </span>

      <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /lo-th/Oimo.js/issues" href="/lo-th/Oimo.js/issues">
          <span itemprop="name">Issues</span>
          <span class="Counter">38</span>
          <meta itemprop="position" content="2">
</a>      </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls checks /lo-th/Oimo.js/pulls" href="/lo-th/Oimo.js/pulls">
        <span itemprop="name">Pull requests</span>
        <span class="Counter">1</span>
        <meta itemprop="position" content="4">
</a>    </span>


      <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /lo-th/Oimo.js/projects" href="/lo-th/Oimo.js/projects">
          <span itemprop="name">Projects</span>
          <span class="Counter">0</span>
          <meta itemprop="position" content="5">
</a>      </span>

      <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_actions /lo-th/Oimo.js/actions" href="/lo-th/Oimo.js/actions">
          <span itemprop="name">Actions</span>
          <meta itemprop="position" content="6">
</a>      </span>

      <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="repo_wiki /lo-th/Oimo.js/wiki" href="/lo-th/Oimo.js/wiki">
          <span itemprop="name">Wiki</span>
          <meta itemprop="position" content="7">
</a>      </span>

      <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="security overview alerts policy token_scanning code_scanning /lo-th/Oimo.js/security" href="/lo-th/Oimo.js/security">
        <span itemprop="name">Security</span>
            <span class="Counter js-security-deferred-tab-count" hidden></span>
        <meta itemprop="position" content="8">
</a>
      <a class="js-selected-navigation-item reponav-item" data-selected-links="pulse /lo-th/Oimo.js/pulse" href="/lo-th/Oimo.js/pulse">
        Pulse
</a>
      <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a itemprop="url" class="js-selected-navigation-item reponav-item" data-selected-links="community /lo-th/Oimo.js/community" href="/lo-th/Oimo.js/community">
          Community
</a>      </span>

  </nav>
</div>


  </div>

  

  <include-fragment class="js-notification-shelf-include-fragment" data-base-src="https://github.com/notifications/beta/shelf"></include-fragment>


<div class="container-lg clearfix new-discussion-timeline  p-responsive">
  <div class="repository-content ">

    
    

  


    <a class="d-none js-permalink-shortcut" data-hotkey="y" href="/lo-th/Oimo.js/blob/dc745bb86c25767b2df59dee4b63c16bf86c3171/build/oimo.min.js">Permalink</a>

    <!-- blob contrib key: blob_contributors:v22:ab592497b9f289398d363affee011322 -->
    

    <div class="d-flex flex-items-start flex-shrink-0 flex-column flex-md-row pb-3">
      <span class="d-flex flex-justify-between width-full width-md-auto">
        
<details class="details-reset details-overlay branch-select-menu " id="branch-select-menu">
  <summary class="btn css-truncate btn-sm"
           data-hotkey="w"
           title="Switch branches or tags">
    <i>Branch:</i>
    <span class="css-truncate-target" data-menu-button>gh-pages</span>
    <span class="dropdown-caret"></span>
  </summary>

  <details-menu class="SelectMenu SelectMenu--hasFilter" src="/lo-th/Oimo.js/refs/gh-pages/build/oimo.min.js?source_action=show&amp;source_controller=blob" preload>
    <div class="SelectMenu-modal">
      <include-fragment class="SelectMenu-loading" aria-label="Menu is loading">
        <svg class="octicon octicon-octoface anim-pulse" height="32" viewBox="0 0 16 16" version="1.1" width="32" aria-hidden="true"><path fill-rule="evenodd" d="M14.7 5.34c.13-.32.55-1.59-.13-3.31 0 0-1.05-.33-3.44 1.3-1-.28-2.07-.32-3.13-.32s-2.13.04-3.13.32c-2.39-1.64-3.44-1.3-3.44-1.3-.68 1.72-.26 2.99-.13 3.31C.49 6.21 0 7.33 0 8.69 0 13.84 3.33 15 7.98 15S16 13.84 16 8.69c0-1.36-.49-2.48-1.3-3.35zM8 14.02c-3.3 0-5.98-.15-5.98-3.35 0-.76.38-1.48 1.02-2.07 1.07-.98 2.9-.46 4.96-.46 2.07 0 3.88-.52 4.96.46.65.59 1.02 1.3 1.02 2.07 0 3.19-2.68 3.35-5.98 3.35zM5.49 9.01c-.66 0-1.2.8-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.54-1.78-1.2-1.78zm5.02 0c-.66 0-1.2.79-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.53-1.78-1.2-1.78z"></path></svg>
      </include-fragment>
    </div>
  </details-menu>
</details>

        <div class="BtnGroup flex-shrink-0 d-md-none">
          <a href="/lo-th/Oimo.js/find/gh-pages"
                class="js-pjax-capture-input btn btn-sm BtnGroup-item"
                data-pjax
                data-hotkey="t">
            Find file
          </a>
          <clipboard-copy value="build/oimo.min.js" class="btn btn-sm BtnGroup-item">
            Copy path
          </clipboard-copy>
        </div>
      </span>
      <h2 id="blob-path" class="breadcrumb flex-auto min-width-0 text-normal flex-md-self-center ml-md-2 mr-md-3 my-2 my-md-0">
        <span class="js-repo-root text-bold"><span class="js-path-segment"><a data-pjax="true" href="/lo-th/Oimo.js"><span>Oimo.js</span></a></span></span><span class="separator">/</span><span class="js-path-segment"><a data-pjax="true" href="/lo-th/Oimo.js/tree/gh-pages/build"><span>build</span></a></span><span class="separator">/</span><strong class="final-path">oimo.min.js</strong>
          <span class="separator">/</span><details class="details-reset details-overlay d-inline" id="jumpto-symbol-select-menu">
  <summary class="btn-link link-gray css-truncate" aria-haspopup="true" data-hotkey="r" data-hydro-click="{&quot;event_type&quot;:&quot;code_navigation.click_on_blob_definitions&quot;,&quot;payload&quot;:{&quot;action&quot;:&quot;click_on_blob_definitions&quot;,&quot;repository_id&quot;:13634772,&quot;ref&quot;:&quot;gh-pages&quot;,&quot;language&quot;:&quot;JavaScript&quot;,&quot;originating_url&quot;:&quot;https://github.com/lo-th/Oimo.js/blob/gh-pages/build/oimo.min.js&quot;,&quot;user_id&quot;:1734931}}" data-hydro-click-hmac="5932076be4b2a6aef962a8c6df6e16bb8d007264122589f697e7bef36ba11b3d">
      <svg class="octicon octicon-code" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"></path></svg>
    <span data-menu-button>Jump to</span>
    <span class="dropdown-caret"></span>
  </summary>
  <details-menu class="SelectMenu SelectMenu--hasFilter" role="menu">
    <div class="SelectMenu-modal">
      <header class="SelectMenu-header">
        <span class="SelectMenu-title">Code definitions</span>
        <button class="SelectMenu-closeButton" type="button" data-toggle-for="jumpto-symbol-select-menu">
          <svg aria-label="Close menu" class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" role="img"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
        </button>
      </header>
        <div class="SelectMenu-filter">
          <input
            class="SelectMenu-input form-control js-filterable-field"
            id="jumpto-symbols-filter-field"
            type="text"
            autocomplete="off"
            spellcheck="false"
            autofocus
            placeholder="Filter definitions"
            aria-label="Filter definitions">
        </div>
      <div class="SelectMenu-list">
        <div data-filterable-for="jumpto-symbols-filter-field" data-filterable-type="substring">
          
        </div>
      </div>
      <footer class="SelectMenu-footer">
        <div class="d-flex flex-justify-between">
          Code navigation index up-to-date
          <svg class="octicon octicon-primitive-dot text-green" viewBox="0 0 8 16" version="1.1" width="8" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 8c0-2.2 1.8-4 4-4s4 1.8 4 4-1.8 4-4 4-4-1.8-4-4z"></path></svg>
        </div>
      </footer>
    </div>
  </details-menu>
</details>

      </h2>

      <div class="BtnGroup flex-shrink-0 d-none d-md-inline-block">
        <a href="/lo-th/Oimo.js/find/gh-pages"
              class="js-pjax-capture-input btn btn-sm BtnGroup-item"
              data-pjax
              data-hotkey="t">
          Find file
        </a>
        <clipboard-copy value="build/oimo.min.js" class="btn btn-sm BtnGroup-item">
          Copy path
        </clipboard-copy>
      </div>
    </div>



    <include-fragment src="/lo-th/Oimo.js/contributors/gh-pages/build/oimo.min.js" class="Box Box--condensed commit-loader">
      <div class="Box-body bg-blue-light f6">
        Fetching contributors&hellip;
      </div>

      <div class="Box-body d-flex flex-items-center" >
        <img alt="" class="loader-loading mr-2" src="https://github.githubassets.com/images/spinners/octocat-spinner-32-EAF2F5.gif" width="16" height="16" />
        <span class="text-red h6 loader-error">Cannot retrieve contributors at this time</span>
      </div>
</include-fragment>





    <div class="Box mt-3 position-relative
      ">
      
<div class="Box-header py-2 d-flex flex-column flex-shrink-0 flex-md-row flex-md-items-center">
  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">

      2 lines (2 sloc)
      <span class="file-info-divider"></span>
    152 KB
  </div>

  <div class="d-flex py-1 py-md-0 flex-auto flex-order-1 flex-md-order-2 flex-sm-grow-0 flex-justify-between">

    <div class="BtnGroup">
      <a id="raw-url" class="btn btn-sm BtnGroup-item" href="/lo-th/Oimo.js/raw/gh-pages/build/oimo.min.js">Raw</a>
        <a class="btn btn-sm js-update-url-with-hash BtnGroup-item" data-hotkey="b" href="/lo-th/Oimo.js/blame/gh-pages/build/oimo.min.js">Blame</a>
      <a rel="nofollow" class="btn btn-sm BtnGroup-item" href="/lo-th/Oimo.js/commits/gh-pages/build/oimo.min.js">History</a>
    </div>


    <div>
          <a class="btn-octicon tooltipped tooltipped-nw js-remove-unless-platform"
             data-platforms="windows,mac"
             href="https://desktop.github.com"
             aria-label="Open this file in GitHub Desktop"
             data-ga-click="Repository, open with desktop">
              <svg class="octicon octicon-device-desktop" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M15 2H1c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h5.34c-.25.61-.86 1.39-2.34 2h8c-1.48-.61-2.09-1.39-2.34-2H15c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm0 9H1V3h14v8z"></path></svg>
          </a>

          <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="inline-form js-update-url-with-hash" action="/lo-th/Oimo.js/edit/gh-pages/build/oimo.min.js" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="B/UsWwxASNyNhNZntnsynMCdIZw3qlqbOM30Q829oMV2500RqKjSFKsJa3ZD+PuZ7iQRorBl7TU1oIwNH1g25w==" />
            <button class="btn-octicon tooltipped tooltipped-nw" type="submit"
              aria-label="Fork this project and edit the file" data-hotkey="e" data-disable-with>
              <svg class="octicon octicon-pencil" viewBox="0 0 14 16" version="1.1" width="14" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 011.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"></path></svg>
            </button>
</form>
          <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="inline-form" action="/lo-th/Oimo.js/delete/gh-pages/build/oimo.min.js" accept-charset="UTF-8" method="post"><input type="hidden" name="authenticity_token" value="O8BoxkTtgJE7Gsag/vhKeBeaUrSRhF+wgo6rBEp6Zpp+UXXHIJQLunOuqDxC/YLcx95Xzy99y5Bzbgexbnt5/g==" />
            <button class="btn-octicon btn-octicon-danger tooltipped tooltipped-nw" type="submit"
              aria-label="Fork this project and delete the file" data-disable-with>
              <svg class="octicon octicon-trashcan" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M11 2H9c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1H2c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1v9c0 .55.45 1 1 1h7c.55 0 1-.45 1-1V5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 12H3V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9zm1-10H2V3h9v1z"></path></svg>
            </button>
</form>    </div>
  </div>
</div>



      

  <div itemprop="text" class="Box-body p-0 blob-wrapper data type-javascript ">
      
<table class="highlight tab-size js-file-line-container" data-tab-size="8" data-paste-markdown-skip>
      <tr>
        <td id="L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="LC1" class="blob-code blob-code-inner js-file-line">// lo-th.github.io/Oimo.js/license</td>
      </tr>
      <tr>
        <td id="L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="LC2" class="blob-code blob-code-inner js-file-line">!function(t,i){&quot;object&quot;==typeof exports&amp;&amp;&quot;undefined&quot;!=typeof module?i(exports):&quot;function&quot;==typeof define&amp;&amp;define.amd?define([&quot;exports&quot;],i):i((t=t||self).OIMO={})}(this,function(t){&quot;use strict&quot;;void 0===Number.EPSILON&amp;&amp;(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&amp;&amp;(Math.sign=function(t){return t&lt;0?-1:t&gt;0?1:+t}),void 0===Function.prototype.name&amp;&amp;Object.defineProperty(Function.prototype,&quot;name&quot;,{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&amp;&amp;(Object.assign=function(t){if(null==t)throw new TypeError(&quot;Cannot convert undefined or null to object&quot;);for(var i=Object(t),s=1;s&lt;arguments.length;s++){var h=arguments[s];if(null!=h)for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&amp;&amp;(i[e]=h[e])}return i});var s,h,e,a,o=&quot;1.0.9&quot;,n=0,r=1,l=2,c=3,m=0,p=0,u=1,y=2,x=3,d=4,f=5,b=0,v=1,z=2,N=3,k=4,w=5,M=6,g={sqrt:Math.sqrt,abs:Math.abs,floor:Math.floor,cos:Math.cos,sin:Math.sin,acos:Math.acos,asin:Math.asin,atan2:Math.atan2,round:Math.round,pow:Math.pow,max:Math.max,min:Math.min,random:Math.random,degtorad:.017453292519943295,radtodeg:57.29577951308232,PI:3.141592653589793,TwoPI:6.283185307179586,PI90:1.570796326794896,PI270:4.712388980384689,INF:1/0,EPZ:1e-5,EPZ2:1e-6,lerp:function(t,i,s){return(1-s)*t+s*i},randInt:function(t,i){return t+g.floor(g.random()*(i-t+1))},rand:function(t,i){return t+g.random()*(i-t)},generateUUID:(h=&quot;0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&quot;.split(&quot;&quot;),e=new Array(36),a=0,function(){for(var t=0;t&lt;36;t++)8===t||13===t||18===t||23===t?e[t]=&quot;-&quot;:14===t?e[t]=&quot;4&quot;:(a&lt;=2&amp;&amp;(a=33554432+16777216*Math.random()|0),s=15&amp;a,a&gt;&gt;=4,e[t]=h[19===t?3&amp;s|8:s]);return e.join(&quot;&quot;)}),int:function(t){return g.floor(t)},fix:function(t,i){return t.toFixed(i||3,10)},clamp:function(t,i,s){return g.max(i,g.min(s,t))},distance:function(t,i){var s=i[0]-t[0],h=i[1]-t[1],e=i[2]-t[2];return g.sqrt(s*s+h*h+e*e)},acosClamp:function(t){return t&gt;1?0:t&lt;-1?g.PI:g.acos(t)},distanceVector:function(t,i){var s=t.x-i.x,h=t.y-i.y,e=t.z-i.z;return s*s+h*h+e*e},dotVectors:function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z}};function I(t,i){console.error(&quot;[OIMO] &quot;+t+&quot;: &quot;+i)}function V(t){this.parent=t,this.infos=new Float32Array(13),this.f=[0,0,0],this.times=[0,0,0,0],this.broadPhase=this.parent.broadPhaseType,this.version=o,this.fps=0,this.tt=0,this.broadPhaseTime=0,this.narrowPhaseTime=0,this.solvingTime=0,this.totalTime=0,this.updateTime=0,this.MaxBroadPhaseTime=0,this.MaxNarrowPhaseTime=0,this.MaxSolvingTime=0,this.MaxTotalTime=0,this.MaxUpdateTime=0}function L(t,i,s){this.x=t||0,this.y=i||0,this.z=s||0}function S(t,i,s,h){this.x=t||0,this.y=i||0,this.z=s||0,this.w=void 0!==h?h:1}function P(t,i,s,h,e,a,o,n,r){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length&gt;0&amp;&amp;console.error(&quot;OIMO.Mat33: the constructor no longer reads arguments. use .set() instead.&quot;)}function T(t,i,s,h,e,a){this.elements=new Float32Array(6);var o=this.elements;o[0]=t||0,o[1]=s||0,o[2]=e||0,o[3]=i||0,o[4]=h||0,o[5]=a||0}Object.assign(V.prototype,{setTime:function(t){this.times[t||0]=performance.now()},resetMax:function(){this.MaxBroadPhaseTime=0,this.MaxNarrowPhaseTime=0,this.MaxSolvingTime=0,this.MaxTotalTime=0,this.MaxUpdateTime=0},calcBroadPhase:function(){this.setTime(2),this.broadPhaseTime=this.times[2]-this.times[1]},calcNarrowPhase:function(){this.setTime(3),this.narrowPhaseTime=this.times[3]-this.times[2]},calcEnd:function(){this.setTime(2),this.solvingTime=this.times[2]-this.times[1],this.totalTime=this.times[2]-this.times[0],this.updateTime=this.totalTime-(this.broadPhaseTime+this.narrowPhaseTime+this.solvingTime),100===this.tt&amp;&amp;this.resetMax(),this.tt&gt;100&amp;&amp;(this.broadPhaseTime&gt;this.MaxBroadPhaseTime&amp;&amp;(this.MaxBroadPhaseTime=this.broadPhaseTime),this.narrowPhaseTime&gt;this.MaxNarrowPhaseTime&amp;&amp;(this.MaxNarrowPhaseTime=this.narrowPhaseTime),this.solvingTime&gt;this.MaxSolvingTime&amp;&amp;(this.MaxSolvingTime=this.solvingTime),this.totalTime&gt;this.MaxTotalTime&amp;&amp;(this.MaxTotalTime=this.totalTime),this.updateTime&gt;this.MaxUpdateTime&amp;&amp;(this.MaxUpdateTime=this.updateTime)),this.upfps(),this.tt++,this.tt&gt;500&amp;&amp;(this.tt=0)},upfps:function(){this.f[1]=Date.now(),this.f[1]-1e3&gt;this.f[0]&amp;&amp;(this.f[0]=this.f[1],this.fps=this.f[2],this.f[2]=0),this.f[2]++},show:function(){return[&quot;Oimo.js &quot;+this.version+&quot;&lt;br&gt;&quot;,this.broadPhase+&quot;&lt;br&gt;&lt;br&gt;&quot;,&quot;FPS: &quot;+this.fps+&quot; fps&lt;br&gt;&lt;br&gt;&quot;,&quot;rigidbody &quot;+this.parent.numRigidBodies+&quot;&lt;br&gt;&quot;,&quot;contact &amp;nbsp;&amp;nbsp;&quot;+this.parent.numContacts+&quot;&lt;br&gt;&quot;,&quot;ct-point &amp;nbsp;&quot;+this.parent.numContactPoints+&quot;&lt;br&gt;&quot;,&quot;paircheck &quot;+this.parent.broadPhase.numPairChecks+&quot;&lt;br&gt;&quot;,&quot;island &amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;+this.parent.numIslands+&quot;&lt;br&gt;&lt;br&gt;&quot;,&quot;Time in milliseconds&lt;br&gt;&lt;br&gt;&quot;,&quot;broadphase &amp;nbsp;&quot;+g.fix(this.broadPhaseTime)+&quot; | &quot;+g.fix(this.MaxBroadPhaseTime)+&quot;&lt;br&gt;&quot;,&quot;narrowphase &quot;+g.fix(this.narrowPhaseTime)+&quot; | &quot;+g.fix(this.MaxNarrowPhaseTime)+&quot;&lt;br&gt;&quot;,&quot;solving &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;+g.fix(this.solvingTime)+&quot; | &quot;+g.fix(this.MaxSolvingTime)+&quot;&lt;br&gt;&quot;,&quot;total &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;+g.fix(this.totalTime)+&quot; | &quot;+g.fix(this.MaxTotalTime)+&quot;&lt;br&gt;&quot;,&quot;updating &amp;nbsp;&amp;nbsp;&amp;nbsp;&quot;+g.fix(this.updateTime)+&quot; | &quot;+g.fix(this.MaxUpdateTime)+&quot;&lt;br&gt;&quot;].join(&quot;\n&quot;)},toArray:function(){return this.infos[0]=this.parent.broadPhase.types,this.infos[1]=this.parent.numRigidBodies,this.infos[2]=this.parent.numContacts,this.infos[3]=this.parent.broadPhase.numPairChecks,this.infos[4]=this.parent.numContactPoints,this.infos[5]=this.parent.numIslands,this.infos[6]=this.broadPhaseTime,this.infos[7]=this.narrowPhaseTime,this.infos[8]=this.solvingTime,this.infos[9]=this.updateTime,this.infos[10]=this.totalTime,this.infos[11]=this.fps,this.infos}}),Object.assign(L.prototype,{Vec3:!0,set:function(t,i,s){return this.x=t,this.y=i,this.z=s,this},add:function(t,i){return void 0!==i?this.addVectors(t,i):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addVectors:function(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this},addEqual:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},sub:function(t,i){return void 0!==i?this.subVectors(t,i):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subVectors:function(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this},subEqual:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},scale:function(t,i){return this.x=t.x*i,this.y=t.y*i,this.z=t.z*i,this},scaleEqual:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},addScaledVector:function(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this},subScaledVector:function(t,i){return this.x-=t.x*i,this.y-=t.y*i,this.z-=t.z*i,this},cross:function(t,i){if(void 0!==i)return this.crossVectors(t,i);var s=this.x,h=this.y,e=this.z;return this.x=h*t.z-e*t.y,this.y=e*t.x-s*t.z,this.z=s*t.y-h*t.x,this},crossVectors:function(t,i){var s=t.x,h=t.y,e=t.z,a=i.x,o=i.y,n=i.z;return this.x=h*n-e*o,this.y=e*a-s*n,this.z=s*o-h*a,this},tangent:function(t){var i=t.x,s=t.y,h=t.z;return this.x=s*i-h*h,this.y=-h*s-i*i,this.z=i*h+s*s,this},invert:function(t){return this.x=-t.x,this.y=-t.y,this.z=-t.z,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},addition:function(){return this.x+this.y+this.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return g.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},applyMatrix3:function(t,i){var s=this.x,h=this.y,e=this.z,a=t.elements;return i?(this.x=a[0]*s+a[1]*h+a[2]*e,this.y=a[3]*s+a[4]*h+a[5]*e,this.z=a[6]*s+a[7]*h+a[8]*e):(this.x=a[0]*s+a[3]*h+a[6]*e,this.y=a[1]*s+a[4]*h+a[7]*e,this.z=a[2]*s+a[5]*h+a[8]*e),this},applyQuaternion:function(t){var i=this.x,s=this.y,h=this.z,e=t.x,a=t.y,o=t.z,n=t.w,r=n*i+a*h-o*s,l=n*s+o*i-e*h,c=n*h+e*s-a*i,m=-e*i-a*s-o*h;return this.x=r*n+m*-e+l*-o-c*-a,this.y=l*n+m*-a+c*-e-r*-o,this.z=c*n+m*-o+r*-a-l*-e,this},testZero:function(){return 0!==this.x||0!==this.y||0!==this.z},testDiff:function(t){return!this.equals(t)},equals:function(t){return t.x===this.x&amp;&amp;t.y===this.y&amp;&amp;t.z===this.z},clone:function(){return new this.constructor(this.x,this.y,this.z)},toString:function(){return&quot;Vec3[&quot;+this.x.toFixed(4)+&quot;, &quot;+this.y.toFixed(4)+&quot;, &quot;+this.z.toFixed(4)+&quot;]&quot;},multiplyScalar:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divideScalar:function(t){return this.multiplyScalar(1/t)},normalize:function(){return this.divideScalar(this.length())},toArray:function(t,i){void 0===i&amp;&amp;(i=0),t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z},fromArray:function(t,i){return void 0===i&amp;&amp;(i=0),this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}}),Object.assign(S.prototype,{Quat:!0,set:function(t,i,s,h){return this.x=t,this.y=i,this.z=s,this.w=h,this},addTime:function(t,i){var s=t.x,h=t.y,e=t.z,a=this.w,o=this.x,n=this.y,r=this.z;return i*=.5,this.x+=i*(s*a+h*r-e*n),this.y+=i*(h*a+e*o-s*r),this.z+=i*(e*a+s*n-h*o),this.w+=i*(-s*o-h*n-e*r),this.normalize(),this},multiply:function(t,i){return void 0!==i?this.multiplyQuaternions(t,i):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,i){var s=t.x,h=t.y,e=t.z,a=t.w,o=i.x,n=i.y,r=i.z,l=i.w;return this.x=s*l+a*o+h*r-e*n,this.y=h*l+a*n+e*o-s*r,this.z=e*l+a*r+s*n-h*o,this.w=a*l-s*o-h*n-e*r,this},setFromUnitVectors:function(t,i){var s=new L,h=t.dot(i)+1;return h&lt;g.EPS2?(h=0,g.abs(t.x)&gt;g.abs(t.z)?s.set(-t.y,t.x,0):s.set(0,-t.z,t.y)):s.crossVectors(t,i),this._x=s.x,this._y=s.y,this._z=s.z,this._w=h,this.normalize()},arc:function(t,i){var s=t.x,h=t.y,e=t.z,a=i.x,o=i.y,n=i.z,r=s*a+h*o+e*n;if(-1==r)return a=h*s-e*e,o=-e*h-s*s,n=s*e+h*h,r=1/g.sqrt(a*a+o*o+n*n),this.w=0,this.x=a*r,this.y=o*r,this.z=n*r,this;var l=h*n-e*o,c=e*a-s*n,m=s*o-h*a;return this.w=g.sqrt(.5*(1+r)),r=.5/this.w,this.x=l*r,this.y=c*r,this.z=m*r,this},normalize:function(){var t=this.length();return 0===t?this.set(0,0,0,1):(t=1/t,this.x=this.x*t,this.y=this.y*t,this.z=this.z*t,this.w=this.w*t),this},inverse:function(){return this.conjugate().normalize()},invert:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this.conjugate().normalize(),this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},length:function(){return g.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},clone:function(t){return new S(this.x,this.y,this.z,this.w)},testDiff:function(t){return!this.equals(t)},equals:function(t){return this.x===t.x&amp;&amp;this.y===t.y&amp;&amp;this.z===t.z&amp;&amp;this.w===t.w},toString:function(){return&quot;Quat[&quot;+this.x.toFixed(4)+&quot;, (&quot;+this.y.toFixed(4)+&quot;, &quot;+this.z.toFixed(4)+&quot;, &quot;+this.w.toFixed(4)+&quot;)]&quot;},setFromEuler:function(t,i,s){var h=Math.cos(.5*t),e=Math.cos(.5*i),a=Math.cos(.5*s),o=Math.sin(.5*t),n=Math.sin(.5*i),r=Math.sin(.5*s);return this.x=o*e*a+h*n*r,this.y=h*n*a-o*e*r,this.z=h*e*r+o*n*a,this.w=h*e*a-o*n*r,this},setFromAxis:function(t,i){t.normalize(),i*=.5;var s=g.sin(i);return this.x=s*t.x,this.y=s*t.y,this.z=s*t.z,this.w=g.cos(i),this},setFromMat33:function(t){var i,s=t[0]+t[4]+t[8];if(s&gt;0)i=g.sqrt(s+1),this.w=.5/i,i=.5/i,this.x=(t[5]-t[7])*i,this.y=(t[6]-t[2])*i,this.z=(t[1]-t[3])*i;else{var h=[],e=0;t[4]&gt;t[0]&amp;&amp;(e=1),t[8]&gt;t[3*e+e]&amp;&amp;(e=2);var a=(e+1)%3,o=(e+2)%3;i=g.sqrt(t[3*e+e]-t[3*a+a]-t[3*o+o]+1),h[e]=.5*fRoot,i=.5/fRoot,this.w=(t[3*a+o]-t[3*o+a])*i,h[a]=(t[3*a+e]+t[3*e+a])*i,h[o]=(t[3*o+e]+t[3*e+o])*i,this.x=h[1],this.y=h[2],this.z=h[3]}return this},toArray:function(t,i){t[i=i||0]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w},fromArray:function(t,i){return i=i||0,this.set(t[i],t[i+1],t[i+2],t[i+3]),this}}),Object.assign(P.prototype,{Mat33:!0,set:function(t,i,s,h,e,a,o,n,r){var l=this.elements;return l[0]=t,l[1]=i,l[2]=s,l[3]=h,l[4]=e,l[5]=a,l[6]=o,l[7]=n,l[8]=r,this},add:function(t,i){if(void 0!==i)return this.addMatrixs(t,i);var s=this.elements,h=t.elements;return s[0]+=h[0],s[1]+=h[1],s[2]+=h[2],s[3]+=h[3],s[4]+=h[4],s[5]+=h[5],s[6]+=h[6],s[7]+=h[7],s[8]+=h[8],this},addMatrixs:function(t,i){var s=this.elements,h=t.elements,e=i.elements;return s[0]=h[0]+e[0],s[1]=h[1]+e[1],s[2]=h[2]+e[2],s[3]=h[3]+e[3],s[4]=h[4]+e[4],s[5]=h[5]+e[5],s[6]=h[6]+e[6],s[7]=h[7]+e[7],s[8]=h[8]+e[8],this},addEqual:function(t){var i=this.elements,s=t.elements;return i[0]+=s[0],i[1]+=s[1],i[2]+=s[2],i[3]+=s[3],i[4]+=s[4],i[5]+=s[5],i[6]+=s[6],i[7]+=s[7],i[8]+=s[8],this},sub:function(t,i){if(void 0!==i)return this.subMatrixs(t,i);var s=this.elements,h=t.elements;return s[0]-=h[0],s[1]-=h[1],s[2]-=h[2],s[3]-=h[3],s[4]-=h[4],s[5]-=h[5],s[6]-=h[6],s[7]-=h[7],s[8]-=h[8],this},subMatrixs:function(t,i){var s=this.elements,h=t.elements,e=i.elements;return s[0]=h[0]-e[0],s[1]=h[1]-e[1],s[2]=h[2]-e[2],s[3]=h[3]-e[3],s[4]=h[4]-e[4],s[5]=h[5]-e[5],s[6]=h[6]-e[6],s[7]=h[7]-e[7],s[8]=h[8]-e[8],this},subEqual:function(t){var i=this.elements,s=t.elements;return i[0]-=s[0],i[1]-=s[1],i[2]-=s[2],i[3]-=s[3],i[4]-=s[4],i[5]-=s[5],i[6]-=s[6],i[7]-=s[7],i[8]-=s[8],this},scale:function(t,i){var s=this.elements,h=t.elements;return s[0]=h[0]*i,s[1]=h[1]*i,s[2]=h[2]*i,s[3]=h[3]*i,s[4]=h[4]*i,s[5]=h[5]*i,s[6]=h[6]*i,s[7]=h[7]*i,s[8]=h[8]*i,this},scaleEqual:function(t){var i=this.elements;return i[0]*=t,i[1]*=t,i[2]*=t,i[3]*=t,i[4]*=t,i[5]*=t,i[6]*=t,i[7]*=t,i[8]*=t,this},multiplyMatrices:function(t,i,s){s&amp;&amp;(i=i.clone().transpose());var h=this.elements,e=t.elements,a=i.elements,o=e[0],n=e[3],r=e[6],l=e[1],c=e[4],m=e[7],p=e[2],u=e[5],y=e[8],x=a[0],d=a[3],f=a[6],b=a[1],v=a[4],z=a[7],N=a[2],k=a[5],w=a[8];return h[0]=o*x+l*d+p*f,h[1]=o*b+l*v+p*z,h[2]=o*N+l*k+p*w,h[3]=n*x+c*d+u*f,h[4]=n*b+c*v+u*z,h[5]=n*N+c*k+u*w,h[6]=r*x+m*d+y*f,h[7]=r*b+m*v+y*z,h[8]=r*N+m*k+y*w,this},transpose:function(t){if(void 0!==t){var i=t.elements;return this.set(i[0],i[3],i[6],i[1],i[4],i[7],i[2],i[5],i[8]),this}var s=this.elements,h=s[1],e=s[2],a=s[5];return s[1]=s[3],s[2]=s[6],s[3]=h,s[5]=s[7],s[6]=e,s[7]=a,this},setQuat:function(t){var i=this.elements,s=t.x,h=t.y,e=t.z,a=t.w,o=s+s,n=h+h,r=e+e,l=s*o,c=s*n,m=s*r,p=h*n,u=h*r,y=e*r,x=a*o,d=a*n,f=a*r;return i[0]=1-(p+y),i[1]=c-f,i[2]=m+d,i[3]=c+f,i[4]=1-(l+y),i[5]=u-x,i[6]=m-d,i[7]=u+x,i[8]=1-(l+p),this},invert:function(t){var i=this.elements,s=t.elements,h=s[0],e=s[3],a=s[6],o=s[1],n=s[4],r=s[7],l=s[2],c=s[5],m=s[8],p=m*n-c*r,u=-m*e+c*a,y=r*e-n*a,x=h*p+o*u+l*y;return 0===x?(console.log(&quot;can&#39;t invert matrix, determinant is 0&quot;),this.identity()):(x=1/x,i[0]=p*x,i[1]=(-m*o+l*r)*x,i[2]=(c*o-l*n)*x,i[3]=u*x,i[4]=(m*h-l*a)*x,i[5]=(-c*h+l*e)*x,i[6]=y*x,i[7]=(-r*h+o*a)*x,i[8]=(n*h-o*e)*x,this)},addOffset:function(t,i){var s=i.x,h=i.y,e=i.z,a=this.elements;a[0]+=t*(h*h+e*e),a[4]+=t*(s*s+e*e),a[8]+=t*(s*s+h*h);var o=t*s*h,n=t*h*e,r=t*e*s;return a[1]-=o,a[3]-=o,a[2]-=n,a[6]-=n,a[5]-=r,a[7]-=r,this},subOffset:function(t,i){var s=i.x,h=i.y,e=i.z,a=this.elements;a[0]-=t*(h*h+e*e),a[4]-=t*(s*s+e*e),a[8]-=t*(s*s+h*h);var o=t*s*h,n=t*h*e,r=t*e*s;return a[1]+=o,a[3]+=o,a[2]+=n,a[6]+=n,a[5]+=r,a[7]+=r,this},multiplyScalar:function(t){var i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new P).fromArray(this.elements)},copy:function(t){for(var i=0;i&lt;9;i++)this.elements[i]=t.elements[i];return this},determinant:function(){var t=this.elements,i=t[0],s=t[1],h=t[2],e=t[3],a=t[4],o=t[5],n=t[6],r=t[7],l=t[8];return i*a*l-i*o*r-s*e*l+s*o*n+h*e*r-h*a*n},fromArray:function(t,i){void 0===i&amp;&amp;(i=0);for(var s=0;s&lt;9;s++)this.elements[s]=t[s+i];return this},toArray:function(t,i){void 0===t&amp;&amp;(t=[]),void 0===i&amp;&amp;(i=0);var s=this.elements;return t[i]=s[0],t[i+1]=s[1],t[i+2]=s[2],t[i+3]=s[3],t[i+4]=s[4],t[i+5]=s[5],t[i+6]=s[6],t[i+7]=s[7],t[i+8]=s[8],t}}),Object.assign(T.prototype,{AABB:!0,set:function(t,i,s,h,e,a){var o=this.elements;return o[0]=t,o[3]=i,o[1]=s,o[4]=h,o[2]=e,o[5]=a,this},intersectTest:function(t){var i=this.elements,s=t.elements;return i[0]&gt;s[3]||i[1]&gt;s[4]||i[2]&gt;s[5]||i[3]&lt;s[0]||i[4]&lt;s[1]||i[5]&lt;s[2]},intersectTestTwo:function(t){var i=this.elements,s=t.elements;return i[0]&lt;s[0]||i[1]&lt;s[1]||i[2]&lt;s[2]||i[3]&gt;s[3]||i[4]&gt;s[4]||i[5]&gt;s[5]},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t,i){var s=i||0,h=t.elements;return this.set(h[0]-s,h[3]+s,h[1]-s,h[4]+s,h[2]-s,h[5]+s),this},fromArray:function(t){return this.elements.set(t),this},combine:function(t,i){var s=t.elements,h=i.elements,e=this.elements;return e[0]=s[0]&lt;h[0]?s[0]:h[0],e[1]=s[1]&lt;h[1]?s[1]:h[1],e[2]=s[2]&lt;h[2]?s[2]:h[2],e[3]=s[3]&gt;h[3]?s[3]:h[3],e[4]=s[4]&gt;h[4]?s[4]:h[4],e[5]=s[5]&gt;h[5]?s[5]:h[5],this},surfaceArea:function(){var t=this.elements,i=t[3]-t[0],s=t[4]-t[1],h=t[5]-t[2];return 2*(i*(s+h)+s*h)},intersectsWithPoint:function(t,i,s){var h=this.elements;return t&gt;=h[0]&amp;&amp;t&lt;=h[3]&amp;&amp;i&gt;=h[1]&amp;&amp;i&lt;=h[4]&amp;&amp;s&gt;=h[2]&amp;&amp;s&lt;=h[5]},setFromPoints:function(t){this.makeEmpty();for(var i=0;i&lt;t.length;i++)this.expandByPoint(t[i])},makeEmpty:function(){this.set(-1/0,-1/0,-1/0,1/0,1/0,1/0)},expandByPoint:function(t){var i=this.elements;this.set(g.min(i[0],t.x),g.min(i[1],t.y),g.min(i[2],t.z),g.max(i[3],t.x),g.max(i[4],t.y),g.max(i[5],t.z))},expandByScalar:function(t){var i=this.elements;i[0]+=-t,i[1]+=-t,i[2]+=-t,i[3]+=t,i[4]+=t,i[5]+=t}});var A=0;function j(t){this.type=p,this.id=A++,this.prev=null,this.next=null,this.proxy=null,this.parent=null,this.contactLink=null,this.numContacts=0,this.position=new L,this.rotation=new P,this.relativePosition=(new L).copy(t.relativePosition),this.relativeRotation=(new P).copy(t.relativeRotation),this.aabb=new T,this.density=t.density,this.friction=t.friction,this.restitution=t.restitution,this.belongsTo=t.belongsTo,this.collidesWith=t.collidesWith}function C(t,i,s,h){j.call(this,t),this.type=y,this.width=i,this.height=s,this.depth=h,this.halfWidth=.5*i,this.halfHeight=.5*s,this.halfDepth=.5*h,this.dimentions=new Float32Array(18),this.elements=new Float32Array(24)}function O(t,i){j.call(this,t),this.type=u,this.radius=i}function D(t,i,s){j.call(this,t),this.type=x,this.radius=i,this.height=s,this.halfHeight=.5*s,this.normalDirection=new L,this.halfDirection=new L}function E(t,i){j.call(this,t),this.type=d,this.normal=new L(0,1,0)}function B(t,i){j.call(this,t),this.type=f}function F(){this.relativePosition=new L,this.relativeRotation=new P,this.friction=.2,this.restitution=.2,this.density=1,this.belongsTo=1,this.collidesWith=4294967295}function q(t,i){i=i||!1,this.axis=t,this.angle=0,this.lowerLimit=i?0:1,this.upperLimit=0,this.motorSpeed=0,this.maxMotorForce=0,this.frequency=0,this.dampingRatio=0}function U(){this.parent=null,this.body1=null,this.body2=null,this.addedToIsland=!1}function R(t){this.prev=null,this.next=null,this.body=null,this.joint=t}function _(t){U.call(this),this.scale=1,this.invScale=1,this.name=&quot;&quot;,this.id=NaN,this.type=b,this.prev=null,this.next=null,this.body1=t.body1,this.body2=t.body2,this.localAnchorPoint1=(new L).copy(t.localAnchorPoint1),this.localAnchorPoint2=(new L).copy(t.localAnchorPoint2),this.relativeAnchorPoint1=new L,this.relativeAnchorPoint2=new L,this.anchorPoint1=new L,this.anchorPoint2=new L,this.allowCollision=t.allowCollision,this.b1Link=new R(this),this.b2Link=new R(this)}function J(t){this.m1=NaN,this.m2=NaN,this.ii1=null,this.ii2=null,this.dd=null,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.ax1x=NaN,this.ax1y=NaN,this.ax1z=NaN,this.ay1x=NaN,this.ay1y=NaN,this.ay1z=NaN,this.az1x=NaN,this.az1y=NaN,this.az1z=NaN,this.ax2x=NaN,this.ax2y=NaN,this.ax2z=NaN,this.ay2x=NaN,this.ay2y=NaN,this.ay2z=NaN,this.az2x=NaN,this.az2y=NaN,this.az2z=NaN,this.vel=NaN,this.velx=NaN,this.vely=NaN,this.velz=NaN,this.joint=t,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.b1=t.body1,this.b2=t.body2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.impx=0,this.impy=0,this.impz=0}function W(t,i,s,h){this.cfm1=NaN,this.cfm2=NaN,this.cfm3=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=i,this.limitMotor2=s,this.limitMotor3=h,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0}function H(t,i,s){_.call(this,t),this.type=N,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize();var h=(new P).setQuat((new S).setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1=(new L).tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(h,!0),this.ax1=new L,this.ax2=new L,this.an1=new L,this.an2=new L,this.tmp=new L,this.nor=new L,this.tan=new L,this.bin=new L,this.limitMotor=new q(this.nor,!1),this.limitMotor.lowerLimit=i,this.limitMotor.upperLimit=s,this.lc=new J(this),this.r3=new W(this,this.limitMotor,new q(this.tan,!0),new q(this.bin,!0))}function Q(t){_.call(this,t),this.type=z,this.lc=new J(this)}function X(t,i){this.cfm=NaN,this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.motorDenom=NaN,this.invMotorDenom=NaN,this.invDenom=NaN,this.ax=NaN,this.ay=NaN,this.az=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x=NaN,this.t1y=NaN,this.t1z=NaN,this.t2x=NaN,this.t2y=NaN,this.t2z=NaN,this.l1x=NaN,this.l1y=NaN,this.l1z=NaN,this.l2x=NaN,this.l2y=NaN,this.l2z=NaN,this.a1x=NaN,this.a1y=NaN,this.a1z=NaN,this.a2x=NaN,this.a2y=NaN,this.a2z=NaN,this.lowerLimit=NaN,this.upperLimit=NaN,this.limitVelocity=NaN,this.limitState=0,this.enableMotor=!1,this.motorSpeed=NaN,this.maxMotorForce=NaN,this.maxMotorImpulse=NaN,this.limitMotor=i,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse=0,this.motorImpulse=0}function Y(t,i,s){_.call(this,t),this.type=v,this.nor=new L,this.limitMotor=new q(this.nor,!0),this.limitMotor.lowerLimit=i,this.limitMotor.upperLimit=s,this.t=new X(this,this.limitMotor)}function Z(t,i){this.joint=t,this.targetOrientation=(new S).invert(i),this.relativeOrientation=new S,this.ii1=null,this.ii2=null,this.dd=null,this.vel=new L,this.imp=new L,this.rn0=new L,this.rn1=new L,this.rn2=new L,this.b1=t.body1,this.b2=t.body2,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia}function K(t,i,s,h){this.m1=NaN,this.m2=NaN,this.i1e00=NaN,this.i1e01=NaN,this.i1e02=NaN,this.i1e10=NaN,this.i1e11=NaN,this.i1e12=NaN,this.i1e20=NaN,this.i1e21=NaN,this.i1e22=NaN,this.i2e00=NaN,this.i2e01=NaN,this.i2e02=NaN,this.i2e10=NaN,this.i2e11=NaN,this.i2e12=NaN,this.i2e20=NaN,this.i2e21=NaN,this.i2e22=NaN,this.ax1=NaN,this.ay1=NaN,this.az1=NaN,this.ax2=NaN,this.ay2=NaN,this.az2=NaN,this.ax3=NaN,this.ay3=NaN,this.az3=NaN,this.r1x=NaN,this.r1y=NaN,this.r1z=NaN,this.r2x=NaN,this.r2y=NaN,this.r2z=NaN,this.t1x1=NaN,this.t1y1=NaN,this.t1z1=NaN,this.t2x1=NaN,this.t2y1=NaN,this.t2z1=NaN,this.l1x1=NaN,this.l1y1=NaN,this.l1z1=NaN,this.l2x1=NaN,this.l2y1=NaN,this.l2z1=NaN,this.a1x1=NaN,this.a1y1=NaN,this.a1z1=NaN,this.a2x1=NaN,this.a2y1=NaN,this.a2z1=NaN,this.t1x2=NaN,this.t1y2=NaN,this.t1z2=NaN,this.t2x2=NaN,this.t2y2=NaN,this.t2z2=NaN,this.l1x2=NaN,this.l1y2=NaN,this.l1z2=NaN,this.l2x2=NaN,this.l2y2=NaN,this.l2z2=NaN,this.a1x2=NaN,this.a1y2=NaN,this.a1z2=NaN,this.a2x2=NaN,this.a2y2=NaN,this.a2z2=NaN,this.t1x3=NaN,this.t1y3=NaN,this.t1z3=NaN,this.t2x3=NaN,this.t2y3=NaN,this.t2z3=NaN,this.l1x3=NaN,this.l1y3=NaN,this.l1z3=NaN,this.l2x3=NaN,this.l2y3=NaN,this.l2z3=NaN,this.a1x3=NaN,this.a1y3=NaN,this.a1z3=NaN,this.a2x3=NaN,this.a2y3=NaN,this.a2z3=NaN,this.lowerLimit1=NaN,this.upperLimit1=NaN,this.limitVelocity1=NaN,this.limitState1=0,this.enableMotor1=!1,this.motorSpeed1=NaN,this.maxMotorForce1=NaN,this.maxMotorImpulse1=NaN,this.lowerLimit2=NaN,this.upperLimit2=NaN,this.limitVelocity2=NaN,this.limitState2=0,this.enableMotor2=!1,this.motorSpeed2=NaN,this.maxMotorForce2=NaN,this.maxMotorImpulse2=NaN,this.lowerLimit3=NaN,this.upperLimit3=NaN,this.limitVelocity3=NaN,this.limitState3=0,this.enableMotor3=!1,this.motorSpeed3=NaN,this.maxMotorForce3=NaN,this.maxMotorImpulse3=NaN,this.k00=NaN,this.k01=NaN,this.k02=NaN,this.k10=NaN,this.k11=NaN,this.k12=NaN,this.k20=NaN,this.k21=NaN,this.k22=NaN,this.kv00=NaN,this.kv11=NaN,this.kv22=NaN,this.dv00=NaN,this.dv11=NaN,this.dv22=NaN,this.d00=NaN,this.d01=NaN,this.d02=NaN,this.d10=NaN,this.d11=NaN,this.d12=NaN,this.d20=NaN,this.d21=NaN,this.d22=NaN,this.limitMotor1=i,this.limitMotor2=s,this.limitMotor3=h,this.b1=t.body1,this.b2=t.body2,this.p1=t.anchorPoint1,this.p2=t.anchorPoint2,this.r1=t.relativeAnchorPoint1,this.r2=t.relativeAnchorPoint2,this.l1=this.b1.linearVelocity,this.l2=this.b2.linearVelocity,this.a1=this.b1.angularVelocity,this.a2=this.b2.angularVelocity,this.i1=this.b1.inverseInertia,this.i2=this.b2.inverseInertia,this.limitImpulse1=0,this.motorImpulse1=0,this.limitImpulse2=0,this.motorImpulse2=0,this.limitImpulse3=0,this.motorImpulse3=0,this.cfm1=0,this.cfm2=0,this.cfm3=0,this.weight=-1}function G(t,i,s){_.call(this,t),this.type=M,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize(),this.ax1=new L,this.ax2=new L,this.nor=new L,this.tan=new L,this.bin=new L,this.ac=new Z(this,(new S).setFromUnitVectors(this.localAxis1,this.localAxis2)),this.limitMotor=new q(this.nor,!0),this.limitMotor.lowerLimit=i,this.limitMotor.upperLimit=s,this.t3=new K(this,this.limitMotor,new q(this.tan,!0),new q(this.bin,!0))}function $(t,i,s){_.call(this,t),this.type=w,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize();var h=(new P).setQuat((new S).setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1=(new L).tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(h,!0),this.ax1=new L,this.ax2=new L,this.an1=new L,this.an2=new L,this.tmp=new L,this.nor=new L,this.tan=new L,this.bin=new L,this.rotationalLimitMotor=new q(this.nor,!1),this.r3=new W(this,this.rotationalLimitMotor,new q(this.tan,!0),new q(this.bin,!0)),this.translationalLimitMotor=new q(this.nor,!0),this.translationalLimitMotor.lowerLimit=i,this.translationalLimitMotor.upperLimit=s,this.t3=new K(this,this.translationalLimitMotor,new q(this.tan,!0),new q(this.bin,!0))}function tt(t){_.call(this,t),this.type=k,this.localAxis1=t.localAxis1.clone().normalize(),this.localAxis2=t.localAxis2.clone().normalize(),this.localAngle1=new L,this.localAngle2=new L;var i=g.dotVectors(this.localAxis1,this.localAxis2);if(i&gt;-1&amp;&amp;i&lt;1)this.localAngle1.set(this.localAxis2.x-i*this.localAxis1.x,this.localAxis2.y-i*this.localAxis1.y,this.localAxis2.z-i*this.localAxis1.z).normalize(),this.localAngle2.set(this.localAxis1.x-i*this.localAxis2.x,this.localAxis1.y-i*this.localAxis2.y,this.localAxis1.z-i*this.localAxis2.z).normalize();else{var s=(new P).setQuat((new S).setFromUnitVectors(this.localAxis1,this.localAxis2));this.localAngle1.tangent(this.localAxis1).normalize(),this.localAngle2=this.localAngle1.clone().applyMatrix3(s,!0)}this.ax1=new L,this.ax2=new L,this.an1=new L,this.an2=new L,this.tmp=new L,this.nor=new L,this.tan=new L,this.bin=new L,this.translationalLimitMotor=new q(this.tan,!0),this.translationalLimitMotor.frequency=8,this.translationalLimitMotor.dampingRatio=1,this.rotationalLimitMotor1=new q(this.tan,!1),this.rotationalLimitMotor2=new q(this.bin,!1),this.t3=new K(this,new q(this.nor,!0),this.translationalLimitMotor,new q(this.bin,!0)),this.t3.weight=1,this.r3=new W(this,new q(this.nor,!0),this.rotationalLimitMotor1,this.rotationalLimitMotor2)}function it(){this.scale=1,this.invScale=1,this.body1=null,this.body2=null,this.localAnchorPoint1=new L,this.localAnchorPoint2=new L,this.localAxis1=new L,this.localAxis2=new L,this.allowCollision=!1}function st(){this.mass=0,this.inertia=new P}function ht(t){this.prev=null,this.next=null,this.shape=null,this.body=null,this.contact=t}function et(){this.lp1X=NaN,this.lp1Y=NaN,this.lp1Z=NaN,this.lp2X=NaN,this.lp2Y=NaN,this.lp2Z=NaN,this.impulse=NaN}function at(){this.warmStarted=!1,this.position=new L,this.localPoint1=new L,this.localPoint2=new L,this.normal=new L,this.tangent=new L,this.binormal=new L,this.normalImpulse=0,this.tangentImpulse=0,this.binormalImpulse=0,this.normalDenominator=0,this.tangentDenominator=0,this.binormalDenominator=0,this.penetration=0}function ot(){this.body1=null,this.body2=null,this.numPoints=0,this.points=[new at,new at,new at,new at]}function nt(){this.nor=new L,this.tan=new L,this.bin=new L,this.norU1=new L,this.tanU1=new L,this.binU1=new L,this.norU2=new L,this.tanU2=new L,this.binU2=new L,this.norT1=new L,this.tanT1=new L,this.binT1=new L,this.norT2=new L,this.tanT2=new L,this.binT2=new L,this.norTU1=new L,this.tanTU1=new L,this.binTU1=new L,this.norTU2=new L,this.tanTU2=new L,this.binTU2=new L,this.norImp=0,this.tanImp=0,this.binImp=0,this.norDen=0,this.tanDen=0,this.binDen=0,this.norTar=0,this.next=null,this.last=!1}function rt(t){U.call(this),this.manifold=t,this.restitution=NaN,this.friction=NaN,this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null,this.tmp=new L,this.tmpC1=new L,this.tmpC2=new L,this.tmpP1=new L,this.tmpP2=new L,this.tmplv1=new L,this.tmplv2=new L,this.tmpav1=new L,this.tmpav2=new L,this.m1=NaN,this.m2=NaN,this.num=0,this.ps=t.points,this.cs=new nt,this.cs.next=new nt,this.cs.next.next=new nt,this.cs.next.next.next=new nt}function lt(){this.shape1=null,this.shape2=null,this.body1=null,this.body2=null,this.prev=null,this.next=null,this.persisting=!1,this.sleeping=!1,this.detector=null,this.constraint=null,this.touching=!1,this.close=!1,this.dist=g.INF,this.b1Link=new ht(this),this.b2Link=new ht(this),this.s1Link=new ht(this),this.s2Link=new ht(this),this.manifold=new ot,this.buffer=[new et,new et,new et,new et],this.points=this.manifold.points,this.constraint=new rt(this.manifold)}function ct(t,i){this.position=t||new L,this.orientation=i||new S,this.scale=1,this.invScale=1,this.mesh=null,this.id=NaN,this.name=&quot;&quot;,this.prev=null,this.next=null,this.type=m,this.massInfo=new st,this.newPosition=new L,this.controlPos=!1,this.newOrientation=new S,this.newRotation=new L,this.currentRotation=new L,this.controlRot=!1,this.controlRotInTime=!1,this.quaternion=new S,this.pos=new L,this.linearVelocity=new L,this.angularVelocity=new L,this.parent=null,this.contactLink=null,this.numContacts=0,this.shapes=null,this.numShapes=0,this.jointLink=null,this.numJoints=0,this.sleepPosition=new L,this.sleepOrientation=new S,this.isStatic=!1,this.isDynamic=!1,this.isKinematic=!1,this.rotation=new P,this.mass=0,this.inverseMass=0,this.inverseInertia=new P,this.localInertia=new P,this.inverseLocalInertia=new P,this.tmpInertia=new P,this.addedToIsland=!1,this.allowSleep=!0,this.sleepTime=0,this.sleeping=!1}function mt(t,i){this.shape1=t||null,this.shape2=i||null}function pt(){this.types=n,this.numPairChecks=0,this.numPairs=0,this.pairs=[]}Object.assign(j.prototype,{Shape:!0,calculateMassInfo:function(t){I(&quot;Shape&quot;,&quot;Inheritance error.&quot;)},updateProxy:function(){I(&quot;Shape&quot;,&quot;Inheritance error.&quot;)}}),C.prototype=Object.assign(Object.create(j.prototype),{constructor:C,calculateMassInfo:function(t){var i=this.width*this.height*this.depth*this.density;t.mass=i,t.inertia.set(i*(this.height*this.height+this.depth*this.depth)*(1/12),0,0,0,i*(this.width*this.width+this.depth*this.depth)*(1/12),0,0,0,i*(this.width*this.width+this.height*this.height)*(1/12))},updateProxy:function(){var t=this.rotation.elements,i=this.dimentions;i[0]=t[0],i[1]=t[3],i[2]=t[6],i[3]=t[1],i[4]=t[4],i[5]=t[7],i[6]=t[2],i[7]=t[5],i[8]=t[8],i[9]=t[0]*this.halfWidth,i[10]=t[3]*this.halfWidth,i[11]=t[6]*this.halfWidth,i[12]=t[1]*this.halfHeight,i[13]=t[4]*this.halfHeight,i[14]=t[7]*this.halfHeight,i[15]=t[2]*this.halfDepth,i[16]=t[5]*this.halfDepth,i[17]=t[8]*this.halfDepth;var s=i[9],h=i[10],e=i[11],a=i[12],o=i[13],n=i[14],r=i[15],l=i[16],c=i[17],m=this.position.x,p=this.position.y,u=this.position.z,y=this.elements;y[0]=m+s+a+r,y[1]=p+h+o+l,y[2]=u+e+n+c,y[3]=m+s+a-r,y[4]=p+h+o-l,y[5]=u+e+n-c,y[6]=m+s-a+r,y[7]=p+h-o+l,y[8]=u+e-n+c,y[9]=m+s-a-r,y[10]=p+h-o-l,y[11]=u+e-n-c,y[12]=m-s+a+r,y[13]=p-h+o+l,y[14]=u-e+n+c,y[15]=m-s+a-r,y[16]=p-h+o-l,y[17]=u-e+n-c,y[18]=m-s-a+r,y[19]=p-h-o+l,y[20]=u-e-n+c,y[21]=m-s-a-r,y[22]=p-h-o-l,y[23]=u-e-n-c;var x=i[9]&lt;0?-i[9]:i[9],d=i[10]&lt;0?-i[10]:i[10],f=i[11]&lt;0?-i[11]:i[11];x=i[12]&lt;0?x-i[12]:x+i[12],d=i[13]&lt;0?d-i[13]:d+i[13],f=i[14]&lt;0?f-i[14]:f+i[14],x=i[15]&lt;0?x-i[15]:x+i[15],d=i[16]&lt;0?d-i[16]:d+i[16],f=i[17]&lt;0?f-i[17]:f+i[17];var b=.005;this.aabb.set(this.position.x-x-b,this.position.x+x+b,this.position.y-d-b,this.position.y+d+b,this.position.z-f-b,this.position.z+f+b),null!=this.proxy&amp;&amp;this.proxy.update()}}),O.prototype=Object.assign(Object.create(j.prototype),{constructor:O,volume:function(){return g.PI*this.radius*1.333333},calculateMassInfo:function(t){var i=this.volume()*this.radius*this.radius*this.density;t.mass=i;var s=i*this.radius*this.radius*.4;t.inertia.set(s,0,0,0,s,0,0,0,s)},updateProxy:function(){var t=.005;this.aabb.set(this.position.x-this.radius-t,this.position.x+this.radius+t,this.position.y-this.radius-t,this.position.y+this.radius+t,this.position.z-this.radius-t,this.position.z+this.radius+t),null!=this.proxy&amp;&amp;this.proxy.update()}}),D.prototype=Object.assign(Object.create(j.prototype),{constructor:D,calculateMassInfo:function(t){var i=this.radius*this.radius,s=g.PI*i*this.height*this.density,h=(.25*i+.0833*this.height*this.height)*s,e=.5*i;t.mass=s,t.inertia.set(h,0,0,0,e,0,0,0,h)},updateProxy:function(){var t,i,s,h,e,a,o,n,r,l,c,m=this.rotation.elements;e=m[1]*m[1],a=m[4]*m[4],o=m[7]*m[7],this.normalDirection.set(m[1],m[4],m[7]),this.halfDirection.scale(this.normalDirection,this.halfHeight),i=1-e,(t=g.sqrt(i*i+e*a+e*o))&gt;0&amp;&amp;(t=this.radius/t),i*=t,s=1-a,(t=g.sqrt(a*e+s*s+a*o))&gt;0&amp;&amp;(t=this.radius/t),s*=t,h=1-o,(t=g.sqrt(o*e+o*a+h*h))&gt;0&amp;&amp;(t=this.radius/t),h*=t,n=this.halfDirection.x&lt;0?-this.halfDirection.x:this.halfDirection.x,r=this.halfDirection.y&lt;0?-this.halfDirection.y:this.halfDirection.y,l=this.halfDirection.z&lt;0?-this.halfDirection.z:this.halfDirection.z,n=i&lt;0?n-i:n+i,r=s&lt;0?r-s:r+s,l=h&lt;0?l-h:l+h,c=.005,this.aabb.set(this.position.x-n-c,this.position.x+n+c,this.position.y-r-c,this.position.y+r+c,this.position.z-l-c,this.position.z+l+c),null!=this.proxy&amp;&amp;this.proxy.update()}}),E.prototype=Object.assign(Object.create(j.prototype),{constructor:E,volume:function(){return Number.MAX_VALUE},calculateMassInfo:function(t){t.mass=this.density;t.inertia.set(1,0,0,0,1,0,0,0,1)},updateProxy:function(){var t=.005,i=-g.INF,s=g.INF,h=this.normal;this.aabb.set(-1===h.x?this.position.x-t:i,1===h.x?this.position.x+t:s,-1===h.y?this.position.y-t:i,1===h.y?this.position.y+t:s,-1===h.z?this.position.z-t:i,1===h.z?this.position.z+t:s),null!=this.proxy&amp;&amp;this.proxy.update()}}),B.prototype=Object.assign(Object.create(j.prototype),{constructor:B,volume:function(){return Number.MAX_VALUE},calculateMassInfo:function(t){t.inertia.set(0,0,0,0,0,0,0,0,0)},updateProxy:function(){this.aabb.set(this.position.x-0,this.position.x+0,this.position.y-0,this.position.y+0,this.position.z-0,this.position.z+0),null!=this.proxy&amp;&amp;this.proxy.update()}}),Object.assign(q.prototype,{LimitMotor:!0,setLimit:function(t,i){this.lowerLimit=t,this.upperLimit=i},setMotor:function(t,i){this.motorSpeed=t,this.maxMotorForce=i},setSpring:function(t,i){this.frequency=t,this.dampingRatio=i}}),Object.assign(U.prototype,{Constraint:!0,preSolve:function(t,i){I(&quot;Constraint&quot;,&quot;Inheritance error.&quot;)},solve:function(){I(&quot;Constraint&quot;,&quot;Inheritance error.&quot;)},postSolve:function(){I(&quot;Constraint&quot;,&quot;Inheritance error.&quot;)}}),_.prototype=Object.assign(Object.create(U.prototype),{constructor:_,setId:function(t){this.id=i},setParent:function(t){this.parent=t,this.scale=this.parent.scale,this.invScale=this.parent.invScale,this.id=this.parent.numJoints,this.name||(this.name=&quot;J&quot;+this.id)},updateAnchorPoints:function(){this.relativeAnchorPoint1.copy(this.localAnchorPoint1).applyMatrix3(this.body1.rotation,!0),this.relativeAnchorPoint2.copy(this.localAnchorPoint2).applyMatrix3(this.body2.rotation,!0),this.anchorPoint1.add(this.relativeAnchorPoint1,this.body1.position),this.anchorPoint2.add(this.relativeAnchorPoint2,this.body2.position)},attach:function(t){this.b1Link.body=this.body2,this.b2Link.body=this.body1,t?(this.body1.jointLink.push(this.b1Link),this.body2.jointLink.push(this.b2Link)):(null!=this.body1.jointLink?(this.b1Link.next=this.body1.jointLink).prev=this.b1Link:this.b1Link.next=null,this.body1.jointLink=this.b1Link,this.body1.numJoints++,null!=this.body2.jointLink?(this.b2Link.next=this.body2.jointLink).prev=this.b2Link:this.b2Link.next=null,this.body2.jointLink=this.b2Link,this.body2.numJoints++)},detach:function(t){if(t)this.body1.jointLink.splice(this.body1.jointLink.indexOf(this.b1Link),1),this.body2.jointLink.splice(this.body2.jointLink.indexOf(this.b2Link),1);else{var i=this.b1Link.prev,s=this.b1Link.next;null!=i&amp;&amp;(i.next=s),null!=s&amp;&amp;(s.prev=i),this.body1.jointLink==this.b1Link&amp;&amp;(this.body1.jointLink=s),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.body=null,this.body1.numJoints--,i=this.b2Link.prev,s=this.b2Link.next,null!=i&amp;&amp;(i.next=s),null!=s&amp;&amp;(s.prev=i),this.body2.jointLink==this.b2Link&amp;&amp;(this.body2.jointLink=s),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.body=null,this.body2.numJoints--}this.b1Link.body=null,this.b2Link.body=null},awake:function(){this.body1.awake(),this.body2.awake()},preSolve:function(t,i){},solve:function(){},postSolve:function(){},remove:function(){this.dispose()},dispose:function(){this.parent.removeJoint(this)},getPosition:function(){return[(new L).scale(this.anchorPoint1,this.scale),(new L).scale(this.anchorPoint2,this.scale)]}}),Object.assign(J.prototype,{LinearConstraint:!0,preSolve:function(t,i){this.r1x=this.r1.x,this.r1y=this.r1.y,this.r1z=this.r1.z,this.r2x=this.r2.x,this.r2y=this.r2.y,this.r2z=this.r2.z,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass,this.ii1=this.i1.clone(),this.ii2=this.i2.clone();var s=this.ii1.elements,h=this.ii2.elements;this.ax1x=this.r1z*s[1]+-this.r1y*s[2],this.ax1y=this.r1z*s[4]+-this.r1y*s[5],this.ax1z=this.r1z*s[7]+-this.r1y*s[8],this.ay1x=-this.r1z*s[0]+this.r1x*s[2],this.ay1y=-this.r1z*s[3]+this.r1x*s[5],this.ay1z=-this.r1z*s[6]+this.r1x*s[8],this.az1x=this.r1y*s[0]+-this.r1x*s[1],this.az1y=this.r1y*s[3]+-this.r1x*s[4],this.az1z=this.r1y*s[6]+-this.r1x*s[7],this.ax2x=this.r2z*h[1]+-this.r2y*h[2],this.ax2y=this.r2z*h[4]+-this.r2y*h[5],this.ax2z=this.r2z*h[7]+-this.r2y*h[8],this.ay2x=-this.r2z*h[0]+this.r2x*h[2],this.ay2y=-this.r2z*h[3]+this.r2x*h[5],this.ay2z=-this.r2z*h[6]+this.r2x*h[8],this.az2x=this.r2y*h[0]+-this.r2x*h[1],this.az2y=this.r2y*h[3]+-this.r2x*h[4],this.az2z=this.r2y*h[6]+-this.r2x*h[7];var e=this.m1+this.m2,a=(new P).set(e,0,0,0,e,0,0,0,e).elements;a[0]+=s[4]*this.r1z*this.r1z-(s[7]+s[5])*this.r1y*this.r1z+s[8]*this.r1y*this.r1y,a[1]+=(s[6]*this.r1y+s[5]*this.r1x)*this.r1z-s[3]*this.r1z*this.r1z-s[8]*this.r1x*this.r1y,a[2]+=(s[3]*this.r1y-s[4]*this.r1x)*this.r1z-s[6]*this.r1y*this.r1y+s[7]*this.r1x*this.r1y,a[3]+=(s[2]*this.r1y+s[7]*this.r1x)*this.r1z-s[1]*this.r1z*this.r1z-s[8]*this.r1x*this.r1y,a[4]+=s[0]*this.r1z*this.r1z-(s[6]+s[2])*this.r1x*this.r1z+s[8]*this.r1x*this.r1x,a[5]+=(s[1]*this.r1x-s[0]*this.r1y)*this.r1z-s[7]*this.r1x*this.r1x+s[6]*this.r1x*this.r1y,a[6]+=(s[1]*this.r1y-s[4]*this.r1x)*this.r1z-s[2]*this.r1y*this.r1y+s[5]*this.r1x*this.r1y,a[7]+=(s[3]*this.r1x-s[0]*this.r1y)*this.r1z-s[5]*this.r1x*this.r1x+s[2]*this.r1x*this.r1y,a[8]+=s[0]*this.r1y*this.r1y-(s[3]+s[1])*this.r1x*this.r1y+s[4]*this.r1x*this.r1x,a[0]+=h[4]*this.r2z*this.r2z-(h[7]+h[5])*this.r2y*this.r2z+h[8]*this.r2y*this.r2y,a[1]+=(h[6]*this.r2y+h[5]*this.r2x)*this.r2z-h[3]*this.r2z*this.r2z-h[8]*this.r2x*this.r2y,a[2]+=(h[3]*this.r2y-h[4]*this.r2x)*this.r2z-h[6]*this.r2y*this.r2y+h[7]*this.r2x*this.r2y,a[3]+=(h[2]*this.r2y+h[7]*this.r2x)*this.r2z-h[1]*this.r2z*this.r2z-h[8]*this.r2x*this.r2y,a[4]+=h[0]*this.r2z*this.r2z-(h[6]+h[2])*this.r2x*this.r2z+h[8]*this.r2x*this.r2x,a[5]+=(h[1]*this.r2x-h[0]*this.r2y)*this.r2z-h[7]*this.r2x*this.r2x+h[6]*this.r2x*this.r2y,a[6]+=(h[1]*this.r2y-h[4]*this.r2x)*this.r2z-h[2]*this.r2y*this.r2y+h[5]*this.r2x*this.r2y,a[7]+=(h[3]*this.r2x-h[0]*this.r2y)*this.r2z-h[5]*this.r2x*this.r2x+h[2]*this.r2x*this.r2y,a[8]+=h[0]*this.r2y*this.r2y-(h[3]+h[1])*this.r2x*this.r2y+h[4]*this.r2x*this.r2x;var o=1/(a[0]*(a[4]*a[8]-a[7]*a[5])+a[3]*(a[7]*a[2]-a[1]*a[8])+a[6]*(a[1]*a[5]-a[4]*a[2]));this.dd=(new P).set(a[4]*a[8]-a[5]*a[7],a[2]*a[7]-a[1]*a[8],a[1]*a[5]-a[2]*a[4],a[5]*a[6]-a[3]*a[8],a[0]*a[8]-a[2]*a[6],a[2]*a[3]-a[0]*a[5],a[3]*a[7]-a[4]*a[6],a[1]*a[6]-a[0]*a[7],a[0]*a[4]-a[1]*a[3]).scaleEqual(o),this.velx=this.p2.x-this.p1.x,this.vely=this.p2.y-this.p1.y,this.velz=this.p2.z-this.p1.z;var n=g.sqrt(this.velx*this.velx+this.vely*this.vely+this.velz*this.velz);n&gt;.005?(n=(.005-n)/n*i*.05,this.velx*=n,this.vely*=n,this.velz*=n):(this.velx=0,this.vely=0,this.velz=0),this.impx*=.95,this.impy*=.95,this.impz*=.95,this.l1.x+=this.impx*this.m1,this.l1.y+=this.impy*this.m1,this.l1.z+=this.impz*this.m1,this.a1.x+=this.impx*this.ax1x+this.impy*this.ay1x+this.impz*this.az1x,this.a1.y+=this.impx*this.ax1y+this.impy*this.ay1y+this.impz*this.az1y,this.a1.z+=this.impx*this.ax1z+this.impy*this.ay1z+this.impz*this.az1z,this.l2.x-=this.impx*this.m2,this.l2.y-=this.impy*this.m2,this.l2.z-=this.impz*this.m2,this.a2.x-=this.impx*this.ax2x+this.impy*this.ay2x+this.impz*this.az2x,this.a2.y-=this.impx*this.ax2y+this.impy*this.ay2y+this.impz*this.az2y,this.a2.z-=this.impx*this.ax2z+this.impy*this.ay2z+this.impz*this.az2z},solve:function(){var t=this.dd.elements,i=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y-this.velx,s=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z-this.vely,h=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x-this.velz,e=i*t[0]+s*t[1]+h*t[2],a=i*t[3]+s*t[4]+h*t[5],o=i*t[6]+s*t[7]+h*t[8];this.impx+=e,this.impy+=a,this.impz+=o,this.l1.x+=e*this.m1,this.l1.y+=a*this.m1,this.l1.z+=o*this.m1,this.a1.x+=e*this.ax1x+a*this.ay1x+o*this.az1x,this.a1.y+=e*this.ax1y+a*this.ay1y+o*this.az1y,this.a1.z+=e*this.ax1z+a*this.ay1z+o*this.az1z,this.l2.x-=e*this.m2,this.l2.y-=a*this.m2,this.l2.z-=o*this.m2,this.a2.x-=e*this.ax2x+a*this.ay2x+o*this.az2x,this.a2.y-=e*this.ax2y+a*this.ay2y+o*this.az2y,this.a2.z-=e*this.ax2z+a*this.ay2z+o*this.az2z}}),Object.assign(W.prototype,{Rotational3Constraint:!0,preSolve:function(t,i){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1&gt;0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2&gt;0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3&gt;0;var s=this.i1.elements,h=this.i2.elements;this.i1e00=s[0],this.i1e01=s[1],this.i1e02=s[2],this.i1e10=s[3],this.i1e11=s[4],this.i1e12=s[5],this.i1e20=s[6],this.i1e21=s[7],this.i1e22=s[8],this.i2e00=h[0],this.i2e01=h[1],this.i2e02=h[2],this.i2e10=h[3],this.i2e11=h[4],this.i2e12=h[5],this.i2e20=h[6],this.i2e21=h[7],this.i2e22=h[8];var e=this.limitMotor1.frequency,a=this.limitMotor2.frequency,o=this.limitMotor3.frequency,n=e&gt;0,r=a&gt;0,l=o&gt;0,c=this.lowerLimit1&lt;=this.upperLimit1,m=this.lowerLimit2&lt;=this.upperLimit2,p=this.lowerLimit3&lt;=this.upperLimit3,u=this.limitMotor1.angle;c?(this.lowerLimit1==this.upperLimit1?(0!=this.limitState1&amp;&amp;(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-u):u&lt;this.lowerLimit1?(-1!=this.limitState1&amp;&amp;(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-u):u&gt;this.upperLimit1?(1!=this.limitState1&amp;&amp;(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-u):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),n||(this.limitVelocity1&gt;.02?this.limitVelocity1-=.02:this.limitVelocity1&lt;-.02?this.limitVelocity1+=.02:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0);var y=this.limitMotor2.angle;m?(this.lowerLimit2==this.upperLimit2?(0!=this.limitState2&amp;&amp;(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-y):y&lt;this.lowerLimit2?(-1!=this.limitState2&amp;&amp;(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-y):y&gt;this.upperLimit2?(1!=this.limitState2&amp;&amp;(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-y):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),r||(this.limitVelocity2&gt;.02?this.limitVelocity2-=.02:this.limitVelocity2&lt;-.02?this.limitVelocity2+=.02:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0);var x=this.limitMotor3.angle;if(p?(this.lowerLimit3==this.upperLimit3?(0!=this.limitState3&amp;&amp;(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-x):x&lt;this.lowerLimit3?(-1!=this.limitState3&amp;&amp;(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-x):x&gt;this.upperLimit3?(1!=this.limitState3&amp;&amp;(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-x):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),l||(this.limitVelocity3&gt;.02?this.limitVelocity3-=.02:this.limitVelocity3&lt;-.02?this.limitVelocity3+=.02:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&amp;&amp;(0!=this.limitState1||n)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&amp;&amp;(0!=this.limitState2||r)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&amp;&amp;(0!=this.limitState3||l)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0),this.a1x1=this.ax1*this.i1e00+this.ay1*this.i1e01+this.az1*this.i1e02,this.a1y1=this.ax1*this.i1e10+this.ay1*this.i1e11+this.az1*this.i1e12,this.a1z1=this.ax1*this.i1e20+this.ay1*this.i1e21+this.az1*this.i1e22,this.a2x1=this.ax1*this.i2e00+this.ay1*this.i2e01+this.az1*this.i2e02,this.a2y1=this.ax1*this.i2e10+this.ay1*this.i2e11+this.az1*this.i2e12,this.a2z1=this.ax1*this.i2e20+this.ay1*this.i2e21+this.az1*this.i2e22,this.a1x2=this.ax2*this.i1e00+this.ay2*this.i1e01+this.az2*this.i1e02,this.a1y2=this.ax2*this.i1e10+this.ay2*this.i1e11+this.az2*this.i1e12,this.a1z2=this.ax2*this.i1e20+this.ay2*this.i1e21+this.az2*this.i1e22,this.a2x2=this.ax2*this.i2e00+this.ay2*this.i2e01+this.az2*this.i2e02,this.a2y2=this.ax2*this.i2e10+this.ay2*this.i2e11+this.az2*this.i2e12,this.a2z2=this.ax2*this.i2e20+this.ay2*this.i2e21+this.az2*this.i2e22,this.a1x3=this.ax3*this.i1e00+this.ay3*this.i1e01+this.az3*this.i1e02,this.a1y3=this.ax3*this.i1e10+this.ay3*this.i1e11+this.az3*this.i1e12,this.a1z3=this.ax3*this.i1e20+this.ay3*this.i1e21+this.az3*this.i1e22,this.a2x3=this.ax3*this.i2e00+this.ay3*this.i2e01+this.az3*this.i2e02,this.a2y3=this.ax3*this.i2e10+this.ay3*this.i2e11+this.az3*this.i2e12,this.a2z3=this.ax3*this.i2e20+this.ay3*this.i2e21+this.az3*this.i2e22,this.k00=this.ax1*(this.a1x1+this.a2x1)+this.ay1*(this.a1y1+this.a2y1)+this.az1*(this.a1z1+this.a2z1),this.k01=this.ax1*(this.a1x2+this.a2x2)+this.ay1*(this.a1y2+this.a2y2)+this.az1*(this.a1z2+this.a2z2),this.k02=this.ax1*(this.a1x3+this.a2x3)+this.ay1*(this.a1y3+this.a2y3)+this.az1*(this.a1z3+this.a2z3),this.k10=this.ax2*(this.a1x1+this.a2x1)+this.ay2*(this.a1y1+this.a2y1)+this.az2*(this.a1z1+this.a2z1),this.k11=this.ax2*(this.a1x2+this.a2x2)+this.ay2*(this.a1y2+this.a2y2)+this.az2*(this.a1z2+this.a2z2),this.k12=this.ax2*(this.a1x3+this.a2x3)+this.ay2*(this.a1y3+this.a2y3)+this.az2*(this.a1z3+this.a2z3),this.k20=this.ax3*(this.a1x1+this.a2x1)+this.ay3*(this.a1y1+this.a2y1)+this.az3*(this.a1z1+this.a2z1),this.k21=this.ax3*(this.a1x2+this.a2x2)+this.ay3*(this.a1y2+this.a2y2)+this.az3*(this.a1z2+this.a2z2),this.k22=this.ax3*(this.a1x3+this.a2x3)+this.ay3*(this.a1y3+this.a2y3)+this.az3*(this.a1z3+this.a2z3),this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,n&amp;&amp;2!=this.limitState1){var d=6.2831853*e,f=d*d*t,b=i/(f+2*this.limitMotor1.dampingRatio*d);this.cfm1=this.kv00*b,this.limitVelocity1*=f*b}else this.cfm1=0,this.limitVelocity1*=.05*i;r&amp;&amp;2!=this.limitState2?(b=i/((f=(d=6.2831853*a)*d*t)+2*this.limitMotor2.dampingRatio*d),this.cfm2=this.kv11*b,this.limitVelocity2*=f*b):(this.cfm2=0,this.limitVelocity2*=.05*i),l&amp;&amp;2!=this.limitState3?(b=i/((f=(d=6.2831853*o)*d*t)+2*this.limitMotor3.dampingRatio*d),this.cfm3=this.kv22*b,this.limitVelocity3*=f*b):(this.cfm3=0,this.limitVelocity3*=.05*i),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var v=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*v,this.d01=(this.k02*this.k21-this.k01*this.k22)*v,this.d02=(this.k01*this.k12-this.k02*this.k11)*v,this.d10=(this.k12*this.k20-this.k10*this.k22)*v,this.d11=(this.k00*this.k22-this.k02*this.k20)*v,this.d12=(this.k02*this.k10-this.k00*this.k12)*v,this.d20=(this.k10*this.k21-this.k11*this.k20)*v,this.d21=(this.k01*this.k20-this.k00*this.k21)*v,this.d22=(this.k00*this.k11-this.k01*this.k10)*v,this.limitImpulse1*=.95,this.motorImpulse1*=.95,this.limitImpulse2*=.95,this.motorImpulse2*=.95,this.limitImpulse3*=.95,this.motorImpulse3*=.95;var z=this.limitImpulse1+this.motorImpulse1,N=this.limitImpulse2+this.motorImpulse2,k=this.limitImpulse3+this.motorImpulse3;this.a1.x+=z*this.a1x1+N*this.a1x2+k*this.a1x3,this.a1.y+=z*this.a1y1+N*this.a1y2+k*this.a1y3,this.a1.z+=z*this.a1z1+N*this.a1z2+k*this.a1z3,this.a2.x-=z*this.a2x1+N*this.a2x2+k*this.a2x3,this.a2.y-=z*this.a2y1+N*this.a2y2+k*this.a2y3,this.a2.z-=z*this.a2z1+N*this.a2z2+k*this.a2z3},solve_:function(){var t=this.a2.x-this.a1.x,i=this.a2.y-this.a1.y,s=this.a2.z-this.a1.z;this.limitVelocity3=30;var h=t*this.ax1+i*this.ay1+s*this.az1-this.limitVelocity1,e=t*this.ax2+i*this.ay2+s*this.az2-this.limitVelocity2,a=t*this.ax3+i*this.ay3+s*this.az3-this.limitVelocity3,o=h*this.d00+e*this.d01+a*this.d02,n=h*this.d10+e*this.d11+a*this.d12,r=h*this.d20+e*this.d21+a*this.d22;this.limitImpulse1+=o,this.limitImpulse2+=n,this.limitImpulse3+=r,this.a1.x+=o*this.a1x1+n*this.a1x2+r*this.a1x3,this.a1.y+=o*this.a1y1+n*this.a1y2+r*this.a1y3,this.a1.z+=o*this.a1z1+n*this.a1z2+r*this.a1z3,this.a2.x-=o*this.a2x1+n*this.a2x2+r*this.a2x3,this.a2.y-=o*this.a2y1+n*this.a2y2+r*this.a2y3,this.a2.z-=o*this.a2z1+n*this.a2z2+r*this.a2z3},solve:function(){var t=this.a2.x-this.a1.x,i=this.a2.y-this.a1.y,s=this.a2.z-this.a1.z,h=t*this.ax1+i*this.ay1+s*this.az1,e=t*this.ax2+i*this.ay2+s*this.az2,a=t*this.ax3+i*this.ay3+s*this.az3,o=this.motorImpulse1,n=this.motorImpulse2,r=this.motorImpulse3,l=0,c=0,m=0;this.enableMotor1&amp;&amp;(l=(h-this.motorSpeed1)*this.dv00,this.motorImpulse1+=l,this.motorImpulse1&gt;this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1&lt;-this.maxMotorImpulse1&amp;&amp;(this.motorImpulse1=-this.maxMotorImpulse1),l=this.motorImpulse1-o),this.enableMotor2&amp;&amp;(c=(e-this.motorSpeed2)*this.dv11,this.motorImpulse2+=c,this.motorImpulse2&gt;this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2&lt;-this.maxMotorImpulse2&amp;&amp;(this.motorImpulse2=-this.maxMotorImpulse2),c=this.motorImpulse2-n),this.enableMotor3&amp;&amp;(m=(a-this.motorSpeed3)*this.dv22,this.motorImpulse3+=m,this.motorImpulse3&gt;this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3&lt;-this.maxMotorImpulse3&amp;&amp;(this.motorImpulse3=-this.maxMotorImpulse3),m=this.motorImpulse3-r),h+=l*this.kv00+c*this.k01+m*this.k02,e+=l*this.k10+c*this.kv11+m*this.k12,a+=l*this.k20+c*this.k21+m*this.kv22,h-=this.limitVelocity1+this.limitImpulse1*this.cfm1,e-=this.limitVelocity2+this.limitImpulse2*this.cfm2,a-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var p=this.limitImpulse1,u=this.limitImpulse2,y=this.limitImpulse3,x=h*this.d00+e*this.d01+a*this.d02,d=h*this.d10+e*this.d11+a*this.d12,f=h*this.d20+e*this.d21+a*this.d22;this.limitImpulse1+=x,this.limitImpulse2+=d,this.limitImpulse3+=f;var b,v=0;switch((2==this.limitState1||this.limitImpulse1*this.limitState1&lt;0)&amp;&amp;(e+=(x=-p)*this.k10,a+=x*this.k20,v|=1),(2==this.limitState2||this.limitImpulse2*this.limitState2&lt;0)&amp;&amp;(h+=(d=-u)*this.k01,a+=d*this.k21,v|=2),(2==this.limitState3||this.limitImpulse3*this.limitState3&lt;0)&amp;&amp;(h+=(f=-y)*this.k02,e+=f*this.k12,v|=4),v){case 1:b=1/(this.k11*this.k22-this.k12*this.k21),d=(this.k22*e+-this.k12*a)*b,f=(-this.k21*e+this.k11*a)*b;break;case 2:b=1/(this.k00*this.k22-this.k02*this.k20),x=(this.k22*h+-this.k02*a)*b,f=(-this.k20*h+this.k00*a)*b;break;case 3:f=a/this.k22;break;case 4:b=1/(this.k00*this.k11-this.k01*this.k10),x=(this.k11*h+-this.k01*e)*b,d=(-this.k10*h+this.k00*e)*b;break;case 5:d=e/this.k11;break;case 6:x=h/this.k00}this.limitImpulse1=x+p,this.limitImpulse2=d+u,this.limitImpulse3=f+y;var z=l+x,N=c+d,k=m+f;this.a1.x+=z*this.a1x1+N*this.a1x2+k*this.a1x3,this.a1.y+=z*this.a1y1+N*this.a1y2+k*this.a1y3,this.a1.z+=z*this.a1z1+N*this.a1z2+k*this.a1z3,this.a2.x-=z*this.a2x1+N*this.a2x2+k*this.a2x3,this.a2.y-=z*this.a2y1+N*this.a2y2+k*this.a2y3,this.a2.z-=z*this.a2z1+N*this.a2z2+k*this.a2z3,t=this.a2.x-this.a1.x,i=this.a2.y-this.a1.y,s=this.a2.z-this.a1.z,e=t*this.ax2+i*this.ay2+s*this.az2}}),H.prototype=Object.assign(Object.create(_.prototype),{constructor:H,preSolve:function(t,i){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan);var s=g.acosClamp(g.dotVectors(this.an1,this.an2));this.tmp.crossVectors(this.an1,this.an2),g.dotVectors(this.nor,this.tmp)&lt;0?this.limitMotor.angle=-s:this.limitMotor.angle=s,this.tmp.crossVectors(this.ax1,this.ax2),this.r3.limitMotor2.angle=g.dotVectors(this.tan,this.tmp),this.r3.limitMotor3.angle=g.dotVectors(this.bin,this.tmp),this.r3.preSolve(t,i),this.lc.preSolve(t,i)},solve:function(){this.r3.solve(),this.lc.solve()},postSolve:function(){}}),Q.prototype=Object.assign(Object.create(_.prototype),{constructor:Q,preSolve:function(t,i){this.updateAnchorPoints(),this.lc.preSolve(t,i)},solve:function(){this.lc.solve()},postSolve:function(){}}),Object.assign(X.prototype,{TranslationalConstraint:!0,preSolve:function(t,i){this.ax=this.limitMotor.axis.x,this.ay=this.limitMotor.axis.y,this.az=this.limitMotor.axis.z,this.lowerLimit=this.limitMotor.lowerLimit,this.upperLimit=this.limitMotor.upperLimit,this.motorSpeed=this.limitMotor.motorSpeed,this.maxMotorForce=this.limitMotor.maxMotorForce,this.enableMotor=this.maxMotorForce&gt;0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var s=this.i1.elements,h=this.i2.elements;this.i1e00=s[0],this.i1e01=s[1],this.i1e02=s[2],this.i1e10=s[3],this.i1e11=s[4],this.i1e12=s[5],this.i1e20=s[6],this.i1e21=s[7],this.i1e22=s[8],this.i2e00=h[0],this.i2e01=h[1],this.i2e02=h[2],this.i2e10=h[3],this.i2e11=h[4],this.i2e12=h[5],this.i2e20=h[6],this.i2e21=h[7],this.i2e22=h[8];var e=this.p2.x-this.p1.x,a=this.p2.y-this.p1.y,o=this.p2.z-this.p1.z,n=e*this.ax+a*this.ay+o*this.az,r=this.limitMotor.frequency,l=r&gt;0;(l&amp;&amp;n&gt;20||n&lt;-20)&amp;&amp;(l=!1),this.lowerLimit&lt;=this.upperLimit?(this.lowerLimit==this.upperLimit?(0!=this.limitState&amp;&amp;(this.limitState=0,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-n,l||(n=this.lowerLimit)):n&lt;this.lowerLimit?(-1!=this.limitState&amp;&amp;(this.limitState=-1,this.limitImpulse=0),this.limitVelocity=this.lowerLimit-n,l||(n=this.lowerLimit)):n&gt;this.upperLimit?(1!=this.limitState&amp;&amp;(this.limitState=1,this.limitImpulse=0),this.limitVelocity=this.upperLimit-n,l||(n=this.upperLimit)):(this.limitState=2,this.limitImpulse=0,this.limitVelocity=0),l||(this.limitVelocity&gt;.005?this.limitVelocity-=.005:this.limitVelocity&lt;-.005?this.limitVelocity+=.005:this.limitVelocity=0)):(this.limitState=2,this.limitImpulse=0),this.enableMotor&amp;&amp;(0!=this.limitState||l)?this.maxMotorImpulse=this.maxMotorForce*t:(this.motorImpulse=0,this.maxMotorImpulse=0);var c=n*this.ax,m=n*this.ay,p=n*this.az,u=this.m1/(this.m1+this.m2),y=1-u;if(this.r1x=this.r1.x+c*u,this.r1y=this.r1.y+m*u,this.r1z=this.r1.z+p*u,this.r2x=this.r2.x-c*y,this.r2y=this.r2.y-m*y,this.r2z=this.r2.z-p*y,this.t1x=this.r1y*this.az-this.r1z*this.ay,this.t1y=this.r1z*this.ax-this.r1x*this.az,this.t1z=this.r1x*this.ay-this.r1y*this.ax,this.t2x=this.r2y*this.az-this.r2z*this.ay,this.t2y=this.r2z*this.ax-this.r2x*this.az,this.t2z=this.r2x*this.ay-this.r2y*this.ax,this.l1x=this.ax*this.m1,this.l1y=this.ay*this.m1,this.l1z=this.az*this.m1,this.l2x=this.ax*this.m2,this.l2y=this.ay*this.m2,this.l2z=this.az*this.m2,this.a1x=this.t1x*this.i1e00+this.t1y*this.i1e01+this.t1z*this.i1e02,this.a1y=this.t1x*this.i1e10+this.t1y*this.i1e11+this.t1z*this.i1e12,this.a1z=this.t1x*this.i1e20+this.t1y*this.i1e21+this.t1z*this.i1e22,this.a2x=this.t2x*this.i2e00+this.t2y*this.i2e01+this.t2z*this.i2e02,this.a2y=this.t2x*this.i2e10+this.t2y*this.i2e11+this.t2z*this.i2e12,this.a2z=this.t2x*this.i2e20+this.t2y*this.i2e21+this.t2z*this.i2e22,this.motorDenom=this.m1+this.m2+this.ax*(this.a1y*this.r1z-this.a1z*this.r1y+this.a2y*this.r2z-this.a2z*this.r2y)+this.ay*(this.a1z*this.r1x-this.a1x*this.r1z+this.a2z*this.r2x-this.a2x*this.r2z)+this.az*(this.a1x*this.r1y-this.a1y*this.r1x+this.a2x*this.r2y-this.a2y*this.r2x),this.invMotorDenom=1/this.motorDenom,l&amp;&amp;2!=this.limitState){var x=6.2831853*r,d=x*x*t,f=i/(d+2*this.limitMotor.dampingRatio*x);this.cfm=this.motorDenom*f,this.limitVelocity*=d*f}else this.cfm=0,this.limitVelocity*=.05*i;this.invDenom=1/(this.motorDenom+this.cfm);var b=this.limitImpulse+this.motorImpulse;this.l1.x+=b*this.l1x,this.l1.y+=b*this.l1y,this.l1.z+=b*this.l1z,this.a1.x+=b*this.a1x,this.a1.y+=b*this.a1y,this.a1.z+=b*this.a1z,this.l2.x-=b*this.l2x,this.l2.y-=b*this.l2y,this.l2.z-=b*this.l2z,this.a2.x-=b*this.a2x,this.a2.y-=b*this.a2y,this.a2.z-=b*this.a2z},solve:function(){var t,i,s=this.ax*(this.l2.x-this.l1.x)+this.ay*(this.l2.y-this.l1.y)+this.az*(this.l2.z-this.l1.z)+this.t2x*this.a2.x-this.t1x*this.a1.x+this.t2y*this.a2.y-this.t1y*this.a1.y+this.t2z*this.a2.z-this.t1z*this.a1.z;if(this.enableMotor){t=(s-this.motorSpeed)*this.invMotorDenom;var h=this.motorImpulse;this.motorImpulse+=t,this.motorImpulse&gt;this.maxMotorImpulse?this.motorImpulse=this.maxMotorImpulse:this.motorImpulse&lt;-this.maxMotorImpulse&amp;&amp;(this.motorImpulse=-this.maxMotorImpulse),s-=(t=this.motorImpulse-h)*this.motorDenom}else t=0;if(2!=this.limitState){i=(s-this.limitVelocity-this.limitImpulse*this.cfm)*this.invDenom;var e=this.limitImpulse;this.limitImpulse+=i,this.limitImpulse*this.limitState&lt;0&amp;&amp;(this.limitImpulse=0),i=this.limitImpulse-e}else i=0;var a=i+t;this.l1.x+=a*this.l1x,this.l1.y+=a*this.l1y,this.l1.z+=a*this.l1z,this.a1.x+=a*this.a1x,this.a1.y+=a*this.a1y,this.a1.z+=a*this.a1z,this.l2.x-=a*this.l2x,this.l2.y-=a*this.l2y,this.l2.z-=a*this.l2z,this.a2.x-=a*this.a2x,this.a2.y-=a*this.a2y,this.a2.z-=a*this.a2z}}),Y.prototype=Object.assign(Object.create(_.prototype),{constructor:Y,preSolve:function(t,i){this.updateAnchorPoints(),this.nor.sub(this.anchorPoint2,this.anchorPoint1).normalize(),this.t.preSolve(t,i)},solve:function(){this.t.solve()},postSolve:function(){}}),Object.assign(Z.prototype,{AngularConstraint:!0,preSolve:function(t,i){var s,h,e;this.ii1=this.i1.clone(),this.ii2=this.i2.clone(),s=1/((e=(new P).add(this.ii1,this.ii2).elements)[0]*(e[4]*e[8]-e[7]*e[5])+e[3]*(e[7]*e[2]-e[1]*e[8])+e[6]*(e[1]*e[5]-e[4]*e[2])),this.dd=(new P).set(e[4]*e[8]-e[5]*e[7],e[2]*e[7]-e[1]*e[8],e[1]*e[5]-e[2]*e[4],e[5]*e[6]-e[3]*e[8],e[0]*e[8]-e[2]*e[6],e[2]*e[3]-e[0]*e[5],e[3]*e[7]-e[4]*e[6],e[1]*e[6]-e[0]*e[7],e[0]*e[4]-e[1]*e[3]).multiplyScalar(s),this.relativeOrientation.invert(this.b1.orientation).multiply(this.targetOrientation).multiply(this.b2.orientation),s=2*this.relativeOrientation.w,this.vel.copy(this.relativeOrientation).multiplyScalar(s),(h=this.vel.length())&gt;.02?(h=(.02-h)/h*i*.05,this.vel.multiplyScalar(h)):this.vel.set(0,0,0),this.rn1.copy(this.imp).applyMatrix3(this.ii1,!0),this.rn2.copy(this.imp).applyMatrix3(this.ii2,!0),this.a1.add(this.rn1),this.a2.sub(this.rn2)},solve:function(){var t=this.a2.clone().sub(this.a1).sub(this.vel);this.rn0.copy(t).applyMatrix3(this.dd,!0),this.rn1.copy(this.rn0).applyMatrix3(this.ii1,!0),this.rn2.copy(this.rn0).applyMatrix3(this.ii2,!0),this.imp.add(this.rn0),this.a1.add(this.rn1),this.a2.sub(this.rn2)}}),Object.assign(K.prototype,{Translational3Constraint:!0,preSolve:function(t,i){this.ax1=this.limitMotor1.axis.x,this.ay1=this.limitMotor1.axis.y,this.az1=this.limitMotor1.axis.z,this.ax2=this.limitMotor2.axis.x,this.ay2=this.limitMotor2.axis.y,this.az2=this.limitMotor2.axis.z,this.ax3=this.limitMotor3.axis.x,this.ay3=this.limitMotor3.axis.y,this.az3=this.limitMotor3.axis.z,this.lowerLimit1=this.limitMotor1.lowerLimit,this.upperLimit1=this.limitMotor1.upperLimit,this.motorSpeed1=this.limitMotor1.motorSpeed,this.maxMotorForce1=this.limitMotor1.maxMotorForce,this.enableMotor1=this.maxMotorForce1&gt;0,this.lowerLimit2=this.limitMotor2.lowerLimit,this.upperLimit2=this.limitMotor2.upperLimit,this.motorSpeed2=this.limitMotor2.motorSpeed,this.maxMotorForce2=this.limitMotor2.maxMotorForce,this.enableMotor2=this.maxMotorForce2&gt;0,this.lowerLimit3=this.limitMotor3.lowerLimit,this.upperLimit3=this.limitMotor3.upperLimit,this.motorSpeed3=this.limitMotor3.motorSpeed,this.maxMotorForce3=this.limitMotor3.maxMotorForce,this.enableMotor3=this.maxMotorForce3&gt;0,this.m1=this.b1.inverseMass,this.m2=this.b2.inverseMass;var s=this.i1.elements,h=this.i2.elements;this.i1e00=s[0],this.i1e01=s[1],this.i1e02=s[2],this.i1e10=s[3],this.i1e11=s[4],this.i1e12=s[5],this.i1e20=s[6],this.i1e21=s[7],this.i1e22=s[8],this.i2e00=h[0],this.i2e01=h[1],this.i2e02=h[2],this.i2e10=h[3],this.i2e11=h[4],this.i2e12=h[5],this.i2e20=h[6],this.i2e21=h[7],this.i2e22=h[8];var e=this.p2.x-this.p1.x,a=this.p2.y-this.p1.y,o=this.p2.z-this.p1.z,n=e*this.ax1+a*this.ay1+o*this.az1,r=e*this.ax2+a*this.ay2+o*this.az2,l=e*this.ax3+a*this.ay3+o*this.az3,c=this.limitMotor1.frequency,m=this.limitMotor2.frequency,p=this.limitMotor3.frequency,u=c&gt;0,y=m&gt;0,x=p&gt;0,d=this.lowerLimit1&lt;=this.upperLimit1,f=this.lowerLimit2&lt;=this.upperLimit2,b=this.lowerLimit3&lt;=this.upperLimit3;(u&amp;&amp;n&gt;20||n&lt;-20)&amp;&amp;(u=!1),(y&amp;&amp;r&gt;20||r&lt;-20)&amp;&amp;(y=!1),(x&amp;&amp;l&gt;20||l&lt;-20)&amp;&amp;(x=!1),d?(this.lowerLimit1==this.upperLimit1?(0!=this.limitState1&amp;&amp;(this.limitState1=0,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-n,u||(n=this.lowerLimit1)):n&lt;this.lowerLimit1?(-1!=this.limitState1&amp;&amp;(this.limitState1=-1,this.limitImpulse1=0),this.limitVelocity1=this.lowerLimit1-n,u||(n=this.lowerLimit1)):n&gt;this.upperLimit1?(1!=this.limitState1&amp;&amp;(this.limitState1=1,this.limitImpulse1=0),this.limitVelocity1=this.upperLimit1-n,u||(n=this.upperLimit1)):(this.limitState1=2,this.limitImpulse1=0,this.limitVelocity1=0),u||(this.limitVelocity1&gt;.005?this.limitVelocity1-=.005:this.limitVelocity1&lt;-.005?this.limitVelocity1+=.005:this.limitVelocity1=0)):(this.limitState1=2,this.limitImpulse1=0),f?(this.lowerLimit2==this.upperLimit2?(0!=this.limitState2&amp;&amp;(this.limitState2=0,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-r,y||(r=this.lowerLimit2)):r&lt;this.lowerLimit2?(-1!=this.limitState2&amp;&amp;(this.limitState2=-1,this.limitImpulse2=0),this.limitVelocity2=this.lowerLimit2-r,y||(r=this.lowerLimit2)):r&gt;this.upperLimit2?(1!=this.limitState2&amp;&amp;(this.limitState2=1,this.limitImpulse2=0),this.limitVelocity2=this.upperLimit2-r,y||(r=this.upperLimit2)):(this.limitState2=2,this.limitImpulse2=0,this.limitVelocity2=0),y||(this.limitVelocity2&gt;.005?this.limitVelocity2-=.005:this.limitVelocity2&lt;-.005?this.limitVelocity2+=.005:this.limitVelocity2=0)):(this.limitState2=2,this.limitImpulse2=0),b?(this.lowerLimit3==this.upperLimit3?(0!=this.limitState3&amp;&amp;(this.limitState3=0,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-l,x||(l=this.lowerLimit3)):l&lt;this.lowerLimit3?(-1!=this.limitState3&amp;&amp;(this.limitState3=-1,this.limitImpulse3=0),this.limitVelocity3=this.lowerLimit3-l,x||(l=this.lowerLimit3)):l&gt;this.upperLimit3?(1!=this.limitState3&amp;&amp;(this.limitState3=1,this.limitImpulse3=0),this.limitVelocity3=this.upperLimit3-l,x||(l=this.upperLimit3)):(this.limitState3=2,this.limitImpulse3=0,this.limitVelocity3=0),x||(this.limitVelocity3&gt;.005?this.limitVelocity3-=.005:this.limitVelocity3&lt;-.005?this.limitVelocity3+=.005:this.limitVelocity3=0)):(this.limitState3=2,this.limitImpulse3=0),this.enableMotor1&amp;&amp;(0!=this.limitState1||u)?this.maxMotorImpulse1=this.maxMotorForce1*t:(this.motorImpulse1=0,this.maxMotorImpulse1=0),this.enableMotor2&amp;&amp;(0!=this.limitState2||y)?this.maxMotorImpulse2=this.maxMotorForce2*t:(this.motorImpulse2=0,this.maxMotorImpulse2=0),this.enableMotor3&amp;&amp;(0!=this.limitState3||x)?this.maxMotorImpulse3=this.maxMotorForce3*t:(this.motorImpulse3=0,this.maxMotorImpulse3=0);var v=n*this.ax1+r*this.ax2+l*this.ax2,z=n*this.ay1+r*this.ay2+l*this.ay2,N=n*this.az1+r*this.az2+l*this.az2,k=this.m2/(this.m1+this.m2);this.weight&gt;=0&amp;&amp;(k=this.weight);var w=1-k;this.r1x=this.r1.x+v*k,this.r1y=this.r1.y+z*k,this.r1z=this.r1.z+N*k,this.r2x=this.r2.x-v*w,this.r2y=this.r2.y-z*w,this.r2z=this.r2.z-N*w,this.t1x1=this.r1y*this.az1-this.r1z*this.ay1,this.t1y1=this.r1z*this.ax1-this.r1x*this.az1,this.t1z1=this.r1x*this.ay1-this.r1y*this.ax1,this.t2x1=this.r2y*this.az1-this.r2z*this.ay1,this.t2y1=this.r2z*this.ax1-this.r2x*this.az1,this.t2z1=this.r2x*this.ay1-this.r2y*this.ax1,this.l1x1=this.ax1*this.m1,this.l1y1=this.ay1*this.m1,this.l1z1=this.az1*this.m1,this.l2x1=this.ax1*this.m2,this.l2y1=this.ay1*this.m2,this.l2z1=this.az1*this.m2,this.a1x1=this.t1x1*this.i1e00+this.t1y1*this.i1e01+this.t1z1*this.i1e02,this.a1y1=this.t1x1*this.i1e10+this.t1y1*this.i1e11+this.t1z1*this.i1e12,this.a1z1=this.t1x1*this.i1e20+this.t1y1*this.i1e21+this.t1z1*this.i1e22,this.a2x1=this.t2x1*this.i2e00+this.t2y1*this.i2e01+this.t2z1*this.i2e02,this.a2y1=this.t2x1*this.i2e10+this.t2y1*this.i2e11+this.t2z1*this.i2e12,this.a2z1=this.t2x1*this.i2e20+this.t2y1*this.i2e21+this.t2z1*this.i2e22,this.t1x2=this.r1y*this.az2-this.r1z*this.ay2,this.t1y2=this.r1z*this.ax2-this.r1x*this.az2,this.t1z2=this.r1x*this.ay2-this.r1y*this.ax2,this.t2x2=this.r2y*this.az2-this.r2z*this.ay2,this.t2y2=this.r2z*this.ax2-this.r2x*this.az2,this.t2z2=this.r2x*this.ay2-this.r2y*this.ax2,this.l1x2=this.ax2*this.m1,this.l1y2=this.ay2*this.m1,this.l1z2=this.az2*this.m1,this.l2x2=this.ax2*this.m2,this.l2y2=this.ay2*this.m2,this.l2z2=this.az2*this.m2,this.a1x2=this.t1x2*this.i1e00+this.t1y2*this.i1e01+this.t1z2*this.i1e02,this.a1y2=this.t1x2*this.i1e10+this.t1y2*this.i1e11+this.t1z2*this.i1e12,this.a1z2=this.t1x2*this.i1e20+this.t1y2*this.i1e21+this.t1z2*this.i1e22,this.a2x2=this.t2x2*this.i2e00+this.t2y2*this.i2e01+this.t2z2*this.i2e02,this.a2y2=this.t2x2*this.i2e10+this.t2y2*this.i2e11+this.t2z2*this.i2e12,this.a2z2=this.t2x2*this.i2e20+this.t2y2*this.i2e21+this.t2z2*this.i2e22,this.t1x3=this.r1y*this.az3-this.r1z*this.ay3,this.t1y3=this.r1z*this.ax3-this.r1x*this.az3,this.t1z3=this.r1x*this.ay3-this.r1y*this.ax3,this.t2x3=this.r2y*this.az3-this.r2z*this.ay3,this.t2y3=this.r2z*this.ax3-this.r2x*this.az3,this.t2z3=this.r2x*this.ay3-this.r2y*this.ax3,this.l1x3=this.ax3*this.m1,this.l1y3=this.ay3*this.m1,this.l1z3=this.az3*this.m1,this.l2x3=this.ax3*this.m2,this.l2y3=this.ay3*this.m2,this.l2z3=this.az3*this.m2,this.a1x3=this.t1x3*this.i1e00+this.t1y3*this.i1e01+this.t1z3*this.i1e02,this.a1y3=this.t1x3*this.i1e10+this.t1y3*this.i1e11+this.t1z3*this.i1e12,this.a1z3=this.t1x3*this.i1e20+this.t1y3*this.i1e21+this.t1z3*this.i1e22,this.a2x3=this.t2x3*this.i2e00+this.t2y3*this.i2e01+this.t2z3*this.i2e02,this.a2y3=this.t2x3*this.i2e10+this.t2y3*this.i2e11+this.t2z3*this.i2e12,this.a2z3=this.t2x3*this.i2e20+this.t2y3*this.i2e21+this.t2z3*this.i2e22;var M=this.m1+this.m2;if(this.k00=(this.ax1*this.ax1+this.ay1*this.ay1+this.az1*this.az1)*M,this.k01=(this.ax1*this.ax2+this.ay1*this.ay2+this.az1*this.az2)*M,this.k02=(this.ax1*this.ax3+this.ay1*this.ay3+this.az1*this.az3)*M,this.k10=(this.ax2*this.ax1+this.ay2*this.ay1+this.az2*this.az1)*M,this.k11=(this.ax2*this.ax2+this.ay2*this.ay2+this.az2*this.az2)*M,this.k12=(this.ax2*this.ax3+this.ay2*this.ay3+this.az2*this.az3)*M,this.k20=(this.ax3*this.ax1+this.ay3*this.ay1+this.az3*this.az1)*M,this.k21=(this.ax3*this.ax2+this.ay3*this.ay2+this.az3*this.az2)*M,this.k22=(this.ax3*this.ax3+this.ay3*this.ay3+this.az3*this.az3)*M,this.k00+=this.t1x1*this.a1x1+this.t1y1*this.a1y1+this.t1z1*this.a1z1,this.k01+=this.t1x1*this.a1x2+this.t1y1*this.a1y2+this.t1z1*this.a1z2,this.k02+=this.t1x1*this.a1x3+this.t1y1*this.a1y3+this.t1z1*this.a1z3,this.k10+=this.t1x2*this.a1x1+this.t1y2*this.a1y1+this.t1z2*this.a1z1,this.k11+=this.t1x2*this.a1x2+this.t1y2*this.a1y2+this.t1z2*this.a1z2,this.k12+=this.t1x2*this.a1x3+this.t1y2*this.a1y3+this.t1z2*this.a1z3,this.k20+=this.t1x3*this.a1x1+this.t1y3*this.a1y1+this.t1z3*this.a1z1,this.k21+=this.t1x3*this.a1x2+this.t1y3*this.a1y2+this.t1z3*this.a1z2,this.k22+=this.t1x3*this.a1x3+this.t1y3*this.a1y3+this.t1z3*this.a1z3,this.k00+=this.t2x1*this.a2x1+this.t2y1*this.a2y1+this.t2z1*this.a2z1,this.k01+=this.t2x1*this.a2x2+this.t2y1*this.a2y2+this.t2z1*this.a2z2,this.k02+=this.t2x1*this.a2x3+this.t2y1*this.a2y3+this.t2z1*this.a2z3,this.k10+=this.t2x2*this.a2x1+this.t2y2*this.a2y1+this.t2z2*this.a2z1,this.k11+=this.t2x2*this.a2x2+this.t2y2*this.a2y2+this.t2z2*this.a2z2,this.k12+=this.t2x2*this.a2x3+this.t2y2*this.a2y3+this.t2z2*this.a2z3,this.k20+=this.t2x3*this.a2x1+this.t2y3*this.a2y1+this.t2z3*this.a2z1,this.k21+=this.t2x3*this.a2x2+this.t2y3*this.a2y2+this.t2z3*this.a2z2,this.k22+=this.t2x3*this.a2x3+this.t2y3*this.a2y3+this.t2z3*this.a2z3,this.kv00=this.k00,this.kv11=this.k11,this.kv22=this.k22,this.dv00=1/this.kv00,this.dv11=1/this.kv11,this.dv22=1/this.kv22,u&amp;&amp;2!=this.limitState1){var g=6.2831853*c,I=g*g*t,V=i/(I+2*this.limitMotor1.dampingRatio*g);this.cfm1=this.kv00*V,this.limitVelocity1*=I*V}else this.cfm1=0,this.limitVelocity1*=.05*i;y&amp;&amp;2!=this.limitState2?(V=i/((I=(g=6.2831853*m)*g*t)+2*this.limitMotor2.dampingRatio*g),this.cfm2=this.kv11*V,this.limitVelocity2*=I*V):(this.cfm2=0,this.limitVelocity2*=.05*i),x&amp;&amp;2!=this.limitState3?(V=i/((I=(g=6.2831853*p)*g*t)+2*this.limitMotor3.dampingRatio*g),this.cfm3=this.kv22*V,this.limitVelocity3*=I*V):(this.cfm3=0,this.limitVelocity3*=.05*i),this.k00+=this.cfm1,this.k11+=this.cfm2,this.k22+=this.cfm3;var L=1/(this.k00*(this.k11*this.k22-this.k21*this.k12)+this.k10*(this.k21*this.k02-this.k01*this.k22)+this.k20*(this.k01*this.k12-this.k11*this.k02));this.d00=(this.k11*this.k22-this.k12*this.k21)*L,this.d01=(this.k02*this.k21-this.k01*this.k22)*L,this.d02=(this.k01*this.k12-this.k02*this.k11)*L,this.d10=(this.k12*this.k20-this.k10*this.k22)*L,this.d11=(this.k00*this.k22-this.k02*this.k20)*L,this.d12=(this.k02*this.k10-this.k00*this.k12)*L,this.d20=(this.k10*this.k21-this.k11*this.k20)*L,this.d21=(this.k01*this.k20-this.k00*this.k21)*L,this.d22=(this.k00*this.k11-this.k01*this.k10)*L;var S=this.limitImpulse1+this.motorImpulse1,P=this.limitImpulse2+this.motorImpulse2,T=this.limitImpulse3+this.motorImpulse3;this.l1.x+=S*this.l1x1+P*this.l1x2+T*this.l1x3,this.l1.y+=S*this.l1y1+P*this.l1y2+T*this.l1y3,this.l1.z+=S*this.l1z1+P*this.l1z2+T*this.l1z3,this.a1.x+=S*this.a1x1+P*this.a1x2+T*this.a1x3,this.a1.y+=S*this.a1y1+P*this.a1y2+T*this.a1y3,this.a1.z+=S*this.a1z1+P*this.a1z2+T*this.a1z3,this.l2.x-=S*this.l2x1+P*this.l2x2+T*this.l2x3,this.l2.y-=S*this.l2y1+P*this.l2y2+T*this.l2y3,this.l2.z-=S*this.l2z1+P*this.l2z2+T*this.l2z3,this.a2.x-=S*this.a2x1+P*this.a2x2+T*this.a2x3,this.a2.y-=S*this.a2y1+P*this.a2y2+T*this.a2y3,this.a2.z-=S*this.a2z1+P*this.a2z2+T*this.a2z3},solve:function(){var t=this.l2.x-this.l1.x+this.a2.y*this.r2z-this.a2.z*this.r2y-this.a1.y*this.r1z+this.a1.z*this.r1y,i=this.l2.y-this.l1.y+this.a2.z*this.r2x-this.a2.x*this.r2z-this.a1.z*this.r1x+this.a1.x*this.r1z,s=this.l2.z-this.l1.z+this.a2.x*this.r2y-this.a2.y*this.r2x-this.a1.x*this.r1y+this.a1.y*this.r1x,h=t*this.ax1+i*this.ay1+s*this.az1,e=t*this.ax2+i*this.ay2+s*this.az2,a=t*this.ax3+i*this.ay3+s*this.az3,o=this.motorImpulse1,n=this.motorImpulse2,r=this.motorImpulse3,l=0,c=0,m=0;this.enableMotor1&amp;&amp;(l=(h-this.motorSpeed1)*this.dv00,this.motorImpulse1+=l,this.motorImpulse1&gt;this.maxMotorImpulse1?this.motorImpulse1=this.maxMotorImpulse1:this.motorImpulse1&lt;-this.maxMotorImpulse1&amp;&amp;(this.motorImpulse1=-this.maxMotorImpulse1),l=this.motorImpulse1-o),this.enableMotor2&amp;&amp;(c=(e-this.motorSpeed2)*this.dv11,this.motorImpulse2+=c,this.motorImpulse2&gt;this.maxMotorImpulse2?this.motorImpulse2=this.maxMotorImpulse2:this.motorImpulse2&lt;-this.maxMotorImpulse2&amp;&amp;(this.motorImpulse2=-this.maxMotorImpulse2),c=this.motorImpulse2-n),this.enableMotor3&amp;&amp;(m=(a-this.motorSpeed3)*this.dv22,this.motorImpulse3+=m,this.motorImpulse3&gt;this.maxMotorImpulse3?this.motorImpulse3=this.maxMotorImpulse3:this.motorImpulse3&lt;-this.maxMotorImpulse3&amp;&amp;(this.motorImpulse3=-this.maxMotorImpulse3),m=this.motorImpulse3-r),h+=l*this.kv00+c*this.k01+m*this.k02,e+=l*this.k10+c*this.kv11+m*this.k12,a+=l*this.k20+c*this.k21+m*this.kv22,h-=this.limitVelocity1+this.limitImpulse1*this.cfm1,e-=this.limitVelocity2+this.limitImpulse2*this.cfm2,a-=this.limitVelocity3+this.limitImpulse3*this.cfm3;var p=this.limitImpulse1,u=this.limitImpulse2,y=this.limitImpulse3,x=h*this.d00+e*this.d01+a*this.d02,d=h*this.d10+e*this.d11+a*this.d12,f=h*this.d20+e*this.d21+a*this.d22;this.limitImpulse1+=x,this.limitImpulse2+=d,this.limitImpulse3+=f;var b,v=0;switch((2==this.limitState1||this.limitImpulse1*this.limitState1&lt;0)&amp;&amp;(e+=(x=-p)*this.k10,a+=x*this.k20,v|=1),(2==this.limitState2||this.limitImpulse2*this.limitState2&lt;0)&amp;&amp;(h+=(d=-u)*this.k01,a+=d*this.k21,v|=2),(2==this.limitState3||this.limitImpulse3*this.limitState3&lt;0)&amp;&amp;(h+=(f=-y)*this.k02,e+=f*this.k12,v|=4),v){case 1:b=1/(this.k11*this.k22-this.k12*this.k21),d=(this.k22*e+-this.k12*a)*b,f=(-this.k21*e+this.k11*a)*b;break;case 2:b=1/(this.k00*this.k22-this.k02*this.k20),x=(this.k22*h+-this.k02*a)*b,f=(-this.k20*h+this.k00*a)*b;break;case 3:f=a/this.k22;break;case 4:b=1/(this.k00*this.k11-this.k01*this.k10),x=(this.k11*h+-this.k01*e)*b,d=(-this.k10*h+this.k00*e)*b;break;case 5:d=e/this.k11;break;case 6:x=h/this.k00}this.limitImpulse1=p+x,this.limitImpulse2=u+d,this.limitImpulse3=y+f;var z=l+x,N=c+d,k=m+f;this.l1.x+=z*this.l1x1+N*this.l1x2+k*this.l1x3,this.l1.y+=z*this.l1y1+N*this.l1y2+k*this.l1y3,this.l1.z+=z*this.l1z1+N*this.l1z2+k*this.l1z3,this.a1.x+=z*this.a1x1+N*this.a1x2+k*this.a1x3,this.a1.y+=z*this.a1y1+N*this.a1y2+k*this.a1y3,this.a1.z+=z*this.a1z1+N*this.a1z2+k*this.a1z3,this.l2.x-=z*this.l2x1+N*this.l2x2+k*this.l2x3,this.l2.y-=z*this.l2y1+N*this.l2y2+k*this.l2y3,this.l2.z-=z*this.l2z1+N*this.l2z2+k*this.l2z3,this.a2.x-=z*this.a2x1+N*this.a2x2+k*this.a2x3,this.a2.y-=z*this.a2y1+N*this.a2y2+k*this.a2y3,this.a2.z-=z*this.a2z1+N*this.a2z2+k*this.a2z3}}),G.prototype=Object.assign(Object.create(_.prototype),{constructor:G,preSolve:function(t,i){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan),this.ac.preSolve(t,i),this.t3.preSolve(t,i)},solve:function(){this.ac.solve(),this.t3.solve()},postSolve:function(){}}),$.prototype=Object.assign(Object.create(_.prototype),{constructor:$,preSolve:function(t,i){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.nor.set(this.ax1.x*this.body2.inverseMass+this.ax2.x*this.body1.inverseMass,this.ax1.y*this.body2.inverseMass+this.ax2.y*this.body1.inverseMass,this.ax1.z*this.body2.inverseMass+this.ax2.z*this.body1.inverseMass).normalize(),this.tan.tangent(this.nor).normalize(),this.bin.crossVectors(this.nor,this.tan),this.tmp.crossVectors(this.an1,this.an2);var s=g.acosClamp(g.dotVectors(this.an1,this.an2));g.dotVectors(this.nor,this.tmp)&lt;0?this.rotationalLimitMotor.angle=-s:this.rotationalLimitMotor.angle=s,this.tmp.crossVectors(this.ax1,this.ax2),this.r3.limitMotor2.angle=g.dotVectors(this.tan,this.tmp),this.r3.limitMotor3.angle=g.dotVectors(this.bin,this.tmp),this.r3.preSolve(t,i),this.t3.preSolve(t,i)},solve:function(){this.r3.solve(),this.t3.solve()},postSolve:function(){}}),tt.prototype=Object.assign(Object.create(_.prototype),{constructor:tt,preSolve:function(t,i){this.updateAnchorPoints(),this.ax1.copy(this.localAxis1).applyMatrix3(this.body1.rotation,!0),this.an1.copy(this.localAngle1).applyMatrix3(this.body1.rotation,!0),this.ax2.copy(this.localAxis2).applyMatrix3(this.body2.rotation,!0),this.an2.copy(this.localAngle2).applyMatrix3(this.body2.rotation,!0),this.r3.limitMotor1.angle=g.dotVectors(this.ax1,this.ax2);var s=g.dotVectors(this.an1,this.ax2);g.dotVectors(this.ax1,this.tmp.crossVectors(this.an1,this.ax2))&lt;0?this.rotationalLimitMotor1.angle=-s:this.rotationalLimitMotor1.angle=s,s=g.dotVectors(this.an2,this.ax1),g.dotVectors(this.ax2,this.tmp.crossVectors(this.an2,this.ax1))&lt;0?this.rotationalLimitMotor2.angle=-s:this.rotationalLimitMotor2.angle=s,this.nor.crossVectors(this.ax1,this.ax2).normalize(),this.tan.crossVectors(this.nor,this.ax2).normalize(),this.bin.crossVectors(this.nor,this.ax1).normalize(),this.r3.preSolve(t,i),this.t3.preSolve(t,i)},solve:function(){this.r3.solve(),this.t3.solve()},postSolve:function(){}}),ot.prototype={constructor:ot,reset:function(t,i){this.body1=t.parent,this.body2=i.parent,this.numPoints=0},addPointVec:function(t,i,s,h){var e=this.points[this.numPoints++];e.position.copy(t),e.localPoint1.sub(t,this.body1.position).applyMatrix3(this.body1.rotation),e.localPoint2.sub(t,this.body2.position).applyMatrix3(this.body2.rotation),e.normal.copy(i),h&amp;&amp;e.normal.negate(),e.normalImpulse=0,e.penetration=s,e.warmStarted=!1},addPoint:function(t,i,s,h,e,a,o,n){var r=this.points[this.numPoints++];r.position.set(t,i,s),r.localPoint1.sub(r.position,this.body1.position).applyMatrix3(this.body1.rotation),r.localPoint2.sub(r.position,this.body2.position).applyMatrix3(this.body2.rotation),r.normalImpulse=0,r.normal.set(h,e,a),n&amp;&amp;r.normal.negate(),r.penetration=o,r.warmStarted=!1}},rt.prototype=Object.assign(Object.create(U.prototype),{constructor:rt,attach:function(){this.p1=this.body1.position,this.p2=this.body2.position,this.lv1=this.body1.linearVelocity,this.av1=this.body1.angularVelocity,this.lv2=this.body2.linearVelocity,this.av2=this.body2.angularVelocity,this.i1=this.body1.inverseInertia,this.i2=this.body2.inverseInertia},detach:function(){this.p1=null,this.p2=null,this.lv1=null,this.lv2=null,this.av1=null,this.av2=null,this.i1=null,this.i2=null},preSolve:function(t,i){this.m1=this.body1.inverseMass,this.m2=this.body2.inverseMass;var s=this.m1+this.m2;this.num=this.manifold.numPoints;for(var h,e,a,o,n,r,l,c=this.cs,m=0;m&lt;this.num;m++)h=this.ps[m],this.tmpP1.sub(h.position,this.p1),this.tmpP2.sub(h.position,this.p2),this.tmpC1.crossVectors(this.av1,this.tmpP1),this.tmpC2.crossVectors(this.av2,this.tmpP2),c.norImp=h.normalImpulse,c.tanImp=h.tangentImpulse,c.binImp=h.binormalImpulse,c.nor.copy(h.normal),this.tmp.set(this.lv2.x+this.tmpC2.x-(this.lv1.x+this.tmpC1.x),this.lv2.y+this.tmpC2.y-(this.lv1.y+this.tmpC1.y),this.lv2.z+this.tmpC2.z-(this.lv1.z+this.tmpC1.z)),e=g.dotVectors(c.nor,this.tmp),c.tan.set(this.tmp.x-e*c.nor.x,this.tmp.y-e*c.nor.y,this.tmp.z-e*c.nor.z),g.dotVectors(c.tan,c.tan)&lt;=.04&amp;&amp;c.tan.tangent(c.nor),c.tan.normalize(),c.bin.crossVectors(c.nor,c.tan),c.norU1.scale(c.nor,this.m1),c.norU2.scale(c.nor,this.m2),c.tanU1.scale(c.tan,this.m1),c.tanU2.scale(c.tan,this.m2),c.binU1.scale(c.bin,this.m1),c.binU2.scale(c.bin,this.m2),c.norT1.crossVectors(this.tmpP1,c.nor),c.tanT1.crossVectors(this.tmpP1,c.tan),c.binT1.crossVectors(this.tmpP1,c.bin),c.norT2.crossVectors(this.tmpP2,c.nor),c.tanT2.crossVectors(this.tmpP2,c.tan),c.binT2.crossVectors(this.tmpP2,c.bin),r=this.i1,l=this.i2,c.norTU1.copy(c.norT1).applyMatrix3(r,!0),c.tanTU1.copy(c.tanT1).applyMatrix3(r,!0),c.binTU1.copy(c.binT1).applyMatrix3(r,!0),c.norTU2.copy(c.norT2).applyMatrix3(l,!0),c.tanTU2.copy(c.tanT2).applyMatrix3(l,!0),c.binTU2.copy(c.binT2).applyMatrix3(l,!0),this.tmpC1.crossVectors(c.norTU1,this.tmpP1),this.tmpC2.crossVectors(c.norTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),c.norDen=1/(s+g.dotVectors(c.nor,this.tmp)),this.tmpC1.crossVectors(c.tanTU1,this.tmpP1),this.tmpC2.crossVectors(c.tanTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),c.tanDen=1/(s+g.dotVectors(c.tan,this.tmp)),this.tmpC1.crossVectors(c.binTU1,this.tmpP1),this.tmpC2.crossVectors(c.binTU2,this.tmpP2),this.tmp.add(this.tmpC1,this.tmpC2),c.binDen=1/(s+g.dotVectors(c.bin,this.tmp)),h.warmStarted?(a=h.normalImpulse,this.lv1.addScaledVector(c.norU1,a),this.av1.addScaledVector(c.norTU1,a),this.lv2.subScaledVector(c.norU2,a),this.av2.subScaledVector(c.norTU2,a),c.norImp=a,c.tanImp=0,c.binImp=0,e=0):(c.norImp=0,c.tanImp=0,c.binImp=0),e&gt;-1&amp;&amp;(e=0),(o=this.restitution*-e)&lt;(n=-(h.penetration+.005)*i*.05)&amp;&amp;(o=n),c.norTar=o,c.last=m==this.num-1,c=c.next},solve:function(){var t,i,s,h,e,a,o,n,r;this.tmplv1.copy(this.lv1),this.tmplv2.copy(this.lv2),this.tmpav1.copy(this.av1),this.tmpav2.copy(this.av2);for(var l=this.cs;e=l.norImp,a=l.tanImp,o=l.binImp,n=-e*this.friction,this.tmp.sub(this.tmplv2,this.tmplv1),t=a,s=o,(r=(a+=i=(g.dotVectors(this.tmp,l.tan)+g.dotVectors(this.tmpav2,l.tanT2)-g.dotVectors(this.tmpav1,l.tanT1))*l.tanDen)*a+(o+=h=(g.dotVectors(this.tmp,l.bin)+g.dotVectors(this.tmpav2,l.binT2)-g.dotVectors(this.tmpav1,l.binT1))*l.binDen)*o)&gt;n*n&amp;&amp;(a*=r=n/g.sqrt(r),o*=r),i=a-t,h=o-s,this.tmp.set(l.tanU1.x*i+l.binU1.x*h,l.tanU1.y*i+l.binU1.y*h,l.tanU1.z*i+l.binU1.z*h),this.tmplv1.addEqual(this.tmp),this.tmp.set(l.tanTU1.x*i+l.binTU1.x*h,l.tanTU1.y*i+l.binTU1.y*h,l.tanTU1.z*i+l.binTU1.z*h),this.tmpav1.addEqual(this.tmp),this.tmp.set(l.tanU2.x*i+l.binU2.x*h,l.tanU2.y*i+l.binU2.y*h,l.tanU2.z*i+l.binU2.z*h),this.tmplv2.subEqual(this.tmp),this.tmp.set(l.tanTU2.x*i+l.binTU2.x*h,l.tanTU2.y*i+l.binTU2.y*h,l.tanTU2.z*i+l.binTU2.z*h),this.tmpav2.subEqual(this.tmp),this.tmp.sub(this.tmplv2,this.tmplv1),t=e,(e+=i=(g.dotVectors(this.tmp,l.nor)+g.dotVectors(this.tmpav2,l.norT2)-g.dotVectors(this.tmpav1,l.norT1)-l.norTar)*l.norDen)&gt;0&amp;&amp;(e=0),i=e-t,this.tmplv1.addScaledVector(l.norU1,i),this.tmpav1.addScaledVector(l.norTU1,i),this.tmplv2.subScaledVector(l.norU2,i),this.tmpav2.subScaledVector(l.norTU2,i),l.norImp=e,l.tanImp=a,l.binImp=o,!l.last;)l=l.next;this.lv1.copy(this.tmplv1),this.lv2.copy(this.tmplv2),this.av1.copy(this.tmpav1),this.av2.copy(this.tmpav2)},postSolve:function(){for(var t,i=this.cs,s=this.num;s--;)(t=this.ps[s]).normal.copy(i.nor),t.tangent.copy(i.tan),t.binormal.copy(i.bin),t.normalImpulse=i.norImp,t.tangentImpulse=i.tanImp,t.binormalImpulse=i.binImp,t.normalDenominator=i.norDen,t.tangentDenominator=i.tanDen,t.binormalDenominator=i.binDen,i=i.next}}),Object.assign(lt.prototype,{Contact:!0,mixRestitution:function(t,i){return g.sqrt(t*i)},mixFriction:function(t,i){return g.sqrt(t*i)},updateManifold:function(){this.constraint.restitution=this.mixRestitution(this.shape1.restitution,this.shape2.restitution),this.constraint.friction=this.mixFriction(this.shape1.friction,this.shape2.friction);for(var t=this.manifold.numPoints,i=t;i--;){var s=this.buffer[i],h=this.points[i];s.lp1X=h.localPoint1.x,s.lp1Y=h.localPoint1.y,s.lp1Z=h.localPoint1.z,s.lp2X=h.localPoint2.x,s.lp2Y=h.localPoint2.y,s.lp2Z=h.localPoint2.z,s.impulse=h.normalImpulse}this.manifold.numPoints=0,this.detector.detectCollision(this.shape1,this.shape2,this.manifold);var e=this.manifold.numPoints;if(0==e)return this.touching=!1,this.close=!1,void(this.dist=g.INF);for((this.touching||this.dist&lt;.001)&amp;&amp;(this.close=!0),this.touching=!0,i=e;i--;){for(var a=(h=this.points[i]).localPoint1.x,o=h.localPoint1.y,n=h.localPoint1.z,r=h.localPoint2.x,l=h.localPoint2.y,c=h.localPoint2.z,m=-1,p=4e-4,u=t;u--;){var y=(s=this.buffer[u]).lp1X-a,x=s.lp1Y-o,d=s.lp1Z-n,f=y*y+x*x+d*d,b=(y=s.lp2X-r)*y+(x=s.lp2Y-l)*x+(d=s.lp2Z-c)*d;f&lt;b?f&lt;p&amp;&amp;(p=f,m=u):b&lt;p&amp;&amp;(p=b,m=u),p&lt;this.dist&amp;&amp;(this.dist=p)}if(-1!=m){var v=this.buffer[m];this.buffer[m]=this.buffer[--t],this.buffer[t]=v,h.normalImpulse=v.impulse,h.warmStarted=!0}else h.normalImpulse=0,h.warmStarted=!1}},attach:function(t,i){this.shape1=t,this.shape2=i,this.body1=t.parent,this.body2=i.parent,this.manifold.body1=this.body1,this.manifold.body2=this.body2,this.constraint.body1=this.body1,this.constraint.body2=this.body2,this.constraint.attach(),this.s1Link.shape=i,this.s1Link.body=this.body2,this.s2Link.shape=t,this.s2Link.body=this.body1,null!=t.contactLink?(this.s1Link.next=t.contactLink).prev=this.s1Link:this.s1Link.next=null,t.contactLink=this.s1Link,t.numContacts++,null!=i.contactLink?(this.s2Link.next=i.contactLink).prev=this.s2Link:this.s2Link.next=null,i.contactLink=this.s2Link,i.numContacts++,this.b1Link.shape=i,this.b1Link.body=this.body2,this.b2Link.shape=t,this.b2Link.body=this.body1,null!=this.body1.contactLink?(this.b1Link.next=this.body1.contactLink).prev=this.b1Link:this.b1Link.next=null,this.body1.contactLink=this.b1Link,this.body1.numContacts++,null!=this.body2.contactLink?(this.b2Link.next=this.body2.contactLink).prev=this.b2Link:this.b2Link.next=null,this.body2.contactLink=this.b2Link,this.body2.numContacts++,this.prev=null,this.next=null,this.persisting=!0,this.sleeping=this.body1.sleeping&amp;&amp;this.body2.sleeping,this.manifold.numPoints=0},detach:function(){var t=this.s1Link.prev,i=this.s1Link.next;null!==t&amp;&amp;(t.next=i),null!==i&amp;&amp;(i.prev=t),this.shape1.contactLink==this.s1Link&amp;&amp;(this.shape1.contactLink=i),this.s1Link.prev=null,this.s1Link.next=null,this.s1Link.shape=null,this.s1Link.body=null,this.shape1.numContacts--,t=this.s2Link.prev,i=this.s2Link.next,null!==t&amp;&amp;(t.next=i),null!==i&amp;&amp;(i.prev=t),this.shape2.contactLink==this.s2Link&amp;&amp;(this.shape2.contactLink=i),this.s2Link.prev=null,this.s2Link.next=null,this.s2Link.shape=null,this.s2Link.body=null,this.shape2.numContacts--,t=this.b1Link.prev,i=this.b1Link.next,null!==t&amp;&amp;(t.next=i),null!==i&amp;&amp;(i.prev=t),this.body1.contactLink==this.b1Link&amp;&amp;(this.body1.contactLink=i),this.b1Link.prev=null,this.b1Link.next=null,this.b1Link.shape=null,this.b1Link.body=null,this.body1.numContacts--,t=this.b2Link.prev,i=this.b2Link.next,null!==t&amp;&amp;(t.next=i),null!==i&amp;&amp;(i.prev=t),this.body2.contactLink==this.b2Link&amp;&amp;(this.body2.contactLink=i),this.b2Link.prev=null,this.b2Link.next=null,this.b2Link.shape=null,this.b2Link.body=null,this.body2.numContacts--,this.manifold.body1=null,this.manifold.body2=null,this.constraint.body1=null,this.constraint.body2=null,this.constraint.detach(),this.shape1=null,this.shape2=null,this.body1=null,this.body2=null}}),Object.assign(ct.prototype,{setParent:function(t){this.parent=t,this.scale=this.parent.scale,this.invScale=this.parent.invScale,this.id=this.parent.numRigidBodies,this.name||(this.name=this.id),this.updateMesh()},addShape:function(t){t.parent&amp;&amp;I(&quot;RigidBody&quot;,&quot;It is not possible that you add a shape which already has an associated body.&quot;),null!=this.shapes&amp;&amp;((this.shapes.prev=t).next=this.shapes),this.shapes=t,t.parent=this,this.parent&amp;&amp;this.parent.addShape(t),this.numShapes++},removeShape:function(t){var i=t;if(i.parent==this){var s=i.prev,h=i.next;null!=s&amp;&amp;(s.next=h),null!=h&amp;&amp;(h.prev=s),this.shapes==i&amp;&amp;(this.shapes=h),i.prev=null,i.next=null,i.parent=null,this.parent&amp;&amp;this.parent.removeShape(i),this.numShapes--}},remove:function(){this.dispose()},dispose:function(){this.parent.removeRigidBody(this)},checkContact:function(t){this.parent.checkContact(this.name,t)},setupMass:function(t,i){var s=void 0===i||i;this.type=t||2,this.isDynamic=1===this.type,this.isStatic=2===this.type,this.mass=0,this.localInertia.set(0,0,0,0,0,0,0,0,0);for(var h=new P,e=new L,a=this.shapes;null!==a;a=a.next){a.calculateMassInfo(this.massInfo);var o=this.massInfo.mass;e.addScaledVector(a.relativePosition,o),this.mass+=o,this.rotateInertia(a.relativeRotation,this.massInfo.inertia,h),this.localInertia.add(h),this.localInertia.addOffset(o,a.relativePosition)}if(this.inverseMass=1/this.mass,e.scaleEqual(this.inverseMass),s){for(this.position.add(e),a=this.shapes;null!==a;a=a.next)a.relativePosition.subEqual(e);this.localInertia.subOffset(this.mass,e)}this.inverseLocalInertia.invert(this.localInertia),2===this.type&amp;&amp;(this.inverseMass=0,this.inverseLocalInertia.set(0,0,0,0,0,0,0,0,0)),this.syncShapes(),this.awake()},awake:function(){if(this.allowSleep&amp;&amp;this.sleeping){this.sleeping=!1,this.sleepTime=0;for(var t=this.contactLink;null!=t;)t.body.sleepTime=0,t.body.sleeping=!1,t=t.next;for(var i=this.jointLink;null!=i;)i.body.sleepTime=0,i.body.sleeping=!1,i=i.next;for(var s=this.shapes;null!=s;s=s.next)s.updateProxy()}},sleep:function(){if(this.allowSleep&amp;&amp;!this.sleeping){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.sleepPosition.copy(this.position),this.sleepOrientation.copy(this.orientation),this.sleepTime=0,this.sleeping=!0;for(var t=this.shapes;null!=t;t=t.next)t.updateProxy()}},testWakeUp:function(){(this.linearVelocity.testZero()||this.angularVelocity.testZero()||this.position.testDiff(this.sleepPosition)||this.orientation.testDiff(this.sleepOrientation))&amp;&amp;this.awake()},isLonely:function(){return 0==this.numJoints&amp;&amp;0==this.numContacts},updatePosition:function(t){switch(this.type){case 2:this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.controlPos&amp;&amp;(this.position.copy(this.newPosition),this.controlPos=!1),this.controlRot&amp;&amp;(this.orientation.copy(this.newOrientation),this.controlRot=!1);break;case 1:this.isKinematic&amp;&amp;(this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0)),this.controlPos&amp;&amp;(this.linearVelocity.subVectors(this.newPosition,this.position).multiplyScalar(1/t),this.controlPos=!1),this.controlRot&amp;&amp;(this.angularVelocity.copy(this.getAxis()),this.orientation.copy(this.newOrientation),this.controlRot=!1),this.position.addScaledVector(this.linearVelocity,t),this.orientation.addTime(this.angularVelocity,t),this.updateMesh();break;default:I(&quot;RigidBody&quot;,&quot;Invalid type.&quot;)}this.syncShapes(),this.updateMesh()},getAxis:function(){return new L(0,1,0).applyMatrix3(this.inverseLocalInertia,!0).normalize()},rotateInertia:function(t,i,s){this.tmpInertia.multiplyMatrices(t,i),s.multiplyMatrices(this.tmpInertia,t,!0)},syncShapes:function(){this.rotation.setQuat(this.orientation),this.rotateInertia(this.rotation,this.inverseLocalInertia,this.inverseInertia);for(var t=this.shapes;null!=t;t=t.next)t.position.copy(t.relativePosition).applyMatrix3(this.rotation,!0).add(this.position),t.rotation.multiplyMatrices(this.rotation,t.relativeRotation),t.updateProxy()},applyImpulse:function(t,i){this.linearVelocity.addScaledVector(i,this.inverseMass);var s=(new L).copy(t).sub(this.position).cross(i).applyMatrix3(this.inverseInertia,!0);this.angularVelocity.add(s)},setPosition:function(t){this.newPosition.copy(t).multiplyScalar(this.invScale),this.controlPos=!0,this.isKinematic||(this.isKinematic=!0)},setQuaternion:function(t){this.newOrientation.set(t.x,t.y,t.z,t.w),this.controlRot=!0,this.isKinematic||(this.isKinematic=!0)},setRotation:function(t){this.newOrientation=(new S).setFromEuler(t.x*g.degtorad,t.y*g.degtorad,t.z*g.degtorad),this.controlRot=!0},resetPosition:function(t,i,s){this.linearVelocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.position.set(t,i,s).multiplyScalar(this.invScale),this.awake()},resetQuaternion:function(t){this.angularVelocity.set(0,0,0),this.orientation=new S(t.x,t.y,t.z,t.w),this.awake()},resetRotation:function(t,i,s){this.angularVelocity.set(0,0,0),this.orientation=(new S).setFromEuler(t*g.degtorad,i*g.degtorad,s*g.degtorad),this.awake()},getPosition:function(){return this.pos},getQuaternion:function(){return this.quaternion},connectMesh:function(t){this.mesh=t,this.updateMesh()},updateMesh:function(){this.pos.scale(this.position,this.scale),this.quaternion.copy(this.orientation),null!==this.mesh&amp;&amp;(this.mesh.position.copy(this.getPosition()),this.mesh.quaternion.copy(this.getQuaternion()))}}),Object.assign(pt.prototype,{BroadPhase:!0,createProxy:function(t){I(&quot;BroadPhase&quot;,&quot;Inheritance error.&quot;)},addProxy:function(t){I(&quot;BroadPhase&quot;,&quot;Inheritance error.&quot;)},removeProxy:function(t){I(&quot;BroadPhase&quot;,&quot;Inheritance error.&quot;)},isAvailablePair:function(t,i){var s,h=t.parent,e=i.parent;if(h==e||!h.isDynamic&amp;&amp;!e.isDynamic||0==(t.belongsTo&amp;i.collidesWith)||0==(i.belongsTo&amp;t.collidesWith))return!1;for(s=h.numJoints&lt;e.numJoints?h.jointLink:e.jointLink;null!==s;){var a=s.joint;if(!a.allowCollision&amp;&amp;(a.body1==h&amp;&amp;a.body2==e||a.body1==e&amp;&amp;a.body2==h))return!1;s=s.next}return!0},detectPairs:function(){this.pairs=[],this.numPairs=0,this.numPairChecks=0,this.collectPairs()},collectPairs:function(){},addPair:function(t,i){var s=new mt(t,i);this.pairs.push(s),this.numPairs++}});var ut=0;function yt(t){this.shape=t,this.aabb=t.aabb}function xt(t){yt.call(this,t),this.id=ut++}function dt(){pt.call(this),this.types=r,this.proxies=[]}function ft(){this.numElements=0,this.bufferSize=256,this.elements=[],this.elements.length=this.bufferSize,this.stack=new Float32Array(64)}function bt(t,i){this.proxy=t,this.pair=null,this.min1=null,this.max1=null,this.min2=null,this.max2=null,this.max=i,this.value=0}function vt(t,i){yt.call(this,i),this.belongsTo=0,this.max=[],this.min=[],this.sap=t,this.min[0]=new bt(this,!1),this.max[0]=new bt(this,!0),this.min[1]=new bt(this,!1),this.max[1]=new bt(this,!0),this.min[2]=new bt(this,!1),this.max[2]=new bt(this,!0),this.max[0].pair=this.min[0],this.max[1].pair=this.min[1],this.max[2].pair=this.min[2],this.min[0].min1=this.min[1],this.min[0].max1=this.max[1],this.min[0].min2=this.min[2],this.min[0].max2=this.max[2],this.min[1].min1=this.min[0],this.min[1].max1=this.max[0],this.min[1].min2=this.min[2],this.min[1].max2=this.max[2],this.min[2].min1=this.min[0],this.min[2].max1=this.max[0],this.min[2].min2=this.min[1],this.min[2].max2=this.max[1]}function zt(){pt.call(this),this.types=l,this.numElementsD=0,this.numElementsS=0,this.axesD=[new ft,new ft,new ft],this.axesS=[new ft,new ft,new ft],this.index1=0,this.index2=1}function Nt(){this.child1=null,this.child2=null,this.parent=null,this.proxy=null,this.height=0,this.aabb=new T}function kt(){this.root=null,this.freeNodes=[],this.freeNodes.length=16384,this.numFreeNodes=0,this.aabb=new T}function wt(t){yt.call(this,t),this.leaf=new Nt,this.leaf.proxy=this}function Mt(){pt.call(this),this.types=c,this.tree=new kt,this.stack=[],this.leaves=[],this.numLeaves=0}function gt(){this.flip=!1}function It(){gt.call(this),this.clipVertices1=new Float32Array(24),this.clipVertices2=new Float32Array(24),this.used=new Float32Array(8),this.INF=1/0}function Vt(t){gt.call(this),this.flip=t}function Lt(){gt.call(this)}function St(t){gt.call(this),this.flip=t}function Pt(t){gt.call(this),this.flip=t}function Tt(){gt.call(this)}function At(t){gt.call(this),this.flip=t,this.n=new L,this.p=new L}function jt(t){gt.call(this),this.flip=t,this.n=new L,this.p=new L,this.dix=new L,this.diy=new L,this.diz=new L,this.cc=new L,this.cc2=new L}function Ct(t){switch(t instanceof Object||(t={}),this.scale=t.worldscale||1,this.invScale=1/this.scale,this.timeStep=t.timestep||.01666,this.timerate=1e3*this.timeStep,this.timer=null,this.preLoop=null,this.postLoop=null,this.numIterations=t.iterations||8,t.broadphase||2){case 1:this.broadPhase=new dt;break;case 2:default:this.broadPhase=new zt;break;case 3:this.broadPhase=new Mt}this.Btypes=[&quot;None&quot;,&quot;BruteForce&quot;,&quot;Sweep &amp; Prune&quot;,&quot;Bounding Volume Tree&quot;],this.broadPhaseType=this.Btypes[t.broadphase||2],this.performance=null,this.isStat=void 0!==t.info&amp;&amp;t.info,this.isStat&amp;&amp;(this.performance=new V(this)),this.enableRandomizer=void 0===t.random||t.random,this.rigidBodies=null,this.numRigidBodies=0,this.contacts=null,this.unusedContacts=null,this.numContacts=0,this.numContactPoints=0,this.joints=null,this.numJoints=0,this.numIslands=0,this.gravity=new L(0,-9.8,0),void 0!==t.gravity&amp;&amp;this.gravity.fromArray(t.gravity);this.detectors=[],this.detectors.length=5;for(var i=5;i--;)this.detectors[i]=[],this.detectors[i].length=5;this.detectors[u][u]=new Tt,this.detectors[u][y]=new St(!1),this.detectors[y][u]=new St(!0),this.detectors[y][y]=new It,this.detectors[x][x]=new Lt,this.detectors[x][y]=new Vt(!0),this.detectors[y][x]=new Vt(!1),this.detectors[x][u]=new Pt(!0),this.detectors[u][x]=new Pt(!1),this.detectors[d][u]=new At(!0),this.detectors[u][d]=new At(!1),this.detectors[d][y]=new jt(!0),this.detectors[y][d]=new jt(!1),this.randX=65535,this.randA=98765,this.randB=123456789,this.islandRigidBodies=[],this.islandStack=[],this.islandConstraints=[]}Object.assign(yt.prototype,{Proxy:!0,update:function(){I(&quot;Proxy&quot;,&quot;Inheritance error.&quot;)}}),xt.prototype=Object.assign(Object.create(yt.prototype),{constructor:xt,update:function(){}}),dt.prototype=Object.assign(Object.create(pt.prototype),{constructor:dt,createProxy:function(t){return new xt(t)},addProxy:function(t){this.proxies.push(t)},removeProxy:function(t){var i=this.proxies.indexOf(t);i&gt;-1&amp;&amp;this.proxies.splice(i,1)},collectPairs:function(){var t,i,s,h=0,e=this.proxies,a=e.length;for(this.numPairChecks=a*(a-1)&gt;&gt;1;h&lt;a;)for(i=e[h++],t=h+1;t&lt;a;)s=e[t++],!i.aabb.intersectTest(s.aabb)&amp;&amp;this.isAvailablePair(i.shape,s.shape)&amp;&amp;this.addPair(i.shape,s.shape)}}),Object.assign(ft.prototype,{SAPAxis:!0,addElements:function(t,i){if(this.numElements+2&gt;=this.bufferSize){this.bufferSize*=2;for(var s=[],h=this.numElements;h--;)s[h]=this.elements[h]}this.elements[this.numElements++]=t,this.elements[this.numElements++]=i},removeElements:function(t,i){for(var s=-1,h=-1,e=0,a=this.numElements;e&lt;a;e++){var o=this.elements[e];if(o==t||o==i){if(-1!=s){h=e;break}s=e}}for(e=s+1,a=h;e&lt;a;e++)this.elements[e-1]=this.elements[e];for(e=h+1,a=this.numElements;e&lt;a;e++)this.elements[e-2]=this.elements[e];this.elements[--this.numElements]=null,this.elements[--this.numElements]=null},sort:function(){for(var t=0,i=1;this.numElements&gt;&gt;i!=0;)i++;i=i*this.numElements&gt;&gt;2,t=0;for(var s=!1,h=this.elements,e=1,a=this.numElements;e&lt;a;e++){var o=h[e],n=o.value,r=h[e-1];if(r.value&gt;n){var l=e;do{if(h[l]=r,0==--l)break;r=h[l-1]}while(r.value&gt;n);if(h[l]=o,(t+=e-l)&gt;i){s=!0;break}}}if(s){t=2;var c=this.stack;for(c[0]=0,c[1]=this.numElements-1;t&gt;0;){var m=c[--t],p=c[--t],u=m-p;if(u&gt;16){var y=p+g.floor(.5*u);for(o=h[y],h[y]=h[m],h[m]=o,n=o.value,e=p-1,l=m;;){var x,d;do{x=h[++e]}while(x.value&lt;n);do{d=h[--l]}while(n&lt;d.value&amp;&amp;l!=p);if(e&gt;=l)break;h[e]=d,h[l]=x}h[m]=h[e],h[e]=o,e-p&gt;m-e?(c[t++]=p,c[t++]=e-1,c[t++]=e+1,c[t++]=m):(c[t++]=e+1,c[t++]=m,c[t++]=p,c[t++]=e-1)}else for(e=p+1;e&lt;=m;e++)if(n=(o=h[e]).value,(r=h[e-1]).value&gt;n){l=e;do{if(h[l]=r,0==--l)break;r=h[l-1]}while(r.value&gt;n);h[l]=o}}}},calculateTestCount:function(){for(var t=1,i=0,s=1,h=this.numElements;s&lt;h;s++)this.elements[s].max?t--:(i+=t,t++);return i}}),vt.prototype=Object.assign(Object.create(yt.prototype),{constructor:vt,isDynamic:function(){var t=this.shape.parent;return t.isDynamic&amp;&amp;!t.sleeping},update:function(){var t=this.aabb.elements;this.min[0].value=t[0],this.min[1].value=t[1],this.min[2].value=t[2],this.max[0].value=t[3],this.max[1].value=t[4],this.max[2].value=t[5],(1==this.belongsTo&amp;&amp;!this.isDynamic()||2==this.belongsTo&amp;&amp;this.isDynamic())&amp;&amp;(this.sap.removeProxy(this),this.sap.addProxy(this))}}),zt.prototype=Object.assign(Object.create(pt.prototype),{constructor:zt,createProxy:function(t){return new vt(this,t)},addProxy:function(t){var i=t;i.isDynamic()?(this.axesD[0].addElements(i.min[0],i.max[0]),this.axesD[1].addElements(i.min[1],i.max[1]),this.axesD[2].addElements(i.min[2],i.max[2]),i.belongsTo=1,this.numElementsD+=2):(this.axesS[0].addElements(i.min[0],i.max[0]),this.axesS[1].addElements(i.min[1],i.max[1]),this.axesS[2].addElements(i.min[2],i.max[2]),i.belongsTo=2,this.numElementsS+=2)},removeProxy:function(t){var i=t;if(0!=i.belongsTo){switch(i.belongsTo){case 1:this.axesD[0].removeElements(i.min[0],i.max[0]),this.axesD[1].removeElements(i.min[1],i.max[1]),this.axesD[2].removeElements(i.min[2],i.max[2]),this.numElementsD-=2;break;case 2:this.axesS[0].removeElements(i.min[0],i.max[0]),this.axesS[1].removeElements(i.min[1],i.max[1]),this.axesS[2].removeElements(i.min[2],i.max[2]),this.numElementsS-=2}i.belongsTo=0}},collectPairs:function(){if(0!=this.numElementsD){var t,i,s,h,e=this.axesD[this.index1],a=this.axesD[this.index2];e.sort(),a.sort(),e.calculateTestCount()&lt;=a.calculateTestCount()?((a=this.axesS[this.index1]).sort(),t=e.elements,i=a.elements):((e=this.axesS[this.index2]).sort(),t=a.elements,i=e.elements,this.index1^=this.index2,this.index2^=this.index1,this.index1^=this.index2);for(var o=0,n=0;o&lt;this.numElementsD;){var r,l;if(n==this.numElementsS)r=t[o],l=!0,o++;else{var c=t[o],m=i[n];c.value&lt;m.value?(r=c,l=!0,o++):(r=m,l=!1,n++)}if(r.max){var p=r.pair;if(l){if(p==s){s=s.pair;continue}r=s}else{if(p==h){h=h.pair;continue}r=h}for(;r;){if((b=r.pair)==p){r.pair=b.pair;break}r=b}}else{for(var u=r.proxy.shape,y=r.min1.value,x=r.max1.value,d=r.min2.value,f=r.max2.value,b=s;null!=b;b=b.pair){var v=b.proxy.shape;this.numPairChecks++,y&gt;b.max1.value||x&lt;b.min1.value||d&gt;b.max2.value||f&lt;b.min2.value||!this.isAvailablePair(u,v)||this.addPair(u,v)}if(l){for(b=h;null!=b;b=b.pair)v=b.proxy.shape,this.numPairChecks++,y&gt;b.max1.value||x&lt;b.min1.value||d&gt;b.max2.value||f&lt;b.min2.value||!this.isAvailablePair(u,v)||this.addPair(u,v);r.pair=s,s=r}else r.pair=h,h=r}}this.index2=3^(this.index1|this.index2)}}}),Object.assign(kt.prototype,{DBVT:!0,moveLeaf:function(t){this.deleteLeaf(t),this.insertLeaf(t)},insertLeaf:function(t){if(null!=this.root){for(var i,s,h=t.aabb,e=this.root;null==e.proxy;){var a=e.child1,o=e.child2,n=e.aabb,r=a.aabb,l=o.aabb;i=n.surfaceArea(),this.aabb.combine(h,n);var c=2*(s=this.aabb.surfaceArea()),m=2*(s-i),p=m;this.aabb.combine(h,r),null!=a.proxy?p+=this.aabb.surfaceArea():p+=this.aabb.surfaceArea()-r.surfaceArea();var u=m;if(this.aabb.combine(h,l),null!=o.proxy?u+=this.aabb.surfaceArea():u+=this.aabb.surfaceArea()-l.surfaceArea(),p&lt;u){if(c&lt;p)break;e=a}else{if(c&lt;u)break;e=o}}var y,x=e.parent;(y=this.numFreeNodes&gt;0?this.freeNodes[--this.numFreeNodes]:new Nt).parent=x,y.child1=t,y.child2=e,y.aabb.combine(t.aabb,e.aabb),y.height=e.height+1,e.parent=y,t.parent=y,e==this.root?this.root=y:x.child1==e?x.child1=y:x.child2=y;do{y=this.balance(y),this.fix(y),y=y.parent}while(null!=y)}else this.root=t},getBalance:function(t){return null!=t.proxy?0:t.child1.height-t.child2.height},deleteLeaf:function(t){if(t!=this.root){var i,s=t.parent;if(i=s.child1==t?s.child2:s.child1,s==this.root)return this.root=i,void(i.parent=null);var h=s.parent;i.parent=h,h.child1==s?h.child1=i:h.child2=i,this.numFreeNodes&lt;16384&amp;&amp;(this.freeNodes[this.numFreeNodes++]=s);do{h=this.balance(h),this.fix(h),h=h.parent}while(null!=h)}else this.root=null},balance:function(t){var i=t.height;if(i&lt;2)return t;var s,h=t.parent,e=t.child1,a=t.child2,o=e.height,n=a.height,r=o-n;if(r&gt;1){var l=e.child1,c=e.child2,m=l.height,p=c.height;return m&gt;p?(e.child2=t,t.parent=e,t.child1=c,c.parent=t,t.aabb.combine(c.aabb,a.aabb),s=p-n,t.height=p-(s&amp;s&gt;&gt;31)+1,e.aabb.combine(l.aabb,t.aabb),s=m-i,e.height=m-(s&amp;s&gt;&gt;31)+1):(e.child1=t,t.parent=e,t.child1=l,l.parent=t,t.aabb.combine(l.aabb,a.aabb),s=m-n,t.height=m-(s&amp;s&gt;&gt;31)+1,e.aabb.combine(t.aabb,c.aabb),s=i-p,e.height=i-(s&amp;s&gt;&gt;31)+1),null!=h?h.child1==t?h.child1=e:h.child2=e:this.root=e,e.parent=h,e}if(r&lt;-1){var u=a.child1,y=a.child2,x=u.height,d=y.height;return x&gt;d?(a.child2=t,t.parent=a,t.child2=y,y.parent=t,t.aabb.combine(e.aabb,y.aabb),s=o-d,t.height=o-(s&amp;s&gt;&gt;31)+1,a.aabb.combine(u.aabb,t.aabb),s=x-i,a.height=x-(s&amp;s&gt;&gt;31)+1):(a.child1=t,t.parent=a,t.child2=u,u.parent=t,t.aabb.combine(e.aabb,u.aabb),s=o-x,t.height=o-(s&amp;s&gt;&gt;31)+1,a.aabb.combine(t.aabb,y.aabb),s=i-d,a.height=i-(s&amp;s&gt;&gt;31)+1),null!=h?h.child1==t?h.child1=a:h.child2=a:this.root=a,a.parent=h,a}return t},fix:function(t){var i=t.child1,s=t.child2;t.aabb.combine(i.aabb,s.aabb),t.height=i.height&lt;s.height?s.height+1:i.height+1}}),wt.prototype=Object.assign(Object.create(yt.prototype),{constructor:wt,update:function(){}}),Mt.prototype=Object.assign(Object.create(pt.prototype),{constructor:Mt,createProxy:function(t){return new wt(t)},addProxy:function(t){this.tree.insertLeaf(t.leaf),this.leaves.push(t.leaf),this.numLeaves++},removeProxy:function(t){this.tree.deleteLeaf(t.leaf);var i=this.leaves.indexOf(t.leaf);i&gt;-1&amp;&amp;(this.leaves.splice(i,1),this.numLeaves--)},collectPairs:function(){if(!(this.numLeaves&lt;2))for(var t,i=this.numLeaves;i--;)(t=this.leaves[i]).proxy.aabb.intersectTestTwo(t.aabb)&amp;&amp;(t.aabb.copy(t.proxy.aabb,.1),this.tree.deleteLeaf(t),this.tree.insertLeaf(t),this.collide(t,this.tree.root))},collide:function(t,i){var s,h,e,a,o,n,r=2;for(this.stack[0]=t,this.stack[1]=i;r&gt;0;)if(e=this.stack[--r],a=this.stack[--r],o=null!=e.proxy,n=null!=a.proxy,this.numPairChecks++,o&amp;&amp;n){if((s=e.proxy.shape)==(h=a.proxy.shape)||s.aabb.intersectTest(h.aabb)||!this.isAvailablePair(s,h))continue;this.addPair(s,h)}else{if(e.aabb.intersectTest(a.aabb))continue;n||!o&amp;&amp;e.aabb.surfaceArea()&gt;a.aabb.surfaceArea()?(this.stack[r++]=e.child1,this.stack[r++]=a,this.stack[r++]=e.child2,this.stack[r++]=a):(this.stack[r++]=e,this.stack[r++]=a.child1,this.stack[r++]=e,this.stack[r++]=a.child2)}}}),Object.assign(gt.prototype,{CollisionDetector:!0,detectCollision:function(t,i,s){I(&quot;CollisionDetector&quot;,&quot;Inheritance error.&quot;)}}),It.prototype=Object.assign(Object.create(gt.prototype),{constructor:It,detectCollision:function(t,i,s){var h,e;t.id&lt;i.id?(h=t,e=i):(h=i,e=t);var a,o,n,r,l,c,m,p,u,y,x,d,f,b,v,z,N,k,w,M,I,V,L,S,P,T,A,j,C,O,D,E,B,F,q,U=h.elements,R=e.elements,_=h.dimentions,J=e.dimentions,W=h.position,H=e.position,Q=W.x,X=W.y,Y=W.z,Z=H.x,K=H.y,G=H.z,$=Z-Q,tt=K-X,it=G-Y,st=h.halfWidth,ht=h.halfHeight,et=h.halfDepth,at=e.halfWidth,ot=e.halfHeight,nt=e.halfDepth,rt=_[0],lt=_[1],ct=_[2],mt=_[3],pt=_[4],ut=_[5],yt=_[6],xt=_[7],dt=_[8],ft=_[9],bt=_[10],vt=_[11],zt=_[12],Nt=_[13],kt=_[14],wt=_[15],Mt=_[16],gt=_[17],It=J[0],Vt=J[1],Lt=J[2],St=J[3],Pt=J[4],Tt=J[5],At=J[6],jt=J[7],Ct=J[8],Ot=J[9],Dt=J[10],Et=J[11],Bt=J[12],Ft=J[13],qt=J[14],Ut=J[15],Rt=J[16],_t=J[17],Jt=lt*Lt-ct*Vt,Wt=ct*It-rt*Lt,Ht=rt*Vt-lt*It,Qt=lt*Tt-ct*Pt,Xt=ct*St-rt*Tt,Yt=rt*Pt-lt*St,Zt=lt*Ct-ct*jt,Kt=ct*At-rt*Ct,Gt=rt*jt-lt*At,$t=pt*Lt-ut*Vt,ti=ut*It-mt*Lt,ii=mt*Vt-pt*It,si=pt*Tt-ut*Pt,hi=ut*St-mt*Tt,ei=mt*Pt-pt*St,ai=pt*Ct-ut*jt,oi=ut*At-mt*Ct,ni=mt*jt-pt*At,ri=xt*Lt-dt*Vt,li=dt*It-yt*Lt,ci=yt*Vt-xt*It,mi=xt*Tt-dt*Pt,pi=dt*St-yt*Tt,ui=yt*Pt-xt*St,yi=xt*Ct-dt*jt,xi=dt*At-yt*Ct,di=yt*jt-xt*At,fi=!1,bi=!1,vi=!1,zi=!1,Ni=!1,ki=!1,wi=!1,Mi=!1,gi=!1;if((a=(D=rt*$+lt*tt+ct*it)&gt;0)||(D=-D),(B=rt*It+lt*Vt+ct*Lt)&lt;0&amp;&amp;(B=-B),(F=rt*St+lt*Pt+ct*Tt)&lt;0&amp;&amp;(F=-F),(q=rt*At+lt*jt+ct*Ct)&lt;0&amp;&amp;(q=-q),!((z=D-(E=st)-(B*at+F*ot+q*nt))&gt;0||((o=(D=mt*$+pt*tt+ut*it)&gt;0)||(D=-D),(B=mt*It+pt*Vt+ut*Lt)&lt;0&amp;&amp;(B=-B),(F=mt*St+pt*Pt+ut*Tt)&lt;0&amp;&amp;(F=-F),(q=mt*At+pt*jt+ut*Ct)&lt;0&amp;&amp;(q=-q),(N=D-(E=ht)-(B*at+F*ot+q*nt))&gt;0||((n=(D=yt*$+xt*tt+dt*it)&gt;0)||(D=-D),(B=yt*It+xt*Vt+dt*Lt)&lt;0&amp;&amp;(B=-B),(F=yt*St+xt*Pt+dt*Tt)&lt;0&amp;&amp;(F=-F),(q=yt*At+xt*jt+dt*Ct)&lt;0&amp;&amp;(q=-q),(k=D-(E=et)-(B*at+F*ot+q*nt))&gt;0||((r=(D=It*$+Vt*tt+Lt*it)&gt;0)||(D=-D),(B=It*rt+Vt*lt+Lt*ct)&lt;0&amp;&amp;(B=-B),(F=It*mt+Vt*pt+Lt*ut)&lt;0&amp;&amp;(F=-F),(q=It*yt+Vt*xt+Lt*dt)&lt;0&amp;&amp;(q=-q),(w=1*(D-(E=B*st+F*ht+q*et)-at))&gt;0||((l=(D=St*$+Pt*tt+Tt*it)&gt;0)||(D=-D),(B=St*rt+Pt*lt+Tt*ct)&lt;0&amp;&amp;(B=-B),(F=St*mt+Pt*pt+Tt*ut)&lt;0&amp;&amp;(F=-F),(q=St*yt+Pt*xt+Tt*dt)&lt;0&amp;&amp;(q=-q),(M=1*(D-(E=B*st+F*ht+q*et)-ot))&gt;0||((c=(D=At*$+jt*tt+Ct*it)&gt;0)||(D=-D),(B=At*rt+jt*lt+Ct*ct)&lt;0&amp;&amp;(B=-B),(F=At*mt+jt*pt+Ct*ut)&lt;0&amp;&amp;(F=-F),(q=At*yt+jt*xt+Ct*dt)&lt;0&amp;&amp;(q=-q),(I=1*(D-(E=B*st+F*ht+q*et)-nt))&gt;0))))))){if((D=Jt*Jt+Wt*Wt+Ht*Ht)&gt;1e-5){if((m=(D=(Jt*=D=1/g.sqrt(D))*$+(Wt*=D)*tt+(Ht*=D)*it)&gt;0)||(D=-D),(B=Jt*mt+Wt*pt+Ht*ut)&lt;0&amp;&amp;(B=-B),(F=Jt*yt+Wt*xt+Ht*dt)&lt;0&amp;&amp;(F=-F),E=B*ht+F*et,(B=Jt*St+Wt*Pt+Ht*Tt)&lt;0&amp;&amp;(B=-B),(F=Jt*At+Wt*jt+Ht*Ct)&lt;0&amp;&amp;(F=-F),(V=D-E-(B*ot+F*nt))&gt;0)return}else m=!1,V=0,fi=!0;if((D=Qt*Qt+Xt*Xt+Yt*Yt)&gt;1e-5){if((p=(D=(Qt*=D=1/g.sqrt(D))*$+(Xt*=D)*tt+(Yt*=D)*it)&gt;0)||(D=-D),(B=Qt*mt+Xt*pt+Yt*ut)&lt;0&amp;&amp;(B=-B),(F=Qt*yt+Xt*xt+Yt*dt)&lt;0&amp;&amp;(F=-F),E=B*ht+F*et,(B=Qt*It+Xt*Vt+Yt*Lt)&lt;0&amp;&amp;(B=-B),(F=Qt*At+Xt*jt+Yt*Ct)&lt;0&amp;&amp;(F=-F),(L=D-E-(B*at+F*nt))&gt;0)return}else p=!1,L=0,bi=!0;if((D=Zt*Zt+Kt*Kt+Gt*Gt)&gt;1e-5){if((u=(D=(Zt*=D=1/g.sqrt(D))*$+(Kt*=D)*tt+(Gt*=D)*it)&gt;0)||(D=-D),(B=Zt*mt+Kt*pt+Gt*ut)&lt;0&amp;&amp;(B=-B),(F=Zt*yt+Kt*xt+Gt*dt)&lt;0&amp;&amp;(F=-F),E=B*ht+F*et,(B=Zt*It+Kt*Vt+Gt*Lt)&lt;0&amp;&amp;(B=-B),(F=Zt*St+Kt*Pt+Gt*Tt)&lt;0&amp;&amp;(F=-F),(S=D-E-(B*at+F*ot))&gt;0)return}else u=!1,S=0,vi=!0;if((D=$t*$t+ti*ti+ii*ii)&gt;1e-5){if((y=(D=($t*=D=1/g.sqrt(D))*$+(ti*=D)*tt+(ii*=D)*it)&gt;0)||(D=-D),(B=$t*rt+ti*lt+ii*ct)&lt;0&amp;&amp;(B=-B),(F=$t*yt+ti*xt+ii*dt)&lt;0&amp;&amp;(F=-F),E=B*st+F*et,(B=$t*St+ti*Pt+ii*Tt)&lt;0&amp;&amp;(B=-B),(F=$t*At+ti*jt+ii*Ct)&lt;0&amp;&amp;(F=-F),(P=D-E-(B*ot+F*nt))&gt;0)return}else y=!1,P=0,zi=!0;if((D=si*si+hi*hi+ei*ei)&gt;1e-5){if((x=(D=(si*=D=1/g.sqrt(D))*$+(hi*=D)*tt+(ei*=D)*it)&gt;0)||(D=-D),(B=si*rt+hi*lt+ei*ct)&lt;0&amp;&amp;(B=-B),(F=si*yt+hi*xt+ei*dt)&lt;0&amp;&amp;(F=-F),E=B*st+F*et,(B=si*It+hi*Vt+ei*Lt)&lt;0&amp;&amp;(B=-B),(F=si*At+hi*jt+ei*Ct)&lt;0&amp;&amp;(F=-F),(T=D-E-(B*at+F*nt))&gt;0)return}else x=!1,T=0,Ni=!0;if((D=ai*ai+oi*oi+ni*ni)&gt;1e-5){if((d=(D=(ai*=D=1/g.sqrt(D))*$+(oi*=D)*tt+(ni*=D)*it)&gt;0)||(D=-D),(B=ai*rt+oi*lt+ni*ct)&lt;0&amp;&amp;(B=-B),(F=ai*yt+oi*xt+ni*dt)&lt;0&amp;&amp;(F=-F),E=B*st+F*et,(B=ai*It+oi*Vt+ni*Lt)&lt;0&amp;&amp;(B=-B),(F=ai*St+oi*Pt+ni*Tt)&lt;0&amp;&amp;(F=-F),(A=D-E-(B*at+F*ot))&gt;0)return}else d=!1,A=0,ki=!0;if((D=ri*ri+li*li+ci*ci)&gt;1e-5){if((f=(D=(ri*=D=1/g.sqrt(D))*$+(li*=D)*tt+(ci*=D)*it)&gt;0)||(D=-D),(B=ri*rt+li*lt+ci*ct)&lt;0&amp;&amp;(B=-B),(F=ri*mt+li*pt+ci*ut)&lt;0&amp;&amp;(F=-F),E=B*st+F*ht,(B=ri*St+li*Pt+ci*Tt)&lt;0&amp;&amp;(B=-B),(F=ri*At+li*jt+ci*Ct)&lt;0&amp;&amp;(F=-F),(j=D-E-(B*ot+F*nt))&gt;0)return}else f=!1,j=0,wi=!0;if((D=mi*mi+pi*pi+ui*ui)&gt;1e-5){if((b=(D=(mi*=D=1/g.sqrt(D))*$+(pi*=D)*tt+(ui*=D)*it)&gt;0)||(D=-D),(B=mi*rt+pi*lt+ui*ct)&lt;0&amp;&amp;(B=-B),(F=mi*mt+pi*pt+ui*ut)&lt;0&amp;&amp;(F=-F),E=B*st+F*ht,(B=mi*It+pi*Vt+ui*Lt)&lt;0&amp;&amp;(B=-B),(F=mi*At+pi*jt+ui*Ct)&lt;0&amp;&amp;(F=-F),(C=D-E-(B*at+F*nt))&gt;0)return}else b=!1,C=0,Mi=!0;if((D=yi*yi+xi*xi+di*di)&gt;1e-5){if((v=(D=(yi*=D=1/g.sqrt(D))*$+(xi*=D)*tt+(di*=D)*it)&gt;0)||(D=-D),(B=yi*rt+xi*lt+di*ct)&lt;0&amp;&amp;(B=-B),(F=yi*mt+xi*pt+di*ut)&lt;0&amp;&amp;(F=-F),E=B*st+F*ht,(B=yi*It+xi*Vt+di*Lt)&lt;0&amp;&amp;(B=-B),(F=yi*St+xi*Pt+di*Tt)&lt;0&amp;&amp;(F=-F),(O=D-E-(B*at+F*ot))&gt;0)return}else v=!1,O=0,gi=!0;var Ii=z,Vi=z,Li=0,Si=a;N&gt;Vi&amp;&amp;(Ii=N,Vi=N,Li=1,Si=o),k&gt;Vi&amp;&amp;(Ii=k,Vi=k,Li=2,Si=n),w&gt;Vi&amp;&amp;(Ii=w,Vi=w,Li=3,Si=r),M&gt;Vi&amp;&amp;(Ii=M,Vi=M,Li=4,Si=l),I&gt;Vi&amp;&amp;(Ii=I,Vi=I,Li=5,Si=c),V-.01&gt;Vi&amp;&amp;!fi&amp;&amp;(Ii=V,Vi=V-.01,Li=6,Si=m),L-.01&gt;Vi&amp;&amp;!bi&amp;&amp;(Ii=L,Vi=L-.01,Li=7,Si=p),S-.01&gt;Vi&amp;&amp;!vi&amp;&amp;(Ii=S,Vi=S-.01,Li=8,Si=u),P-.01&gt;Vi&amp;&amp;!zi&amp;&amp;(Ii=P,Vi=P-.01,Li=9,Si=y),T-.01&gt;Vi&amp;&amp;!Ni&amp;&amp;(Ii=T,Vi=T-.01,Li=10,Si=x),A-.01&gt;Vi&amp;&amp;!ki&amp;&amp;(Ii=A,Vi=A-.01,Li=11,Si=d),j-.01&gt;Vi&amp;&amp;!wi&amp;&amp;(Ii=j,Vi=j-.01,Li=12,Si=f),C-.01&gt;Vi&amp;&amp;!Mi&amp;&amp;(Ii=C,Vi=C-.01,Li=13,Si=b),O-.01&gt;Vi&amp;&amp;!gi&amp;&amp;(Ii=O,Li=14,Si=v);var Pi=0,Ti=0,Ai=0,ji=0,Ci=0,Oi=0,Di=0,Ei=0,Bi=0,Fi=0,qi=0,Ui=0,Ri=0,_i=0,Ji=0,Wi=0,Hi=0,Qi=0,Xi=!1;if(0==Li?(Si?(Fi=Q+ft,qi=X+bt,Ui=Y+vt,Pi=rt,Ti=lt,Ai=ct):(Fi=Q-ft,qi=X-bt,Ui=Y-vt,Pi=-rt,Ti=-lt,Ai=-ct),Ri=zt,_i=Nt,Ji=kt,ji=-mt,Ci=-pt,Oi=-ut,Wi=wt,Hi=Mt,Qi=gt,Di=-yt,Ei=-xt,Bi=-dt):1==Li?(Si?(Fi=Q+zt,qi=X+Nt,Ui=Y+kt,Pi=mt,Ti=pt,Ai=ut):(Fi=Q-zt,qi=X-Nt,Ui=Y-kt,Pi=-mt,Ti=-pt,Ai=-ut),Ri=ft,_i=bt,Ji=vt,ji=-rt,Ci=-lt,Oi=-ct,Wi=wt,Hi=Mt,Qi=gt,Di=-yt,Ei=-xt,Bi=-dt):2==Li?(Si?(Fi=Q+wt,qi=X+Mt,Ui=Y+gt,Pi=yt,Ti=xt,Ai=dt):(Fi=Q-wt,qi=X-Mt,Ui=Y-gt,Pi=-yt,Ti=-xt,Ai=-dt),Ri=ft,_i=bt,Ji=vt,ji=-rt,Ci=-lt,Oi=-ct,Wi=zt,Hi=Nt,Qi=kt,Di=-mt,Ei=-pt,Bi=-ut):3==Li?(Xi=!0,Si?(Fi=Z-Ot,qi=K-Dt,Ui=G-Et,Pi=-It,Ti=-Vt,Ai=-Lt):(Fi=Z+Ot,qi=K+Dt,Ui=G+Et,Pi=It,Ti=Vt,Ai=Lt),Ri=Bt,_i=Ft,Ji=qt,ji=-St,Ci=-Pt,Oi=-Tt,Wi=Ut,Hi=Rt,Qi=_t,Di=-At,Ei=-jt,Bi=-Ct):4==Li?(Xi=!0,Si?(Fi=Z-Bt,qi=K-Ft,Ui=G-qt,Pi=-St,Ti=-Pt,Ai=-Tt):(Fi=Z+Bt,qi=K+Ft,Ui=G+qt,Pi=St,Ti=Pt,Ai=Tt),Ri=Ot,_i=Dt,Ji=Et,ji=-It,Ci=-Vt,Oi=-Lt,Wi=Ut,Hi=Rt,Qi=_t,Di=-At,Ei=-jt,Bi=-Ct):5==Li?(Xi=!0,Si?(Fi=Z-Ut,qi=K-Rt,Ui=G-_t,Pi=-At,Ti=-jt,Ai=-Ct):(Fi=Z+Ut,qi=K+Rt,Ui=G+_t,Pi=At,Ti=jt,Ai=Ct),Ri=Ot,_i=Dt,Ji=Et,ji=-It,Ci=-Vt,Oi=-Lt,Wi=Bt,Hi=Ft,Qi=qt,Di=-St,Ei=-Pt,Bi=-Tt):6==Li?(Pi=Jt,Ti=Wt,Ai=Ht,ji=rt,Ci=lt,Oi=ct,Di=It,Ei=Vt,Bi=Lt):7==Li?(Pi=Qt,Ti=Xt,Ai=Yt,ji=rt,Ci=lt,Oi=ct,Di=St,Ei=Pt,Bi=Tt):8==Li?(Pi=Zt,Ti=Kt,Ai=Gt,ji=rt,Ci=lt,Oi=ct,Di=At,Ei=jt,Bi=Ct):9==Li?(Pi=$t,Ti=ti,Ai=ii,ji=mt,Ci=pt,Oi=ut,Di=It,Ei=Vt,Bi=Lt):10==Li?(Pi=si,Ti=hi,Ai=ei,ji=mt,Ci=pt,Oi=ut,Di=St,Ei=Pt,Bi=Tt):11==Li?(Pi=ai,Ti=oi,Ai=ni,ji=mt,Ci=pt,Oi=ut,Di=At,Ei=jt,Bi=Ct):12==Li?(Pi=ri,Ti=li,Ai=ci,ji=yt,Ci=xt,Oi=dt,Di=It,Ei=Vt,Bi=Lt):13==Li?(Pi=mi,Ti=pi,Ai=ui,ji=yt,Ci=xt,Oi=dt,Di=St,Ei=Pt,Bi=Tt):14==Li&amp;&amp;(Pi=yi,Ti=xi,Ai=di,ji=yt,Ci=xt,Oi=dt,Di=At,Ei=jt,Bi=Ct),Li&gt;5){var Yi,Zi,Ki,Gi,$i,ts,is,ss,hs,es,as;Si||(Pi=-Pi,Ti=-Ti,Ai=-Ai),Zi=Pi*(ts=U[0])+Ti*(is=U[1])+Ai*(ss=U[2]),(Yi=Pi*(Ki=U[3])+Ti*(Gi=U[4])+Ai*($i=U[5]))&gt;Zi&amp;&amp;(Zi=Yi,ts=Ki,is=Gi,ss=$i),(Yi=Pi*(Ki=U[6])+Ti*(Gi=U[7])+Ai*($i=U[8]))&gt;Zi&amp;&amp;(Zi=Yi,ts=Ki,is=Gi,ss=$i),(Yi=Pi*(Ki=U[9])+Ti*(Gi=U[10])+Ai*($i=U[11]))&gt;Zi&amp;&amp;(Zi=Yi,ts=Ki,is=Gi,ss=$i),(Yi=Pi*(Ki=U[12])+Ti*(Gi=U[13])+Ai*($i=U[14]))&gt;Zi&amp;&amp;(Zi=Yi,ts=Ki,is=Gi,ss=$i),(Yi=Pi*(Ki=U[15])+Ti*(Gi=U[16])+Ai*($i=U[17]))&gt;Zi&amp;&amp;(Zi=Yi,ts=Ki,is=Gi,ss=$i),(Yi=Pi*(Ki=U[18])+Ti*(Gi=U[19])+Ai*($i=U[20]))&gt;Zi&amp;&amp;(Zi=Yi,ts=Ki,is=Gi,ss=$i),(Yi=Pi*(Ki=U[21])+Ti*(Gi=U[22])+Ai*($i=U[23]))&gt;Zi&amp;&amp;(Zi=Yi,ts=Ki,is=Gi,ss=$i),Zi=Pi*(hs=R[0])+Ti*(es=R[1])+Ai*(as=R[2]),(Yi=Pi*(Ki=R[3])+Ti*(Gi=R[4])+Ai*($i=R[5]))&lt;Zi&amp;&amp;(Zi=Yi,hs=Ki,es=Gi,as=$i),(Yi=Pi*(Ki=R[6])+Ti*(Gi=R[7])+Ai*($i=R[8]))&lt;Zi&amp;&amp;(Zi=Yi,hs=Ki,es=Gi,as=$i),(Yi=Pi*(Ki=R[9])+Ti*(Gi=R[10])+Ai*($i=R[11]))&lt;Zi&amp;&amp;(Zi=Yi,hs=Ki,es=Gi,as=$i),(Yi=Pi*(Ki=R[12])+Ti*(Gi=R[13])+Ai*($i=R[14]))&lt;Zi&amp;&amp;(Zi=Yi,hs=Ki,es=Gi,as=$i),(Yi=Pi*(Ki=R[15])+Ti*(Gi=R[16])+Ai*($i=R[17]))&lt;Zi&amp;&amp;(Zi=Yi,hs=Ki,es=Gi,as=$i),(Yi=Pi*(Ki=R[18])+Ti*(Gi=R[19])+Ai*($i=R[20]))&lt;Zi&amp;&amp;(Zi=Yi,hs=Ki,es=Gi,as=$i),(Yi=Pi*(Ki=R[21])+Ti*(Gi=R[22])+Ai*($i=R[23]))&lt;Zi&amp;&amp;(Zi=Yi,hs=Ki,es=Gi,as=$i);var os=((Ki=hs-ts)*(ji-Di*(B=ji*Di+Ci*Ei+Oi*Bi))+(Gi=es-is)*(Ci-Ei*B)+($i=as-ss)*(Oi-Bi*B))/(1-B*B);s.addPoint(ts+ji*os+Pi*Ii*.5,is+Ci*os+Ti*Ii*.5,ss+Oi*os+Ai*Ii*.5,Pi,Ti,Ai,Ii,!1)}else{var ns,rs,ls,cs,ms,ps,us,ys,xs,ds,fs,bs,vs,zs,Ns,ks,ws,Ms,gs,Is,Vs,Ls=1,Ss=0,Ps=0;Xi?((Ss=rt*Pi+lt*Ti+ct*Ai)&lt;Ls&amp;&amp;(Ls=Ss,Ps=0),-Ss&lt;Ls&amp;&amp;(Ls=-Ss,Ps=1),(Ss=mt*Pi+pt*Ti+ut*Ai)&lt;Ls&amp;&amp;(Ls=Ss,Ps=2),-Ss&lt;Ls&amp;&amp;(Ls=-Ss,Ps=3),(Ss=yt*Pi+xt*Ti+dt*Ai)&lt;Ls&amp;&amp;(Ls=Ss,Ps=4),-Ss&lt;Ls&amp;&amp;(Ls=-Ss,Ps=5),0==Ps?(ns=U[0],rs=U[1],ls=U[2],cs=U[6],ms=U[7],ps=U[8],us=U[9],ys=U[10],xs=U[11],ds=U[3],fs=U[4],bs=U[5]):1==Ps?(ns=U[15],rs=U[16],ls=U[17],cs=U[21],ms=U[22],ps=U[23],us=U[18],ys=U[19],xs=U[20],ds=U[12],fs=U[13],bs=U[14]):2==Ps?(ns=U[12],rs=U[13],ls=U[14],cs=U[0],ms=U[1],ps=U[2],us=U[3],ys=U[4],xs=U[5],ds=U[15],fs=U[16],bs=U[17]):3==Ps?(ns=U[21],rs=U[22],ls=U[23],cs=U[9],ms=U[10],ps=U[11],us=U[6],ys=U[7],xs=U[8],ds=U[18],fs=U[19],bs=U[20]):4==Ps?(ns=U[12],rs=U[13],ls=U[14],cs=U[18],ms=U[19],ps=U[20],us=U[6],ys=U[7],xs=U[8],ds=U[0],fs=U[1],bs=U[2]):5==Ps&amp;&amp;(ns=U[3],rs=U[4],ls=U[5],cs=R[9],ms=R[10],ps=R[11],us=U[21],ys=U[22],xs=U[23],ds=U[15],fs=U[16],bs=U[17])):((Ss=It*Pi+Vt*Ti+Lt*Ai)&lt;Ls&amp;&amp;(Ls=Ss,Ps=0),-Ss&lt;Ls&amp;&amp;(Ls=-Ss,Ps=1),(Ss=St*Pi+Pt*Ti+Tt*Ai)&lt;Ls&amp;&amp;(Ls=Ss,Ps=2),-Ss&lt;Ls&amp;&amp;(Ls=-Ss,Ps=3),(Ss=At*Pi+jt*Ti+Ct*Ai)&lt;Ls&amp;&amp;(Ls=Ss,Ps=4),-Ss&lt;Ls&amp;&amp;(Ls=-Ss,Ps=5),0==Ps?(ns=R[0],rs=R[1],ls=R[2],cs=R[6],ms=R[7],ps=R[8],us=R[9],ys=R[10],xs=R[11],ds=R[3],fs=R[4],bs=R[5]):1==Ps?(ns=R[15],rs=R[16],ls=R[17],cs=R[21],ms=R[22],ps=R[23],us=R[18],ys=R[19],xs=R[20],ds=R[12],fs=R[13],bs=R[14]):2==Ps?(ns=R[12],rs=R[13],ls=R[14],cs=R[0],ms=R[1],ps=R[2],us=R[3],ys=R[4],xs=R[5],ds=R[15],fs=R[16],bs=R[17]):3==Ps?(ns=R[21],rs=R[22],ls=R[23],cs=R[9],ms=R[10],ps=R[11],us=R[6],ys=R[7],xs=R[8],ds=R[18],fs=R[19],bs=R[20]):4==Ps?(ns=R[12],rs=R[13],ls=R[14],cs=R[18],ms=R[19],ps=R[20],us=R[6],ys=R[7],xs=R[8],ds=R[0],fs=R[1],bs=R[2]):5==Ps&amp;&amp;(ns=R[3],rs=R[4],ls=R[5],cs=R[9],ms=R[10],ps=R[11],us=R[21],ys=R[22],xs=R[23],ds=R[15],fs=R[16],bs=R[17])),this.clipVertices1[0]=ns,this.clipVertices1[1]=rs,this.clipVertices1[2]=ls,this.clipVertices1[3]=cs,this.clipVertices1[4]=ms,this.clipVertices1[5]=ps,this.clipVertices1[6]=us,this.clipVertices1[7]=ys,this.clipVertices1[8]=xs,this.clipVertices1[9]=ds,this.clipVertices1[10]=fs,this.clipVertices1[11]=bs,zs=0,B=((ks=this.clipVertices1[9])-Fi-Ri)*ji+((ws=this.clipVertices1[10])-qi-_i)*Ci+((Ms=this.clipVertices1[11])-Ui-Ji)*Oi;for(var Ts=0;Ts&lt;4;Ts++)Ns=3*Ts,F=((gs=this.clipVertices1[Ns])-Fi-Ri)*ji+((Is=this.clipVertices1[Ns+1])-qi-_i)*Ci+((Vs=this.clipVertices1[Ns+2])-Ui-Ji)*Oi,B&gt;0?F&gt;0?(Ns=3*zs,zs++,this.clipVertices2[Ns]=gs,this.clipVertices2[Ns+1]=Is,this.clipVertices2[Ns+2]=Vs):(Ns=3*zs,zs++,os=B/(B-F),this.clipVertices2[Ns]=ks+(gs-ks)*os,this.clipVertices2[Ns+1]=ws+(Is-ws)*os,this.clipVertices2[Ns+2]=Ms+(Vs-Ms)*os):F&gt;0&amp;&amp;(Ns=3*zs,zs++,os=B/(B-F),this.clipVertices2[Ns]=ks+(gs-ks)*os,this.clipVertices2[Ns+1]=ws+(Is-ws)*os,this.clipVertices2[Ns+2]=Ms+(Vs-Ms)*os,Ns=3*zs,zs++,this.clipVertices2[Ns]=gs,this.clipVertices2[Ns+1]=Is,this.clipVertices2[Ns+2]=Vs),ks=gs,ws=Is,Ms=Vs,B=F;if(0!=(vs=zs)){for(zs=0,Ns=3*(vs-1),B=((ks=this.clipVertices2[Ns])-Fi-Wi)*Di+((ws=this.clipVertices2[Ns+1])-qi-Hi)*Ei+((Ms=this.clipVertices2[Ns+2])-Ui-Qi)*Bi,Ts=0;Ts&lt;vs;Ts++)Ns=3*Ts,F=((gs=this.clipVertices2[Ns])-Fi-Wi)*Di+((Is=this.clipVertices2[Ns+1])-qi-Hi)*Ei+((Vs=this.clipVertices2[Ns+2])-Ui-Qi)*Bi,B&gt;0?F&gt;0?(Ns=3*zs,zs++,this.clipVertices1[Ns]=gs,this.clipVertices1[Ns+1]=Is,this.clipVertices1[Ns+2]=Vs):(Ns=3*zs,zs++,os=B/(B-F),this.clipVertices1[Ns]=ks+(gs-ks)*os,this.clipVertices1[Ns+1]=ws+(Is-ws)*os,this.clipVertices1[Ns+2]=Ms+(Vs-Ms)*os):F&gt;0&amp;&amp;(Ns=3*zs,zs++,os=B/(B-F),this.clipVertices1[Ns]=ks+(gs-ks)*os,this.clipVertices1[Ns+1]=ws+(Is-ws)*os,this.clipVertices1[Ns+2]=Ms+(Vs-Ms)*os,Ns=3*zs,zs++,this.clipVertices1[Ns]=gs,this.clipVertices1[Ns+1]=Is,this.clipVertices1[Ns+2]=Vs),ks=gs,ws=Is,Ms=Vs,B=F;if(0!=(vs=zs)){for(zs=0,Ns=3*(vs-1),B=((ks=this.clipVertices1[Ns])-Fi+Ri)*-ji+((ws=this.clipVertices1[Ns+1])-qi+_i)*-Ci+((Ms=this.clipVertices1[Ns+2])-Ui+Ji)*-Oi,Ts=0;Ts&lt;vs;Ts++)Ns=3*Ts,F=((gs=this.clipVertices1[Ns])-Fi+Ri)*-ji+((Is=this.clipVertices1[Ns+1])-qi+_i)*-Ci+((Vs=this.clipVertices1[Ns+2])-Ui+Ji)*-Oi,B&gt;0?F&gt;0?(Ns=3*zs,zs++,this.clipVertices2[Ns]=gs,this.clipVertices2[Ns+1]=Is,this.clipVertices2[Ns+2]=Vs):(Ns=3*zs,zs++,os=B/(B-F),this.clipVertices2[Ns]=ks+(gs-ks)*os,this.clipVertices2[Ns+1]=ws+(Is-ws)*os,this.clipVertices2[Ns+2]=Ms+(Vs-Ms)*os):F&gt;0&amp;&amp;(Ns=3*zs,zs++,os=B/(B-F),this.clipVertices2[Ns]=ks+(gs-ks)*os,this.clipVertices2[Ns+1]=ws+(Is-ws)*os,this.clipVertices2[Ns+2]=Ms+(Vs-Ms)*os,Ns=3*zs,zs++,this.clipVertices2[Ns]=gs,this.clipVertices2[Ns+1]=Is,this.clipVertices2[Ns+2]=Vs),ks=gs,ws=Is,Ms=Vs,B=F;if(0!=(vs=zs)){for(zs=0,Ns=3*(vs-1),B=((ks=this.clipVertices2[Ns])-Fi+Wi)*-Di+((ws=this.clipVertices2[Ns+1])-qi+Hi)*-Ei+((Ms=this.clipVertices2[Ns+2])-Ui+Qi)*-Bi,Ts=0;Ts&lt;vs;Ts++)Ns=3*Ts,F=((gs=this.clipVertices2[Ns])-Fi+Wi)*-Di+((Is=this.clipVertices2[Ns+1])-qi+Hi)*-Ei+((Vs=this.clipVertices2[Ns+2])-Ui+Qi)*-Bi,B&gt;0?F&gt;0?(Ns=3*zs,zs++,this.clipVertices1[Ns]=gs,this.clipVertices1[Ns+1]=Is,this.clipVertices1[Ns+2]=Vs):(Ns=3*zs,zs++,os=B/(B-F),this.clipVertices1[Ns]=ks+(gs-ks)*os,this.clipVertices1[Ns+1]=ws+(Is-ws)*os,this.clipVertices1[Ns+2]=Ms+(Vs-Ms)*os):F&gt;0&amp;&amp;(Ns=3*zs,zs++,os=B/(B-F),this.clipVertices1[Ns]=ks+(gs-ks)*os,this.clipVertices1[Ns+1]=ws+(Is-ws)*os,this.clipVertices1[Ns+2]=Ms+(Vs-Ms)*os,Ns=3*zs,zs++,this.clipVertices1[Ns]=gs,this.clipVertices1[Ns+1]=Is,this.clipVertices1[Ns+2]=Vs),ks=gs,ws=Is,Ms=Vs,B=F;if(Xi){var As=h;h=e,e=As}if(0!=(vs=zs)){var js=h!=t;if(vs&gt;4){ji=ns-(ks=.25*(ns+cs+us+ds)),Ci=rs-(ws=.25*(rs+ms+ys+fs)),Oi=ls-(Ms=.25*(ls+ps+xs+bs)),Di=cs-ks,Ei=ms-ws,Bi=ps-Ms;var Cs=0,Os=0,Ds=0,Es=0,Bs=-this.INF;for(Ls=this.INF,Ts=0;Ts&lt;vs;Ts++)this.used[Ts]=!1,Ns=3*Ts,(Ss=(ks=this.clipVertices1[Ns])*ji+(ws=this.clipVertices1[Ns+1])*Ci+(Ms=this.clipVertices1[Ns+2])*Oi)&lt;Ls&amp;&amp;(Ls=Ss,Cs=Ts),Ss&gt;Bs&amp;&amp;(Bs=Ss,Ds=Ts);for(this.used[Cs]=!0,this.used[Ds]=!0,Bs=-this.INF,Ls=this.INF,Ts=0;Ts&lt;vs;Ts++)this.used[Ts]||(Ns=3*Ts,(Ss=(ks=this.clipVertices1[Ns])*Di+(ws=this.clipVertices1[Ns+1])*Ei+(Ms=this.clipVertices1[Ns+2])*Bi)&lt;Ls&amp;&amp;(Ls=Ss,Os=Ts),Ss&gt;Bs&amp;&amp;(Bs=Ss,Es=Ts));Ns=3*Cs,(Ss=((ks=this.clipVertices1[Ns])-Fi)*Pi+((ws=this.clipVertices1[Ns+1])-qi)*Ti+((Ms=this.clipVertices1[Ns+2])-Ui)*Ai)&lt;0&amp;&amp;s.addPoint(ks,ws,Ms,Pi,Ti,Ai,Ss,js),Ns=3*Os,(Ss=((ks=this.clipVertices1[Ns])-Fi)*Pi+((ws=this.clipVertices1[Ns+1])-qi)*Ti+((Ms=this.clipVertices1[Ns+2])-Ui)*Ai)&lt;0&amp;&amp;s.addPoint(ks,ws,Ms,Pi,Ti,Ai,Ss,js),Ns=3*Ds,(Ss=((ks=this.clipVertices1[Ns])-Fi)*Pi+((ws=this.clipVertices1[Ns+1])-qi)*Ti+((Ms=this.clipVertices1[Ns+2])-Ui)*Ai)&lt;0&amp;&amp;s.addPoint(ks,ws,Ms,Pi,Ti,Ai,Ss,js),Ns=3*Es,(Ss=((ks=this.clipVertices1[Ns])-Fi)*Pi+((ws=this.clipVertices1[Ns+1])-qi)*Ti+((Ms=this.clipVertices1[Ns+2])-Ui)*Ai)&lt;0&amp;&amp;s.addPoint(ks,ws,Ms,Pi,Ti,Ai,Ss,js)}else for(Ts=0;Ts&lt;vs;Ts++)Ns=3*Ts,(Ss=((ks=this.clipVertices1[Ns])-Fi)*Pi+((ws=this.clipVertices1[Ns+1])-qi)*Ti+((Ms=this.clipVertices1[Ns+2])-Ui)*Ai)&lt;0&amp;&amp;s.addPoint(ks,ws,Ms,Pi,Ti,Ai,Ss,js)}}}}}}}}),Vt.prototype=Object.assign(Object.create(gt.prototype),{constructor:Vt,getSep:function(t,i,s,h,e){var a,o,n,r,l,c,m,p,u,y,x,d,f,b=new L,v=t.position.x,z=t.position.y,N=t.position.z,k=i.position.x,w=i.position.y,M=i.position.z,I=k-v,V=w-z,S=M-N;I*I+V*V+S*S==0&amp;&amp;(V=.001);var P=-I,T=-V,A=-S;this.supportPointB(t,-P,-T,-A,b);var j=b.x,C=b.y,O=b.z;this.supportPointC(i,P,T,A,b);var D=b.x,E=b.y,B=b.z,F=D-j,q=E-C,U=B-O;if(F*P+q*T+U*A&lt;=0)return!1;if((P=q*S-U*V)*P+(T=U*I-F*S)*T+(A=F*V-q*I)*A==0)return s.set(F-I,q-V,U-S).normalize(),h.set(.5*(j+D),.5*(C+E),.5*(O+B)),!0;this.supportPointB(t,-P,-T,-A,b);var R=b.x,_=b.y,J=b.z;this.supportPointC(i,P,T,A,b);var W=b.x,H=b.y,Q=b.z,X=W-R,Y=H-_,Z=Q-J;if(X*P+Y*T+Z*A&lt;=0)return!1;(P=(o=q-V)*(c=Z-S)-(n=U-S)*(l=Y-V))*I+(T=n*(r=X-I)-(a=F-I)*c)*V+(A=a*l-o*r)*S&gt;0&amp;&amp;(a=F,o=q,n=U,F=X,q=Y,U=Z,X=a,Y=o,Z=n,a=j,o=C,n=O,j=R,C=_,O=J,R=a,_=o,J=n,a=D,o=E,n=B,D=W,E=H,B=Q,W=a,H=o,Q=n,P=-P,T=-T,A=-A);for(var K=0;;){if(++K&gt;100)return!1;this.supportPointB(t,-P,-T,-A,b);var G=b.x,$=b.y,tt=b.z;this.supportPointC(i,P,T,A,b);var it=b.x,st=b.y,ht=b.z,et=it-G,at=st-$,ot=ht-tt;if(et*P+at*T+ot*A&lt;=0)return!1;if((q*ot-U*at)*I+(U*et-F*ot)*V+(F*at-q*et)*S&lt;0)X=et,Y=at,Z=ot,R=G,_=$,J=tt,W=it,H=st,Q=ht,P=(o=q-V)*(c=ot-S)-(n=U-S)*(l=at-V),T=n*(r=et-I)-(a=F-I)*c,A=a*l-o*r;else if((at*Z-ot*Y)*I+(ot*X-et*Z)*V+(et*Y-at*X)*S&lt;0)F=et,q=at,U=ot,j=G,C=$,O=tt,D=it,E=st,B=ht,P=(o=at-V)*(c=Z-S)-(n=ot-S)*(l=Y-V),T=n*(r=X-I)-(a=et-I)*c,A=a*l-o*r;else for(var nt=!1;;){if(P=(o=Y-q)*(c=ot-U)-(n=Z-U)*(l=at-q),T=n*(r=et-F)-(a=X-F)*c,A=a*l-o*r,(P*=m=1/g.sqrt(P*P+T*T+A*A))*F+(T*=m)*q+(A*=m)*U&gt;=0&amp;&amp;!nt){var rt=(q*Z-U*Y)*et+(U*X-F*Z)*at+(F*Y-q*X)*ot,lt=(at*Z-ot*Y)*I+(ot*X-et*Z)*V+(et*Y-at*X)*S,ct=(V*U-S*q)*et+(S*F-I*U)*at+(I*q-V*F)*ot,mt=(Y*U-Z*q)*I+(Z*F-X*U)*V+(X*q-Y*F)*S,pt=rt+lt+ct+mt;pt&lt;=0&amp;&amp;(rt=0,pt=(lt=(Y*ot-Z*at)*P+(Z*et-X*ot)*T+(X*at-Y*et)*A)+(ct=(at*Z-ot*Y)*P+(ot*X-et*Z)*T+(et*Y-at*X)*A)+(mt=(q*Z-U*Y)*P+(U*X-F*Z)*T+(F*Y-q*X)*A));var ut=1/pt;p=(v*rt+j*lt+R*ct+G*mt)*ut,u=(z*rt+C*lt+_*ct+$*mt)*ut,y=(N*rt+O*lt+J*ct+tt*mt)*ut,x=(k*rt+D*lt+W*ct+it*mt)*ut,d=(w*rt+E*lt+H*ct+st*mt)*ut,f=(M*rt+B*lt+Q*ct+ht*mt)*ut,nt=!0}this.supportPointB(t,-P,-T,-A,b);var yt=b.x,xt=b.y,dt=b.z;this.supportPointC(i,P,T,A,b);var ft=b.x,bt=b.y,vt=b.z,zt=ft-yt,Nt=bt-xt,kt=vt-dt,wt=-(zt*P+Nt*T+kt*A);if((zt-et)*P+(Nt-at)*T+(kt-ot)*A&lt;=.01||wt&gt;=0)return!!nt&amp;&amp;(s.set(-P,-T,-A),h.set(.5*(p+x),.5*(u+d),.5*(y+f)),e.x=wt,!0);(Nt*U-kt*q)*I+(kt*F-zt*U)*V+(zt*q-Nt*F)*S&lt;0?(Nt*Z-kt*Y)*I+(kt*X-zt*Z)*V+(zt*Y-Nt*X)*S&lt;0?(F=zt,q=Nt,U=kt,j=yt,C=xt,O=dt,D=ft,E=bt,B=vt):(et=zt,at=Nt,ot=kt,G=yt,$=xt,tt=dt,it=ft,st=bt,ht=vt):(Nt*ot-kt*at)*I+(kt*et-zt*ot)*V+(zt*at-Nt*et)*S&lt;0?(X=zt,Y=Nt,Z=kt,R=yt,_=xt,J=dt,W=ft,H=bt,Q=vt):(F=zt,q=Nt,U=kt,j=yt,C=xt,O=dt,D=ft,E=bt,B=vt)}}},supportPointB:function(t,i,s,h,e){var a,o,n,r=t.rotation.elements,l=r[0]*i+r[3]*s+r[6]*h,c=r[1]*i+r[4]*s+r[7]*h,m=r[2]*i+r[5]*s+r[8]*h,p=t.halfWidth,u=t.halfHeight,y=t.halfDepth;a=l&lt;0?-p:p,o=c&lt;0?-u:u,n=m&lt;0?-y:y,l=r[0]*a+r[1]*o+r[2]*n+t.position.x,c=r[3]*a+r[4]*o+r[5]*n+t.position.y,m=r[6]*a+r[7]*o+r[8]*n+t.position.z,e.set(l,c,m)},supportPointC:function(t,i,s,h,e){var a,o,n,r=t.rotation.elements,l=r[0]*i+r[3]*s+r[6]*h,c=r[1]*i+r[4]*s+r[7]*h,m=r[2]*i+r[5]*s+r[8]*h,p=l,u=m,y=p*p+u*u,x=t.radius,d=t.halfHeight;0==y?c&lt;0?(a=x,o=-d,n=0):(a=x,o=d,n=0):(y=t.radius/g.sqrt(y),c&lt;0?(a=p*y,o=-d,n=u*y):(a=p*y,o=d,n=u*y)),l=r[0]*a+r[1]*o+r[2]*n+t.position.x,c=r[3]*a+r[4]*o+r[5]*n+t.position.y,m=r[6]*a+r[7]*o+r[8]*n+t.position.z,e.set(l,c,m)},detectCollision:function(t,i,s){var h,e;this.flip?(h=i,e=t):(h=t,e=i);var a=new L,o=new L,n=new L;if(this.getSep(h,e,a,o,n)){var r=h.position.x,l=h.position.y,c=h.position.z,m=e.position.x,p=e.position.y,u=e.position.z,y=h.halfWidth,x=h.halfHeight,d=h.halfDepth,f=e.halfHeight,b=e.radius,v=h.dimentions,z=v[0],N=v[1],k=v[2],w=v[3],M=v[4],I=v[5],V=v[6],S=v[7],P=v[8],T=v[9],A=v[10],j=v[11],C=v[12],O=v[13],D=v[14],E=v[15],B=v[16],F=v[17],q=e.normalDirection.x,U=e.normalDirection.y,R=e.normalDirection.z,_=e.halfDirection.x,J=e.halfDirection.y,W=e.halfDirection.z,H=a.x,Q=a.y,X=a.z,Y=H*z+Q*N+X*k,Z=H*w+Q*M+X*I,K=H*V+Q*S+X*P,G=H*q+Q*U+X*R,$=Y&gt;0,tt=Z&gt;0,it=K&gt;0,st=G&gt;0;$||(Y=-Y),tt||(Z=-Z),it||(K=-K),st||(G=-G);var ht,et,at,ot,nt,rt,lt,ct,mt,pt,ut,yt,xt,dt,ft,bt,vt,zt,Nt,kt,wt,Mt,gt,It,Vt,Lt,St,Pt,Tt,At,jt,Ct,Ot,Dt,Et,Bt,Ft,qt,Ut,Rt,_t,Jt,Wt,Ht,Qt,Xt,Yt,Zt,Kt,Gt,$t,ti,ii,si=0;if(G&gt;.999?si=Y&gt;.999?Y&gt;G?1:4:Z&gt;.999?Z&gt;G?2:4:K&gt;.999&amp;&amp;K&gt;G?3:4:Y&gt;.999?si=1:Z&gt;.999?si=2:K&gt;.999&amp;&amp;(si=3),0==si)s.addPoint(o.x,o.y,o.z,H,Q,X,n.x,this.flip);else if(4==si){var hi,ei,ai,oi,ni,ri,li,ci,mi,pi,ui,yi;st?(ot=m-_,nt=p-J,rt=u-W,H=-q,Q=-U,X=-R):(ot=m+_,nt=p+J,rt=u+W,H=q,Q=U,X=R),si=0,(Wt=z*H+N*Q+k*X)&lt;(kt=1)&amp;&amp;(kt=Wt,si=0),-Wt&lt;kt&amp;&amp;(kt=-Wt,si=1),(Wt=w*H+M*Q+I*X)&lt;kt&amp;&amp;(kt=Wt,si=2),-Wt&lt;kt&amp;&amp;(kt=-Wt,si=3),(Wt=V*H+S*Q+P*X)&lt;kt&amp;&amp;(kt=Wt,si=4),-Wt&lt;kt&amp;&amp;(kt=-Wt,si=5);var xi=h.elements;switch(si){case 0:hi=xi[0],ei=xi[1],ai=xi[2],oi=xi[6],ni=xi[7],ri=xi[8],li=xi[9],ci=xi[10],mi=xi[11],pi=xi[3],ui=xi[4],yi=xi[5];break;case 1:hi=xi[15],ei=xi[16],ai=xi[17],oi=xi[21],ni=xi[22],ri=xi[23],li=xi[18],ci=xi[19],mi=xi[20],pi=xi[12],ui=xi[13],yi=xi[14];break;case 2:hi=xi[12],ei=xi[13],ai=xi[14],oi=xi[0],ni=xi[1],ri=xi[2],li=xi[3],ci=xi[4],mi=xi[5],pi=xi[15],ui=xi[16],yi=xi[17];break;case 3:hi=xi[21],ei=xi[22],ai=xi[23],oi=xi[9],ni=xi[10],ri=xi[11],li=xi[6],ci=xi[7],mi=xi[8],pi=xi[18],ui=xi[19],yi=xi[20];break;case 4:hi=xi[12],ei=xi[13],ai=xi[14],oi=xi[18],ni=xi[19],ri=xi[20],li=xi[6],ci=xi[7],mi=xi[8],pi=xi[0],ui=xi[1],yi=xi[2];break;case 5:hi=xi[3],ei=xi[4],ai=xi[5],oi=xi[9],ni=xi[10],ri=xi[11],li=xi[21],ci=xi[22],mi=xi[23],pi=xi[15],ui=xi[16],yi=xi[17]}(Nt=H*(hi-ot)+Q*(ei-nt)+X*(ai-rt))&lt;=0&amp;&amp;s.addPoint(hi,ei,ai,-H,-Q,-X,Nt,this.flip),(Nt=H*(oi-ot)+Q*(ni-nt)+X*(ri-rt))&lt;=0&amp;&amp;s.addPoint(oi,ni,ri,-H,-Q,-X,Nt,this.flip),(Nt=H*(li-ot)+Q*(ci-nt)+X*(mi-rt))&lt;=0&amp;&amp;s.addPoint(li,ci,mi,-H,-Q,-X,Nt,this.flip),(Nt=H*(pi-ot)+Q*(ui-nt)+X*(yi-rt))&lt;=0&amp;&amp;s.addPoint(pi,ui,yi,-H,-Q,-X,Nt,this.flip)}else{switch(si){case 1:$?(ht=r+T,et=l+A,at=c+j,H=z,Q=N,X=k):(ht=r-T,et=l-A,at=c-j,H=-z,Q=-N,X=-k),Xt=w,Yt=M,Zt=I,ti=x,Kt=V,Gt=S,$t=P,ii=d;break;case 2:tt?(ht=r+C,et=l+O,at=c+D,H=w,Q=M,X=I):(ht=r-C,et=l-O,at=c-D,H=-w,Q=-M,X=-I),Xt=z,Yt=N,Zt=k,ti=y,Kt=V,Gt=S,$t=P,ii=d;break;case 3:it?(ht=r+E,et=l+B,at=c+F,H=V,Q=S,X=P):(ht=r-E,et=l-B,at=c-F,H=-V,Q=-S,X=-P),Xt=z,Yt=N,Zt=k,ti=y,Kt=w,Gt=M,$t=I,ii=x}if(ot=m+(wt=(kt=H*q+Q*U+X*R)&lt;0?f:-f)*q,nt=p+wt*U,rt=u+wt*R,G&gt;=.999999?(Mt=-Q,gt=X,It=H):(Mt=H,gt=Q,It=X),Lt=(wt=Mt*q+gt*U+It*R)*q-Mt,St=wt*U-gt,Pt=wt*R-It,0==(wt=g.sqrt(Lt*Lt+St*St+Pt*Pt)))return;if(Mt=ot+(Lt*=wt=b/wt),gt=nt+(St*=wt),It=rt+(Pt*=wt),kt&lt;-.96||kt&gt;.96)lt=q*q*1.5-.5,ct=q*U*1.5-.866025403*R,mt=q*R*1.5+.866025403*U,pt=U*q*1.5+.866025403*R,ut=U*U*1.5-.5,yt=U*R*1.5-.866025403*q,xt=R*q*1.5-.866025403*U,dt=R*U*1.5+.866025403*q,ft=R*R*1.5-.5,(qt=Xt*(Mt=(bt=Mt)-(Nt=H*(bt-ht)+Q*((vt=gt)-et)+X*((zt=It)-at))*H-ht)+Yt*(gt=vt-Nt*Q-et)+Zt*(It=zt-Nt*X-at))&lt;-ti?qt=-ti:qt&gt;ti&amp;&amp;(qt=ti),(Jt=Kt*Mt+Gt*gt+$t*It)&lt;-ii?Jt=-ii:Jt&gt;ii&amp;&amp;(Jt=ii),bt=ht+(Mt=qt*Xt+Jt*Kt),vt=et+(gt=qt*Yt+Jt*Gt),zt=at+(It=qt*Zt+Jt*$t),s.addPoint(bt,vt,zt,H,Q,X,Nt,this.flip),vt=Lt*pt+St*ut+Pt*yt,zt=Lt*xt+St*dt+Pt*ft,(Nt=H*((bt=(Lt=bt=Lt*lt+St*ct+Pt*mt)+ot)-ht)+Q*((vt=(St=vt)+nt)-et)+X*((zt=(Pt=zt)+rt)-at))&lt;=0&amp;&amp;((qt=Xt*(Mt=bt-Nt*H-ht)+Yt*(gt=vt-Nt*Q-et)+Zt*(It=zt-Nt*X-at))&lt;-ti?qt=-ti:qt&gt;ti&amp;&amp;(qt=ti),(Jt=Kt*Mt+Gt*gt+$t*It)&lt;-ii?Jt=-ii:Jt&gt;ii&amp;&amp;(Jt=ii),bt=ht+(Mt=qt*Xt+Jt*Kt),vt=et+(gt=qt*Yt+Jt*Gt),zt=at+(It=qt*Zt+Jt*$t),s.addPoint(bt,vt,zt,H,Q,X,Nt,this.flip)),vt=Lt*pt+St*ut+Pt*yt,zt=Lt*xt+St*dt+Pt*ft,(Nt=H*((bt=(Lt=bt=Lt*lt+St*ct+Pt*mt)+ot)-ht)+Q*((vt=(St=vt)+nt)-et)+X*((zt=(Pt=zt)+rt)-at))&lt;=0&amp;&amp;((qt=Xt*(Mt=bt-Nt*H-ht)+Yt*(gt=vt-Nt*Q-et)+Zt*(It=zt-Nt*X-at))&lt;-ti?qt=-ti:qt&gt;ti&amp;&amp;(qt=ti),(Jt=Kt*Mt+Gt*gt+$t*It)&lt;-ii?Jt=-ii:Jt&gt;ii&amp;&amp;(Jt=ii),bt=ht+(Mt=qt*Xt+Jt*Kt),vt=et+(gt=qt*Yt+Jt*Gt),zt=at+(It=qt*Zt+Jt*$t),s.addPoint(bt,vt,zt,H,Q,X,Nt,this.flip));else{if(Et=Mt,kt&gt;0?(Ut=Mt+2*_,Rt=gt+2*J,_t=It+2*W):(Ut=Mt-2*_,Rt=gt-2*J,_t=It-2*W),Mt=(Ut-=(Jt=H*(Ut-ht)+Q*(Rt-et)+X*(_t-at))*H)-(Et-=(qt=H*(Et-ht)+Q*((Bt=gt)-et)+X*((Ft=It)-at))*H),gt=(Rt-=Jt*Q)-(Bt-=qt*Q),It=(_t-=Jt*X)-(Ft-=qt*X),Vt=Jt-qt,Ht=(Z=(Ct=Ut-ht)*Xt+(Ot=Rt-et)*Yt+(Dt=_t-at)*Zt)-ti,(Wt=(Y=(Tt=Et-ht)*Xt+(At=Bt-et)*Yt+(jt=Ft-at)*Zt)-ti)&gt;0){if(Ht&gt;0)return;Y=(Tt=(Et+=Mt*(Qt=Wt/(Wt-Ht)))-ht)*Xt+(At=(Bt+=gt*Qt)-et)*Yt+(jt=(Ft+=It*Qt)-at)*Zt,Mt=Ut-Et,gt=Rt-Bt,It=_t-Ft,Vt=Jt-(qt+=Vt*Qt)}else Ht&gt;0&amp;&amp;(Z=(Ct=(Ut=Et+Mt*(Qt=Wt/(Wt-Ht)))-ht)*Xt+(Ot=(Rt=Bt+gt*Qt)-et)*Yt+(Dt=(_t=Ft+It*Qt)-at)*Zt,Mt=Ut-Et,gt=Rt-Bt,It=_t-Ft,Vt=(Jt=qt+Vt*Qt)-qt);if(Ht=Z+ti,(Wt=Y+ti)&lt;0){if(Ht&lt;0)return;Tt=(Et+=Mt*(Qt=Wt/(Wt-Ht)))-ht,At=(Bt+=gt*Qt)-et,jt=(Ft+=It*Qt)-at,Mt=Ut-Et,gt=Rt-Bt,It=_t-Ft,Vt=Jt-(qt+=Vt*Qt)}else Ht&lt;0&amp;&amp;(Ct=(Ut=Et+Mt*(Qt=Wt/(Wt-Ht)))-ht,Ot=(Rt=Bt+gt*Qt)-et,Dt=(_t=Ft+It*Qt)-at,Mt=Ut-Et,gt=Rt-Bt,It=_t-Ft,Vt=(Jt=qt+Vt*Qt)-qt);if(Ht=(Z=Ct*Kt+Ot*Gt+Dt*$t)-ii,(Wt=(Y=Tt*Kt+At*Gt+jt*$t)-ii)&gt;0){if(Ht&gt;0)return;Y=(Tt=(Et+=Mt*(Qt=Wt/(Wt-Ht)))-ht)*Kt+(At=(Bt+=gt*Qt)-et)*Gt+(jt=(Ft+=It*Qt)-at)*$t,Mt=Ut-Et,gt=Rt-Bt,It=_t-Ft,Vt=Jt-(qt+=Vt*Qt)}else Ht&gt;0&amp;&amp;(Z=(Ct=(Ut=Et+Mt*(Qt=Wt/(Wt-Ht)))-ht)*Kt+(Ot=(Rt=Bt+gt*Qt)-et)*Gt+(Dt=(_t=Ft+It*Qt)-at)*$t,Mt=Ut-Et,gt=Rt-Bt,It=_t-Ft,Vt=(Jt=qt+Vt*Qt)-qt);if(Ht=Z+ii,(Wt=Y+ii)&lt;0){if(Ht&lt;0)return;Et+=Mt*(Qt=Wt/(Wt-Ht)),Bt+=gt*Qt,Ft+=It*Qt,qt+=Vt*Qt}else Ht&lt;0&amp;&amp;(Ut=Et+Mt*(Qt=Wt/(Wt-Ht)),Rt=Bt+gt*Qt,_t=Ft+It*Qt,Jt=qt+Vt*Qt);qt&lt;0&amp;&amp;s.addPoint(Et,Bt,Ft,H,Q,X,qt,this.flip),Jt&lt;0&amp;&amp;s.addPoint(Ut,Rt,_t,H,Q,X,Jt,this.flip)}}}}}),Lt.prototype=Object.assign(Object.create(gt.prototype),{constructor:Lt,getSep:function(t,i,s,h,e){var a,o,n,r,l,c,m,p,u,y,x,d,f,b=new L,v=t.position.x,z=t.position.y,N=t.position.z,k=i.position.x,w=i.position.y,M=i.position.z,I=k-v,V=w-z,S=M-N;I*I+V*V+S*S==0&amp;&amp;(V=.001);var P=-I,T=-V,A=-S;this.supportPoint(t,-P,-T,-A,b);var j=b.x,C=b.y,O=b.z;this.supportPoint(i,P,T,A,b);var D=b.x,E=b.y,B=b.z,F=D-j,q=E-C,U=B-O;if(F*P+q*T+U*A&lt;=0)return!1;if((P=q*S-U*V)*P+(T=U*I-F*S)*T+(A=F*V-q*I)*A==0)return s.set(F-I,q-V,U-S).normalize(),h.set(.5*(j+D),.5*(C+E),.5*(O+B)),!0;this.supportPoint(t,-P,-T,-A,b);var R=b.x,_=b.y,J=b.z;this.supportPoint(i,P,T,A,b);var W=b.x,H=b.y,Q=b.z,X=W-R,Y=H-_,Z=Q-J;if(X*P+Y*T+Z*A&lt;=0)return!1;(P=(o=q-V)*(c=Z-S)-(n=U-S)*(l=Y-V))*I+(T=n*(r=X-I)-(a=F-I)*c)*V+(A=a*l-o*r)*S&gt;0&amp;&amp;(a=F,o=q,n=U,F=X,q=Y,U=Z,X=a,Y=o,Z=n,a=j,o=C,n=O,j=R,C=_,O=J,R=a,_=o,J=n,a=D,o=E,n=B,D=W,E=H,B=Q,W=a,H=o,Q=n,P=-P,T=-T,A=-A);for(var K=0;;){if(++K&gt;100)return!1;this.supportPoint(t,-P,-T,-A,b);var G=b.x,$=b.y,tt=b.z;this.supportPoint(i,P,T,A,b);var it=b.x,st=b.y,ht=b.z,et=it-G,at=st-$,ot=ht-tt;if(et*P+at*T+ot*A&lt;=0)return!1;if((q*ot-U*at)*I+(U*et-F*ot)*V+(F*at-q*et)*S&lt;0)X=et,Y=at,Z=ot,R=G,_=$,J=tt,W=it,H=st,Q=ht,P=(o=q-V)*(c=ot-S)-(n=U-S)*(l=at-V),T=n*(r=et-I)-(a=F-I)*c,A=a*l-o*r;else if((at*Z-ot*Y)*I+(ot*X-et*Z)*V+(et*Y-at*X)*S&lt;0)F=et,q=at,U=ot,j=G,C=$,O=tt,D=it,E=st,B=ht,P=(o=at-V)*(c=Z-S)-(n=ot-S)*(l=Y-V),T=n*(r=X-I)-(a=et-I)*c,A=a*l-o*r;else for(var nt=!1;;){if(P=(o=Y-q)*(c=ot-U)-(n=Z-U)*(l=at-q),T=n*(r=et-F)-(a=X-F)*c,A=a*l-o*r,(P*=m=1/g.sqrt(P*P+T*T+A*A))*F+(T*=m)*q+(A*=m)*U&gt;=0&amp;&amp;!nt){var rt=(q*Z-U*Y)*et+(U*X-F*Z)*at+(F*Y-q*X)*ot,lt=(at*Z-ot*Y)*I+(ot*X-et*Z)*V+(et*Y-at*X)*S,ct=(V*U-S*q)*et+(S*F-I*U)*at+(I*q-V*F)*ot,mt=(Y*U-Z*q)*I+(Z*F-X*U)*V+(X*q-Y*F)*S,pt=rt+lt+ct+mt;pt&lt;=0&amp;&amp;(rt=0,pt=(lt=(Y*ot-Z*at)*P+(Z*et-X*ot)*T+(X*at-Y*et)*A)+(ct=(at*Z-ot*Y)*P+(ot*X-et*Z)*T+(et*Y-at*X)*A)+(mt=(q*Z-U*Y)*P+(U*X-F*Z)*T+(F*Y-q*X)*A));var ut=1/pt;p=(v*rt+j*lt+R*ct+G*mt)*ut,u=(z*rt+C*lt+_*ct+$*mt)*ut,y=(N*rt+O*lt+J*ct+tt*mt)*ut,x=(k*rt+D*lt+W*ct+it*mt)*ut,d=(w*rt+E*lt+H*ct+st*mt)*ut,f=(M*rt+B*lt+Q*ct+ht*mt)*ut,nt=!0}this.supportPoint(t,-P,-T,-A,b);var yt=b.x,xt=b.y,dt=b.z;this.supportPoint(i,P,T,A,b);var ft=b.x,bt=b.y,vt=b.z,zt=ft-yt,Nt=bt-xt,kt=vt-dt,wt=-(zt*P+Nt*T+kt*A);if((zt-et)*P+(Nt-at)*T+(kt-ot)*A&lt;=.01||wt&gt;=0)return!!nt&amp;&amp;(s.set(-P,-T,-A),h.set(.5*(p+x),.5*(u+d),.5*(y+f)),e.x=wt,!0);(Nt*U-kt*q)*I+(kt*F-zt*U)*V+(zt*q-Nt*F)*S&lt;0?(Nt*Z-kt*Y)*I+(kt*X-zt*Z)*V+(zt*Y-Nt*X)*S&lt;0?(F=zt,q=Nt,U=kt,j=yt,C=xt,O=dt,D=ft,E=bt,B=vt):(et=zt,at=Nt,ot=kt,G=yt,$=xt,tt=dt,it=ft,st=bt,ht=vt):(Nt*ot-kt*at)*I+(kt*et-zt*ot)*V+(zt*at-Nt*et)*S&lt;0?(X=zt,Y=Nt,Z=kt,R=yt,_=xt,J=dt,W=ft,H=bt,Q=vt):(F=zt,q=Nt,U=kt,j=yt,C=xt,O=dt,D=ft,E=bt,B=vt)}}},supportPoint:function(t,i,s,h,e){var a,o,n,r=t.rotation.elements,l=r[0]*i+r[3]*s+r[6]*h,c=r[1]*i+r[4]*s+r[7]*h,m=r[2]*i+r[5]*s+r[8]*h,p=l,u=m,y=p*p+u*u,x=t.radius,d=t.halfHeight;0==y?c&lt;0?(a=x,o=-d,n=0):(a=x,o=d,n=0):(y=t.radius/g.sqrt(y),c&lt;0?(a=p*y,o=-d,n=u*y):(a=p*y,o=d,n=u*y)),l=r[0]*a+r[1]*o+r[2]*n+t.position.x,c=r[3]*a+r[4]*o+r[5]*n+t.position.y,m=r[6]*a+r[7]*o+r[8]*n+t.position.z,e.set(l,c,m)},detectCollision:function(t,i,s){var h,e;t.id&lt;i.id?(h=t,e=i):(h=i,e=t);var a,o,n,r,l,c,m,p,u,y,x,d,f,b,v,z,N,k,w,M,I,V=h.position,S=e.position,P=V.x,T=V.y,A=V.z,j=S.x,C=S.y,O=S.z,D=h.halfHeight,E=e.halfHeight,B=h.normalDirection,F=e.normalDirection,q=h.halfDirection,U=e.halfDirection,R=h.radius,_=e.radius,J=B.x,W=B.y,H=B.z,Q=F.x,X=F.y,Y=F.z,Z=q.x,K=q.y,G=q.z,$=U.x,tt=U.y,it=U.z,st=P-j,ht=T-C,et=A-O,at=new L,ot=new L,nt=new L;if(this.getSep(h,e,at,ot,nt)){var rt=at.x*J+at.y*W+at.z*H,lt=at.x*Q+at.y*X+at.z*Y,ct=rt&gt;0,mt=lt&gt;0;ct||(rt=-rt),mt||(lt=-lt);var pt,ut,yt,xt=0;(rt&gt;.999||lt&gt;.999)&amp;&amp;(xt=rt&gt;lt?1:2);var dt,ft,bt,vt,zt,Nt,kt,wt,Mt,gt,It,Vt,Lt,St,Pt,Tt,At=nt.x;switch(pt=at.x,ut=at.y,yt=at.z,xt){case 0:s.addPoint(ot.x,ot.y,ot.z,pt,ut,yt,At,!1);break;case 1:if(ct?(o=P+Z,n=T+K,r=A+G,pt=J,ut=W,yt=H):(o=P-Z,n=T-K,r=A-G,pt=-J,ut=-W,yt=-H),l=j+(a=(w=pt*Q+ut*X+yt*Y)&lt;0?E:-E)*Q,c=C+a*X,m=O+a*Y,lt&gt;=.999999?(p=-ut,u=yt,y=pt):(p=pt,u=ut,y=yt),st=(a=p*Q+u*X+y*Y)*Q-p,ht=a*X-u,et=a*Y-y,0==(a=g.sqrt(st*st+ht*ht+et*et)))break;if(p=l+(st*=a=_/a),u=c+(ht*=a),y=m+(et*=a),w&lt;-.96||w&gt;.96)dt=Q*Q*1.5-.5,ft=Q*X*1.5-.866025403*Y,bt=Q*Y*1.5+.866025403*X,vt=X*Q*1.5+.866025403*Y,zt=X*X*1.5-.5,Nt=X*Y*1.5-.866025403*Q,kt=Y*Q*1.5-.866025403*X,wt=Y*X*1.5+.866025403*Q,Mt=Y*Y*1.5-.5,(a=(p=(gt=p)-(Lt=pt*(gt-o)+ut*((It=u)-n)+yt*((Vt=y)-r))*pt-o)*p+(u=It-Lt*ut-n)*u+(y=Vt-Lt*yt-r)*y)&gt;R*R&amp;&amp;(p*=a=R/g.sqrt(a),u*=a,y*=a),gt=o+p,It=n+u,Vt=r+y,s.addPoint(gt,It,Vt,pt,ut,yt,Lt,!1),It=st*vt+ht*zt+et*Nt,Vt=st*kt+ht*wt+et*Mt,(Lt=pt*((gt=(st=gt=st*dt+ht*ft+et*bt)+l)-o)+ut*((It=(ht=It)+c)-n)+yt*((Vt=(et=Vt)+m)-r))&lt;=0&amp;&amp;((a=(p=gt-Lt*pt-o)*p+(u=It-Lt*ut-n)*u+(y=Vt-Lt*yt-r)*y)&gt;R*R&amp;&amp;(p*=a=R/g.sqrt(a),u*=a,y*=a),gt=o+p,It=n+u,Vt=r+y,s.addPoint(gt,It,Vt,pt,ut,yt,Lt,!1)),It=st*vt+ht*zt+et*Nt,Vt=st*kt+ht*wt+et*Mt,(Lt=pt*((gt=(st=gt=st*dt+ht*ft+et*bt)+l)-o)+ut*((It=(ht=It)+c)-n)+yt*((Vt=(et=Vt)+m)-r))&lt;=0&amp;&amp;((a=(p=gt-Lt*pt-o)*p+(u=It-Lt*ut-n)*u+(y=Vt-Lt*yt-r)*y)&gt;R*R&amp;&amp;(p*=a=R/g.sqrt(a),u*=a,y*=a),gt=o+p,It=n+u,Vt=r+y,s.addPoint(gt,It,Vt,pt,ut,yt,Lt,!1));else{if(x=p,w&gt;0?(b=p+Q*E*2,v=u+X*E*2,z=y+Y*E*2):(b=p-Q*E*2,v=u-X*E*2,z=y-Y*E*2),(Tt=(St=(st=o-(x-=(N=pt*(x-o)+ut*((d=u)-n)+yt*((f=y)-r))*pt))*(p=(b-=(k=pt*(b-o)+ut*(v-n)+yt*(z-r))*pt)-x)+(ht=n-(d-=N*ut))*(u=(v-=k*ut)-d)+(et=r-(f-=N*yt))*(y=(z-=k*yt)-f))*St-(Pt=p*p+u*u+y*y)*(st*st+ht*ht+et*et-R*R))&lt;0)break;(I=(St-(Tt=g.sqrt(Tt)))/Pt)&lt;(M=(St+Tt)/Pt)&amp;&amp;(a=M,M=I,I=a),I&gt;1&amp;&amp;(I=1),M&lt;0&amp;&amp;(M=0),p=x+(b-x)*M,u=d+(v-d)*M,y=f+(z-f)*M,b=x+(b-x)*I,v=d+(v-d)*I,z=f+(z-f)*I,x=p,d=u,f=y,a=N+(k-N)*M,k=N+(k-N)*I,(N=a)&lt;0&amp;&amp;s.addPoint(x,d,f,pt,ut,yt,Lt,!1),k&lt;0&amp;&amp;s.addPoint(b,v,z,pt,ut,yt,Lt,!1)}break;case 2:if(mt?(l=j-$,c=C-tt,m=O-it,pt=-Q,ut=-X,yt=-Y):(l=j+$,c=C+tt,m=O+it,pt=Q,ut=X,yt=Y),o=P+(a=(w=pt*J+ut*W+yt*H)&lt;0?D:-D)*J,n=T+a*W,r=A+a*H,rt&gt;=.999999?(p=-ut,u=yt,y=pt):(p=pt,u=ut,y=yt),st=(a=p*J+u*W+y*H)*J-p,ht=a*W-u,et=a*H-y,0==(a=g.sqrt(st*st+ht*ht+et*et)))break;if(p=o+(st*=a=R/a),u=n+(ht*=a),y=r+(et*=a),w&lt;-.96||w&gt;.96)dt=J*J*1.5-.5,ft=J*W*1.5-.866025403*H,bt=J*H*1.5+.866025403*W,vt=W*J*1.5+.866025403*H,zt=W*W*1.5-.5,Nt=W*H*1.5-.866025403*J,kt=H*J*1.5-.866025403*W,wt=H*W*1.5+.866025403*J,Mt=H*H*1.5-.5,(a=(p=(gt=p)-(Lt=pt*(gt-l)+ut*((It=u)-c)+yt*((Vt=y)-m))*pt-l)*p+(u=It-Lt*ut-c)*u+(y=Vt-Lt*yt-m)*y)&gt;_*_&amp;&amp;(p*=a=_/g.sqrt(a),u*=a,y*=a),gt=l+p,It=c+u,Vt=m+y,s.addPoint(gt,It,Vt,-pt,-ut,-yt,Lt,!1),It=st*vt+ht*zt+et*Nt,Vt=st*kt+ht*wt+et*Mt,(Lt=pt*((gt=(st=gt=st*dt+ht*ft+et*bt)+o)-l)+ut*((It=(ht=It)+n)-c)+yt*((Vt=(et=Vt)+r)-m))&lt;=0&amp;&amp;((a=(p=gt-Lt*pt-l)*p+(u=It-Lt*ut-c)*u+(y=Vt-Lt*yt-m)*y)&gt;_*_&amp;&amp;(p*=a=_/g.sqrt(a),u*=a,y*=a),gt=l+p,It=c+u,Vt=m+y,s.addPoint(gt,It,Vt,-pt,-ut,-yt,Lt,!1)),It=st*vt+ht*zt+et*Nt,Vt=st*kt+ht*wt+et*Mt,(Lt=pt*((gt=(st=gt=st*dt+ht*ft+et*bt)+o)-l)+ut*((It=(ht=It)+n)-c)+yt*((Vt=(et=Vt)+r)-m))&lt;=0&amp;&amp;((a=(p=gt-Lt*pt-l)*p+(u=It-Lt*ut-c)*u+(y=Vt-Lt*yt-m)*y)&gt;_*_&amp;&amp;(p*=a=_/g.sqrt(a),u*=a,y*=a),gt=l+p,It=c+u,Vt=m+y,s.addPoint(gt,It,Vt,-pt,-ut,-yt,Lt,!1));else{if(x=p,w&gt;0?(b=p+J*D*2,v=u+W*D*2,z=y+H*D*2):(b=p-J*D*2,v=u-W*D*2,z=y-H*D*2),(Tt=(St=(st=l-(x-=(N=pt*(x-l)+ut*((d=u)-c)+yt*((f=y)-m))*pt))*(p=(b-=(k=pt*(b-l)+ut*(v-c)+yt*(z-m))*pt)-x)+(ht=c-(d-=N*ut))*(u=(v-=k*ut)-d)+(et=m-(f-=N*yt))*(y=(z-=k*yt)-f))*St-(Pt=p*p+u*u+y*y)*(st*st+ht*ht+et*et-_*_))&lt;0)break;(I=(St-(Tt=g.sqrt(Tt)))/Pt)&lt;(M=(St+Tt)/Pt)&amp;&amp;(a=M,M=I,I=a),I&gt;1&amp;&amp;(I=1),M&lt;0&amp;&amp;(M=0),p=x+(b-x)*M,u=d+(v-d)*M,y=f+(z-f)*M,b=x+(b-x)*I,v=d+(v-d)*I,z=f+(z-f)*I,x=p,d=u,f=y,a=N+(k-N)*M,k=N+(k-N)*I,(N=a)&lt;0&amp;&amp;s.addPoint(x,d,f,-pt,-ut,-yt,N,!1),k&lt;0&amp;&amp;s.addPoint(b,v,z,-pt,-ut,-yt,k,!1)}}}}}),St.prototype=Object.assign(Object.create(gt.prototype),{constructor:St,detectCollision:function(t,i,s){var h,e;this.flip?(h=i,e=t):(h=t,e=i);var a,o,n,r,l,c=e.dimentions,m=h.position,p=m.x,u=m.y,y=m.z,x=e.position,d=x.x,f=x.y,b=x.z,v=h.radius,z=e.halfWidth,N=e.halfHeight,k=e.halfDepth,w=p-d,M=u-f,I=y-b,V=c[0]*w+c[1]*M+c[2]*I,L=c[3]*w+c[4]*M+c[5]*I,S=c[6]*w+c[7]*M+c[8]*I,P=0;V&gt;z?V=z:V&lt;-z?V=-z:P=1,L&gt;N?L=N:L&lt;-N?L=-N:P|=2,S&gt;k?S=k:S&lt;-k?S=-k:P|=4,7==P?(I=S&lt;0?k+S:k-S,(w=V&lt;0?z+V:z-V)&lt;(M=L&lt;0?N+L:N-L)?w&lt;I?(r=w-z,V&lt;0?(V=-z,w=c[0],M=c[1],I=c[2]):(V=z,w=-c[0],M=-c[1],I=-c[2])):(r=I-k,S&lt;0?(S=-k,w=c[6],M=c[7],I=c[8]):(S=k,w=-c[6],M=-c[7],I=-c[8])):M&lt;I?(r=M-N,L&lt;0?(L=-N,w=c[3],M=c[4],I=c[5]):(L=N,w=-c[3],M=-c[4],I=-c[5])):(r=I-k,S&lt;0?(S=-k,w=c[6],M=c[7],I=c[8]):(S=k,w=-c[6],M=-c[7],I=-c[8])),a=d+V*c[0]+L*c[3]+S*c[6],o=f+V*c[1]+L*c[4]+S*c[7],n=b+V*c[2]+L*c[5]+S*c[8],s.addPoint(p+v*w,u+v*M,y+v*I,w,M,I,r-v,this.flip)):(a=d+V*c[0]+L*c[3]+S*c[6],o=f+V*c[1]+L*c[4]+S*c[7],n=b+V*c[2]+L*c[5]+S*c[8],(r=(w=a-m.x)*w+(M=o-m.y)*M+(I=n-m.z)*I)&gt;0&amp;&amp;r&lt;v*v&amp;&amp;(w*=l=1/(r=g.sqrt(r)),M*=l,I*=l,s.addPoint(p+v*w,u+v*M,y+v*I,w,M,I,r-v,this.flip)))}}),Pt.prototype=Object.assign(Object.create(gt.prototype),{constructor:Pt,detectCollision:function(t,i,s){var h,e;this.flip?(h=i,e=t):(h=t,e=i);var a=h.position,o=a.x,n=a.y,r=a.z,l=e.position,c=l.x,m=l.y,p=l.z,u=e.normalDirection.x,y=e.normalDirection.y,x=e.normalDirection.z,d=h.radius,f=e.radius,b=d+f,v=e.halfHeight,z=o-c,N=n-m,k=r-p,w=z*u+N*y+k*x;if(!(w&lt;-v-d||w&gt;v+d)){var M,I=c+w*u,V=m+w*y,L=p+w*x,S=o-I,P=n-V,T=r-L,A=S*S+P*P+T*T;if(!(A&gt;b*b))A&gt;f*f&amp;&amp;(S*=A=f/g.sqrt(A),P*=A,T*=A),w&lt;-v?w=-v:w&gt;v&amp;&amp;(w=v),(A=(z=(I=c+w*u+S)-o)*z+(N=(V=m+w*y+P)-n)*N+(k=(L=p+w*x+T)-r)*k)&gt;0&amp;&amp;A&lt;d*d&amp;&amp;(z*=M=1/(A=g.sqrt(A)),N*=M,k*=M,s.addPoint(o+z*d,n+N*d,r+k*d,z,N,k,A-d,this.flip))}}}),Tt.prototype=Object.assign(Object.create(gt.prototype),{constructor:Tt,detectCollision:function(t,i,s){var h=t,e=i,a=h.position,o=e.position,n=o.x-a.x,r=o.y-a.y,l=o.z-a.z,c=n*n+r*r+l*l,m=h.radius,p=m+e.radius;if(c&gt;0&amp;&amp;c&lt;p*p){var u=1/(c=g.sqrt(c));n*=u,r*=u,l*=u,s.addPoint(a.x+n*m,a.y+r*m,a.z+l*m,n,r,l,c-p,!1)}}}),At.prototype=Object.assign(Object.create(gt.prototype),{constructor:At,detectCollision:function(t,i,s){var h,e=this.n,a=this.p,o=this.flip?i:t,n=this.flip?t:i,r=o.radius;e.sub(o.position,n.position),e.x*=n.normal.x,e.y*=n.normal.y,e.z*=n.normal.z,(h=e.lengthSq())&gt;0&amp;&amp;h&lt;r*r&amp;&amp;(h=g.sqrt(h),e.copy(n.normal).negate(),a.copy(o.position).addScaledVector(e,r),s.addPointVec(a,e,h-r,this.flip))}}),jt.prototype=Object.assign(Object.create(gt.prototype),{constructor:jt,detectCollision:function(t,i,s){var h,e=this.n,a=this.p,o=this.cc,n=this.flip?i:t,r=this.flip?t:i,l=n.dimentions,c=n.halfWidth,m=n.halfHeight,p=n.halfDepth,u=0;this.dix.set(l[0],l[1],l[2]),this.diy.set(l[3],l[4],l[5]),this.diz.set(l[6],l[7],l[8]),e.sub(n.position,r.position),e.x*=r.normal.x,e.y*=r.normal.y,e.z*=r.normal.z,o.set(g.dotVectors(this.dix,e),g.dotVectors(this.diy,e),g.dotVectors(this.diz,e)),o.x&gt;c?o.x=c:o.x&lt;-c?o.x=-c:u=1,o.y&gt;m?o.y=m:o.y&lt;-m?o.y=-m:u|=2,o.z&gt;p?o.z=p:o.z&lt;-p?o.z=-p:u|=4,7===u&amp;&amp;(e.set(o.x&lt;0?c+o.x:c-o.x,o.y&lt;0?m+o.y:m-o.y,o.z&lt;0?p+o.z:p-o.z),e.x&lt;e.y?e.x&lt;e.z?(h=e.x-c,o.x&lt;0?(o.x=-c,e.copy(this.dix)):(o.x=c,e.subEqual(this.dix))):(h=e.z-p,o.z&lt;0?(o.z=-p,e.copy(this.diz)):(o.z=p,e.subEqual(this.diz))):e.y&lt;e.z?(h=e.y-m,o.y&lt;0?(o.y=-m,e.copy(this.diy)):(o.y=m,e.subEqual(this.diy))):(h=e.z-p,o.z&lt;0?(o.z=-p,e.copy(this.diz)):(o.z=p,e.subEqual(this.diz))),a.copy(r.position).addScaledVector(e,1),s.addPointVec(a,e,h,this.flip))}}),Object.assign(Ct.prototype,{World:!0,play:function(){if(null===this.timer){var t=this;this.timer=setInterval(function(){t.step()},this.timerate)}},stop:function(){null!==this.timer&amp;&amp;(clearInterval(this.timer),this.timer=null)},setGravity:function(t){this.gravity.fromArray(t)},getInfo:function(){return this.isStat?this.performance.show():&quot;&quot;},clear:function(){for(this.stop(),this.preLoop=null,this.postLoop=null,this.randX=65535;null!==this.joints;)this.removeJoint(this.joints);for(;null!==this.contacts;)this.removeContact(this.contacts);for(;null!==this.rigidBodies;)this.removeRigidBody(this.rigidBodies)},addRigidBody:function(t){t.parent&amp;&amp;I(&quot;World&quot;,&quot;It is not possible to be added to more than one world one of the rigid body&quot;),t.setParent(this);for(var i=t.shapes;null!==i;i=i.next)this.addShape(i);null!==this.rigidBodies&amp;&amp;((this.rigidBodies.prev=t).next=this.rigidBodies),this.rigidBodies=t,this.numRigidBodies++},removeRigidBody:function(t){var i=t;if(i.parent===this){i.awake();for(var s=i.jointLink;null!=s;){var h=s.joint;s=s.next,this.removeJoint(h)}for(var e=t.shapes;null!==e;e=e.next)this.removeShape(e);var a=i.prev,o=i.next;null!==a&amp;&amp;(a.next=o),null!==o&amp;&amp;(o.prev=a),this.rigidBodies==i&amp;&amp;(this.rigidBodies=o),i.prev=null,i.next=null,i.parent=null,this.numRigidBodies--}},getByName:function(t){for(var i=this.rigidBodies;null!==i;){if(i.name===t)return i;i=i.next}for(var s=this.joints;null!==s;){if(s.name===t)return s;s=s.next}return null},addShape:function(t){t.parent&amp;&amp;t.parent.parent||I(&quot;World&quot;,&quot;It is not possible to be added alone to shape world&quot;),t.proxy=this.broadPhase.createProxy(t),t.updateProxy(),this.broadPhase.addProxy(t.proxy)},removeShape:function(t){this.broadPhase.removeProxy(t.proxy),t.proxy=null},addJoint:function(t){t.parent&amp;&amp;I(&quot;World&quot;,&quot;It is not possible to be added to more than one world one of the joint&quot;),null!=this.joints&amp;&amp;((this.joints.prev=t).next=this.joints),this.joints=t,t.setParent(this),this.numJoints++,t.awake(),t.attach()},removeJoint:function(t){var i=t,s=i.prev,h=i.next;null!==s&amp;&amp;(s.next=h),null!==h&amp;&amp;(h.prev=s),this.joints==i&amp;&amp;(this.joints=h),i.prev=null,i.next=null,this.numJoints--,i.awake(),i.detach(),i.parent=null},addContact:function(t,i){var s;null!==this.unusedContacts?(s=this.unusedContacts,this.unusedContacts=this.unusedContacts.next):s=new lt,s.attach(t,i),s.detector=this.detectors[t.type][i.type],this.contacts&amp;&amp;((this.contacts.prev=s).next=this.contacts),this.contacts=s,this.numContacts++},removeContact:function(t){var i=t.prev,s=t.next;s&amp;&amp;(s.prev=i),i&amp;&amp;(i.next=s),this.contacts==t&amp;&amp;(this.contacts=s),t.prev=null,t.next=null,t.detach(),t.next=this.unusedContacts,this.unusedContacts=t,this.numContacts--},getContact:function(t,i){var s,h;t=t.constructor===ct?t.name:t,i=i.constructor===ct?i.name:i;for(var e=this.contacts;null!==e;){if(s=e.body1.name,h=e.body2.name,s===t&amp;&amp;h===i||h===t&amp;&amp;s===i)return e.touching?e:null;e=e.next}return null},checkContact:function(t,i){for(var s,h,e=this.contacts;null!==e;){if(s=e.body1.name||&quot; &quot;,h=e.body2.name||&quot; &quot;,s==t&amp;&amp;h==i||h==t&amp;&amp;s==i)return!!e.touching;e=e.next}},callSleep:function(t){return!!t.allowSleep&amp;&amp;(!(t.linearVelocity.lengthSq()&gt;.04)&amp;&amp;!(t.angularVelocity.lengthSq()&gt;.25))},step:function(){var t=this.isStat;t&amp;&amp;this.performance.setTime(0);for(var i=this.rigidBodies;null!==i;)i.addedToIsland=!1,i.sleeping&amp;&amp;i.testWakeUp(),i=i.next;t&amp;&amp;this.performance.setTime(1),this.broadPhase.detectPairs();for(var s=this.broadPhase.pairs,h=this.broadPhase.numPairs;h--;){var e,a,o,n=s[h];n.shape1.id&lt;n.shape2.id?(e=n.shape1,a=n.shape2):(e=n.shape2,a=n.shape1),o=e.numContacts&lt;a.numContacts?e.contactLink:a.contactLink;for(var r=!1;o;){if((z=o.contact).shape1==e&amp;&amp;z.shape2==a){z.persisting=!0,r=!0;break}o=o.next}r||this.addContact(e,a)}for(t&amp;&amp;this.performance.calcBroadPhase(),this.numContactPoints=0,z=this.contacts;null!==z;)if(z.persisting||!z.shape1.aabb.intersectTest(z.shape2.aabb)){var l=z.body1,c=z.body2;(l.isDynamic&amp;&amp;!l.sleeping||c.isDynamic&amp;&amp;!c.sleeping)&amp;&amp;z.updateManifold(),this.numContactPoints+=z.manifold.numPoints,z.persisting=!1,z.constraint.addedToIsland=!1,z=z.next}else{var m=z.next;this.removeContact(z),z=m}t&amp;&amp;this.performance.calcNarrowPhase();var p,u,y=1/this.timeStep;for(p=this.joints;null!==p;p=p.next)p.addedToIsland=!1;this.islandRigidBodies=[],this.islandConstraints=[],this.islandStack=[],t&amp;&amp;this.performance.setTime(1),this.numIslands=0;for(var x=this.rigidBodies;null!==x;x=x.next)if(!(x.addedToIsland||x.isStatic||x.sleeping))if(x.isLonely())x.isDynamic&amp;&amp;x.linearVelocity.addScaledVector(this.gravity,this.timeStep),this.callSleep(x)?(x.sleepTime+=this.timeStep,x.sleepTime&gt;.5?x.sleep():x.updatePosition(this.timeStep)):(x.sleepTime=0,x.updatePosition(this.timeStep)),this.numIslands++;else{var d=0,f=0,b=1;this.islandStack[0]=x,x.addedToIsland=!0;do{if(i=this.islandStack[--b],this.islandStack[b]=null,i.sleeping=!1,this.islandRigidBodies[d++]=i,!i.isStatic){for(var v=i.contactLink;null!==v;v=v.next){var z;if(!(u=(z=v.contact).constraint).addedToIsland&amp;&amp;z.touching)this.islandConstraints[f++]=u,u.addedToIsland=!0,(m=v.body).addedToIsland||(this.islandStack[b++]=m,m.addedToIsland=!0)}for(var N=i.jointLink;null!==N;N=N.next)(u=N.joint).addedToIsland||(this.islandConstraints[f++]=u,u.addedToIsland=!0,!(m=N.body).addedToIsland&amp;&amp;m.isDynamic&amp;&amp;(this.islandStack[b++]=m,m.addedToIsland=!0))}}while(0!=b);for(var k=(new L).addScaledVector(this.gravity,this.timeStep),w=d;w--;)(i=this.islandRigidBodies[w]).isDynamic&amp;&amp;i.linearVelocity.addEqual(k);if(this.enableRandomizer)for(w=f;w--;)if(0!==w){var M=(this.randX=this.randX*this.randA+this.randB&amp;2147483647)/2147483648*w|0;u=this.islandConstraints[w],this.islandConstraints[w]=this.islandConstraints[M],this.islandConstraints[M]=u}for(w=f;w--;)this.islandConstraints[w].preSolve(this.timeStep,y);for(var g=this.numIterations;g--;)for(w=f;w--;)this.islandConstraints[w].solve();for(w=f;w--;)this.islandConstraints[w].postSolve(),this.islandConstraints[w]=null;var I=10;for(w=d;w--;)i=this.islandRigidBodies[w],this.callSleep(i)?(i.sleepTime+=this.timeStep,i.sleepTime&lt;I&amp;&amp;(I=i.sleepTime)):(i.sleepTime=0,I=0);if(I&gt;.5)for(w=d;w--;)this.islandRigidBodies[w].sleep(),this.islandRigidBodies[w]=null;else for(w=d;w--;)this.islandRigidBodies[w].updatePosition(this.timeStep),this.islandRigidBodies[w]=null;this.numIslands++}t&amp;&amp;this.performance.calcEnd(),null!==this.postLoop&amp;&amp;this.postLoop()},remove:function(t){},add:function(t){var i=(t=t||{}).type||&quot;box&quot;;return i.constructor===String&amp;&amp;(i=[i]),&quot;joint&quot;===i[0].substring(0,5)?this.initJoint(i[0],t):this.initBody(i,t)},initBody:function(t,i){var s=this.invScale,h=i.move||!1,e=i.kinematic||!1,a=i.pos||[0,0,0];a=a.map(function(t){return t*s});var o=i.posShape||[0,0,0];o=o.map(function(t){return t*s});var n=i.rot||[0,0,0];n=n.map(function(t){return t*g.degtorad});var r=i.rotShape;r=n.map(function(t){return t*g.degtorad});var l=void 0===i.size?[1,1,1]:i.size;1===l.length&amp;&amp;(l[1]=l[0]),2===l.length&amp;&amp;(l[2]=l[0]),l=l.map(function(t){return t*s});var c=new F;void 0!==i.density&amp;&amp;(c.density=i.density),void 0!==i.friction&amp;&amp;(c.friction=i.friction),void 0!==i.restitution&amp;&amp;(c.restitution=i.restitution),void 0!==i.belongsTo&amp;&amp;(c.belongsTo=i.belongsTo),void 0!==i.collidesWith&amp;&amp;(c.collidesWith=i.collidesWith),void 0!==i.config&amp;&amp;(void 0!==i.config[0]&amp;&amp;(c.density=i.config[0]),void 0!==i.config[1]&amp;&amp;(c.friction=i.config[1]),void 0!==i.config[2]&amp;&amp;(c.restitution=i.config[2]),void 0!==i.config[3]&amp;&amp;(c.belongsTo=i.config[3]),void 0!==i.config[4]&amp;&amp;(c.collidesWith=i.config[4]));for(var m,p,u=new ct(new L(a[0],a[1],a[2]),(new S).setFromEuler(n[0],n[1],n[2])),y=0;y&lt;t.length;y++){switch(void 0!==o[p=3*y]&amp;&amp;c.relativePosition.set(o[p],o[p+1],o[p+2]),void 0!==r[p]&amp;&amp;c.relativeRotation.setQuat((new S).setFromEuler(r[p],r[p+1],r[p+2])),t[y]){case&quot;sphere&quot;:m=new O(c,l[p]);break;case&quot;cylinder&quot;:m=new D(c,l[p],l[p+1]);break;case&quot;box&quot;:m=new C(c,l[p],l[p+1],l[p+2]);break;case&quot;plane&quot;:m=new E(c)}u.addShape(m)}return i.neverSleep||e?u.allowSleep=!1:u.allowSleep=!0,u.isKinematic=e,h?i.massPos||i.massRot?u.setupMass(1,!1):u.setupMass(1,!0):u.setupMass(2),void 0!==i.name&amp;&amp;(u.name=i.name),this.addRigidBody(u),h&amp;&amp;(i.sleep?u.sleep():u.awake()),u},initJoint:function(t,i){var s,h,e=this.invScale,a=i.axe1||[1,0,0],o=i.axe2||[1,0,0],n=i.pos1||[0,0,0],r=i.pos2||[0,0,0];n=n.map(function(t){return t*e}),r=r.map(function(t){return t*e}),&quot;jointDistance&quot;===t?(s=i.min||0,h=i.max||10,s*=e,h*=e):(s=i.min||57.29578,h=i.max||0,s*=g.degtorad,h*=g.degtorad);var l=i.limit||null,c=i.spring||null,m=i.motor||null,p=new it;p.scale=this.scale,p.invScale=this.invScale,p.allowCollision=i.collision||!1,p.localAxis1.set(a[0],a[1],a[2]),p.localAxis2.set(o[0],o[1],o[2]),p.localAnchorPoint1.set(n[0],n[1],n[2]),p.localAnchorPoint2.set(r[0],r[1],r[2]);var u,y=null,x=null;if(void 0===i.body1||void 0===i.body2)return I(&quot;World&quot;,&quot;Can&#39;t add joint if attach rigidbodys not define !&quot;);if(i.body1.constructor===String?y=this.getByName(i.body1):i.body1.constructor===Number?y=this.getByName(i.body1):i.body1.constructor===ct&amp;&amp;(y=i.body1),i.body2.constructor===String?x=this.getByName(i.body2):i.body2.constructor===Number?x=this.getByName(i.body2):i.body2.constructor===ct&amp;&amp;(x=i.body2),null===y||null===x)return I(&quot;World&quot;,&quot;Can&#39;t add joint attach rigidbodys not find !&quot;);switch(p.body1=y,p.body2=x,t){case&quot;jointDistance&quot;:u=new Y(p,s,h),null!==c&amp;&amp;u.limitMotor.setSpring(c[0],c[1]),null!==m&amp;&amp;u.limitMotor.setMotor(m[0],m[1]);break;case&quot;jointHinge&quot;:case&quot;joint&quot;:u=new H(p,s,h),null!==c&amp;&amp;u.limitMotor.setSpring(c[0],c[1]),null!==m&amp;&amp;u.limitMotor.setMotor(m[0],m[1]);break;case&quot;jointPrisme&quot;:u=new G(p,s,h);break;case&quot;jointSlide&quot;:u=new $(p,s,h);break;case&quot;jointBall&quot;:u=new Q(p);break;case&quot;jointWheel&quot;:u=new tt(p),null!==l&amp;&amp;u.rotationalLimitMotor1.setLimit(l[0],l[1]),null!==c&amp;&amp;u.rotationalLimitMotor1.setSpring(c[0],c[1]),null!==m&amp;&amp;u.rotationalLimitMotor1.setMotor(m[0],m[1])}return u.name=i.name||&quot;&quot;,this.addJoint(u),u}}),t.Math=g,t.Vec3=L,t.Quat=S,t.Mat33=P,t.Shape=j,t.Box=C,t.Sphere=O,t.Cylinder=D,t.Plane=E,t.Particle=B,t.ShapeConfig=F,t.LimitMotor=q,t.HingeJoint=H,t.BallAndSocketJoint=Q,t.DistanceJoint=Y,t.PrismaticJoint=G,t.SliderJoint=$,t.WheelJoint=tt,t.JointConfig=it,t.RigidBody=ct,t.World=Ct,t.REVISION=o,t.BR_NULL=n,t.BR_BRUTE_FORCE=r,t.BR_SWEEP_AND_PRUNE=l,t.BR_BOUNDING_VOLUME_TREE=c,t.BODY_NULL=m,t.BODY_DYNAMIC=1,t.BODY_STATIC=2,t.BODY_KINEMATIC=3,t.BODY_GHOST=4,t.SHAPE_NULL=p,t.SHAPE_SPHERE=u,t.SHAPE_BOX=y,t.SHAPE_CYLINDER=x,t.SHAPE_PLANE=d,t.SHAPE_PARTICLE=f,t.SHAPE_TETRA=6,t.JOINT_NULL=b,t.JOINT_DISTANCE=v,t.JOINT_BALL_AND_SOCKET=z,t.JOINT_HINGE=N,t.JOINT_WHEEL=k,t.JOINT_SLIDER=w,t.JOINT_PRISMATIC=M,t.AABB_PROX=.005,t.printError=I,t.InfoDisplay=V,Object.defineProperty(t,&quot;__esModule&quot;,{value:!0})});</td>
      </tr>
</table>

  <details class="details-reset details-overlay BlobToolbar position-absolute js-file-line-actions dropdown d-none" aria-hidden="true">
    <summary class="btn-octicon ml-0 px-2 p-0 bg-white border border-gray-dark rounded-1" aria-label="Inline file action toolbar">
      <svg class="octicon octicon-kebab-horizontal" viewBox="0 0 13 16" version="1.1" width="13" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M1.5 9a1.5 1.5 0 100-3 1.5 1.5 0 000 3zm5 0a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM13 7.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"></path></svg>
    </summary>
    <details-menu>
      <ul class="BlobToolbar-dropdown dropdown-menu dropdown-menu-se mt-2" style="width:185px">
        <li>
          <clipboard-copy role="menuitem" class="dropdown-item" id="js-copy-lines" style="cursor:pointer;">
            Copy lines
          </clipboard-copy>
        </li>
        <li>
          <clipboard-copy role="menuitem" class="dropdown-item" id="js-copy-permalink" style="cursor:pointer;">
            Copy permalink
          </clipboard-copy>
        </li>
        <li><a class="dropdown-item js-update-url-with-hash" id="js-view-git-blame" role="menuitem" href="/lo-th/Oimo.js/blame/dc745bb86c25767b2df59dee4b63c16bf86c3171/build/oimo.min.js">View git blame</a></li>
          <li><a class="dropdown-item" id="js-new-issue" role="menuitem" href="/lo-th/Oimo.js/issues/new">Reference in new issue</a></li>
      </ul>
    </details-menu>
  </details>

  </div>

    </div>

  

  <details class="details-reset details-overlay details-overlay-dark">
    <summary data-hotkey="l" aria-label="Jump to line"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast linejump" aria-label="Jump to line">
      <!-- '"` --><!-- </textarea></xmp> --></option></form><form class="js-jump-to-line-form Box-body d-flex" action="" accept-charset="UTF-8" method="get">
        <input class="form-control flex-auto mr-3 linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus>
        <button type="submit" class="btn" data-close-dialog>Go</button>
</form>    </details-dialog>
  </details>

    <div class="Popover anim-scale-in js-tagsearch-popover"
     hidden
     data-tagsearch-url="/lo-th/Oimo.js/find-symbols"
     data-tagsearch-ref="gh-pages"
     data-tagsearch-path="build/oimo.min.js"
     data-tagsearch-lang="JavaScript"
     data-hydro-click="{&quot;event_type&quot;:&quot;code_navigation.click_on_symbol&quot;,&quot;payload&quot;:{&quot;action&quot;:&quot;click_on_symbol&quot;,&quot;repository_id&quot;:13634772,&quot;ref&quot;:&quot;gh-pages&quot;,&quot;language&quot;:&quot;JavaScript&quot;,&quot;originating_url&quot;:&quot;https://github.com/lo-th/Oimo.js/blob/gh-pages/build/oimo.min.js&quot;,&quot;user_id&quot;:1734931}}"
     data-hydro-click-hmac="76dc419c9433d914fb24936bbf0300d3ab33518bee6981ec451b53e711b71089">
  <div class="Popover-message Popover-message--large Popover-message--top-left TagsearchPopover mt-1 mb-4 mx-auto Box box-shadow-large">
    <div class="TagsearchPopover-content js-tagsearch-popover-content overflow-auto" style="will-change:transform;">
    </div>
  </div>
</div>



  </div>
</div>

    </main>
  </div>
  

  </div>

        
<div class="footer container-lg width-full p-responsive" role="contentinfo">
  <div class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      <li class="mr-3 mr-lg-0">&copy; 2020 GitHub, Inc.</li>
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to terms, text:terms" href="https://github.com/site/terms">Terms</a></li>
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to privacy, text:privacy" href="https://github.com/site/privacy">Privacy</a></li>
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to security, text:security" href="https://github.com/security">Security</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://githubstatus.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a data-ga-click="Footer, go to help, text:help" href="https://help.github.com">Help</a></li>

    </ul>

    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mx-lg-4" href="https://github.com">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>
</a>
   <ul class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
        <li class="mr-3 mr-lg-0"><a data-ga-click="Footer, go to contact, text:contact" href="https://github.com/contact">Contact GitHub</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://github.com/pricing" data-ga-click="Footer, go to Pricing, text:Pricing">Pricing</a></li>
      <li class="mr-3 mr-lg-0"><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3 mr-lg-0"><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
        <li class="mr-3 mr-lg-0"><a href="https://github.blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a data-ga-click="Footer, go to about, text:about" href="https://github.com/about">About</a></li>
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 000 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 00.01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg>
    <button type="button" class="flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
    </button>
    You can‚Äôt perform that action at this time.
  </div>


    <script crossorigin="anonymous" async="async" integrity="sha512-WcQmT2vhcClFVOaaAJV/M+HqsJ2Gq/myvl6F3gCVBxykazXTs+i5fvxncSXwyG1CSfcrqmLFw/R/bmFYzprX2A==" type="application/javascript" id="js-conditional-compat" data-src="https://github.githubassets.com/assets/compat-bootstrap-59c4264f.js"></script>
    <script crossorigin="anonymous" integrity="sha512-CcHu7jzfxvBELN006wvfUN0tIOU83OJNyclvF0p+gQll1M1DjIioWsRbGZMgDL3zruW1D7dRxdbJqXM6P57PbA==" type="application/javascript" src="https://github.githubassets.com/assets/environment-bootstrap-09c1eeee.js"></script>
      <script crossorigin="anonymous" async="async" integrity="sha512-JfA9c00QqdFAVbQaARMl2BJ+QwABPJ247GKHsBbdm7xq2P00Z6cmwPG7cFFXV0SVHPlKz8EqPiJeZDOZZTRFww==" type="application/javascript" src="https://github.githubassets.com/assets/vendor-25f03d73.js"></script>
      <script crossorigin="anonymous" async="async" integrity="sha512-0qle0tNQPnlH1q92c7CVzB2FwFT1wq/J7jLgIX0g83+9GT8HiWBeSIf/MjVWrMdSUUS2XfhUW71DfbRw0wu6sw==" type="application/javascript" src="https://github.githubassets.com/assets/frameworks-d2a95ed2.js"></script>
    
    <script crossorigin="anonymous" async="async" integrity="sha512-nhsSAnfULb8XazWsy62HMKj3rC5nFkHA/rDFEALuTt5MNhm8Eo0CTNzemUx4t4p4wM4j6eE6i6SiHBi+96MHdw==" type="application/javascript" src="https://github.githubassets.com/assets/github-bootstrap-9e1b1202.js"></script>
    
    
    
  <div class="js-stale-session-flash flash flash-warn flash-banner" hidden
    >
    <svg class="octicon octicon-alert" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 000 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 00.01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg>
    <span class="js-stale-session-flash-signed-in" hidden>You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="js-stale-session-flash-signed-out" hidden>You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
  <template id="site-details-dialog">
  <details class="details-reset details-overlay details-overlay-dark lh-default text-gray-dark hx_rsm" open>
    <summary role="button" aria-label="Close dialog"></summary>
    <details-dialog class="Box Box--overlay d-flex flex-column anim-fade-in fast hx_rsm-dialog hx_rsm-modal">
      <button class="Box-btn-octicon m-0 btn-octicon position-absolute right-0 top-0" type="button" aria-label="Close dialog" data-close-dialog>
        <svg class="octicon octicon-x" viewBox="0 0 12 16" version="1.1" width="12" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z"></path></svg>
      </button>
      <div class="octocat-spinner my-6 js-details-dialog-spinner"></div>
    </details-dialog>
  </details>
</template>

  <div class="Popover js-hovercard-content position-absolute" style="display: none; outline: none;" tabindex="0">
  <div class="Popover-message Popover-message--bottom-left Popover-message--large Box box-shadow-large" style="width:360px;">
  </div>
</div>


  </body>
</html>

